{"version":3,"file":"contentScript.js","mappings":"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","sources":["webpack://Cubecraft/./node_modules/dexie/dist/modern/dexie.mjs","webpack://Cubecraft/./node_modules/dexie-export-import/dist/dexie-export-import.mjs","webpack://Cubecraft/./src/contentScript.js"],"sourcesContent":["/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.0, Thu Nov 18 2021\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n \nconst _global = typeof globalThis !== 'undefined' ? globalThis :\n    typeof self !== 'undefined' ? self :\n        typeof window !== 'undefined' ? window :\n            global;\n\nconst keys = Object.keys;\nconst isArray = Array.isArray;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n    _global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n    if (typeof extension !== 'object')\n        return obj;\n    keys(extension).forEach(function (key) {\n        obj[key] = extension[key];\n    });\n    return obj;\n}\nconst getProto = Object.getPrototypeOf;\nconst _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n    return _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n    if (typeof extension === 'function')\n        extension = extension(getProto(proto));\n    (typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(key => {\n        setProp(proto, key, extension[key]);\n    });\n}\nconst defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n    defineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n        { get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n        { value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n    return {\n        from: function (Parent) {\n            Child.prototype = Object.create(Parent.prototype);\n            setProp(Child.prototype, \"constructor\", Child);\n            return {\n                extend: props.bind(null, Child.prototype)\n            };\n        }\n    };\n}\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n    const pd = getOwnPropertyDescriptor(obj, prop);\n    let proto;\n    return pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nconst _slice = [].slice;\nfunction slice(args, start, end) {\n    return _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n    return overridedFactory(origFunc);\n}\nfunction assert(b) {\n    if (!b)\n        throw new Error(\"Assertion Failed\");\n}\nfunction asap$1(fn) {\n    if (_global.setImmediate)\n        setImmediate(fn);\n    else\n        setTimeout(fn, 0);\n}\nfunction arrayToObject(array, extractor) {\n    return array.reduce((result, item, i) => {\n        var nameAndValue = extractor(item, i);\n        if (nameAndValue)\n            result[nameAndValue[0]] = nameAndValue[1];\n        return result;\n    }, {});\n}\nfunction tryCatch(fn, onerror, args) {\n    try {\n        fn.apply(null, args);\n    }\n    catch (ex) {\n        onerror && onerror(ex);\n    }\n}\nfunction getByKeyPath(obj, keyPath) {\n    if (hasOwn(obj, keyPath))\n        return obj[keyPath];\n    if (!keyPath)\n        return obj;\n    if (typeof keyPath !== 'string') {\n        var rv = [];\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            var val = getByKeyPath(obj, keyPath[i]);\n            rv.push(val);\n        }\n        return rv;\n    }\n    var period = keyPath.indexOf('.');\n    if (period !== -1) {\n        var innerObj = obj[keyPath.substr(0, period)];\n        return innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n    }\n    return undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n    if (!obj || keyPath === undefined)\n        return;\n    if ('isFrozen' in Object && Object.isFrozen(obj))\n        return;\n    if (typeof keyPath !== 'string' && 'length' in keyPath) {\n        assert(typeof value !== 'string' && 'length' in value);\n        for (var i = 0, l = keyPath.length; i < l; ++i) {\n            setByKeyPath(obj, keyPath[i], value[i]);\n        }\n    }\n    else {\n        var period = keyPath.indexOf('.');\n        if (period !== -1) {\n            var currentKeyPath = keyPath.substr(0, period);\n            var remainingKeyPath = keyPath.substr(period + 1);\n            if (remainingKeyPath === \"\")\n                if (value === undefined) {\n                    if (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n                        obj.splice(currentKeyPath, 1);\n                    else\n                        delete obj[currentKeyPath];\n                }\n                else\n                    obj[currentKeyPath] = value;\n            else {\n                var innerObj = obj[currentKeyPath];\n                if (!innerObj)\n                    innerObj = (obj[currentKeyPath] = {});\n                setByKeyPath(innerObj, remainingKeyPath, value);\n            }\n        }\n        else {\n            if (value === undefined) {\n                if (isArray(obj) && !isNaN(parseInt(keyPath)))\n                    obj.splice(keyPath, 1);\n                else\n                    delete obj[keyPath];\n            }\n            else\n                obj[keyPath] = value;\n        }\n    }\n}\nfunction delByKeyPath(obj, keyPath) {\n    if (typeof keyPath === 'string')\n        setByKeyPath(obj, keyPath, undefined);\n    else if ('length' in keyPath)\n        [].map.call(keyPath, function (kp) {\n            setByKeyPath(obj, kp, undefined);\n        });\n}\nfunction shallowClone(obj) {\n    var rv = {};\n    for (var m in obj) {\n        if (hasOwn(obj, m))\n            rv[m] = obj[m];\n    }\n    return rv;\n}\nconst concat = [].concat;\nfunction flatten(a) {\n    return concat.apply([], a);\n}\nconst intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n    .split(',').concat(flatten([8, 16, 32, 64].map(num => [\"Int\", \"Uint\", \"Float\"].map(t => t + num + \"Array\")))).filter(t => _global[t]);\nconst intrinsicTypes = intrinsicTypeNames.map(t => _global[t]);\narrayToObject(intrinsicTypeNames, x => [x, true]);\nlet circularRefs = null;\nfunction deepClone(any) {\n    circularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n    const rv = innerDeepClone(any);\n    circularRefs = null;\n    return rv;\n}\nfunction innerDeepClone(any) {\n    if (!any || typeof any !== 'object')\n        return any;\n    let rv = circularRefs && circularRefs.get(any);\n    if (rv)\n        return rv;\n    if (isArray(any)) {\n        rv = [];\n        circularRefs && circularRefs.set(any, rv);\n        for (var i = 0, l = any.length; i < l; ++i) {\n            rv.push(innerDeepClone(any[i]));\n        }\n    }\n    else if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n        rv = any;\n    }\n    else {\n        const proto = getProto(any);\n        rv = proto === Object.prototype ? {} : Object.create(proto);\n        circularRefs && circularRefs.set(any, rv);\n        for (var prop in any) {\n            if (hasOwn(any, prop)) {\n                rv[prop] = innerDeepClone(any[prop]);\n            }\n        }\n    }\n    return rv;\n}\nconst { toString } = {};\nfunction toStringTag(o) {\n    return toString.call(o).slice(8, -1);\n}\nconst iteratorSymbol = typeof Symbol !== 'undefined' ?\n    Symbol.iterator :\n    '@@iterator';\nconst getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n    var i;\n    return x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nconst NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n    var i, a, x, it;\n    if (arguments.length === 1) {\n        if (isArray(arrayLike))\n            return arrayLike.slice();\n        if (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n            return [arrayLike];\n        if ((it = getIteratorOf(arrayLike))) {\n            a = [];\n            while ((x = it.next()), !x.done)\n                a.push(x.value);\n            return a;\n        }\n        if (arrayLike == null)\n            return [arrayLike];\n        i = arrayLike.length;\n        if (typeof i === 'number') {\n            a = new Array(i);\n            while (i--)\n                a[i] = arrayLike[i];\n            return a;\n        }\n        return [arrayLike];\n    }\n    i = arguments.length;\n    a = new Array(i);\n    while (i--)\n        a[i] = arguments[i];\n    return a;\n}\nconst isAsyncFunction = typeof Symbol !== 'undefined'\n    ? (fn) => fn[Symbol.toStringTag] === 'AsyncFunction'\n    : () => false;\n\nvar debug = typeof location !== 'undefined' &&\n    /^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n    debug = value;\n    libraryFilter = filter;\n}\nvar libraryFilter = () => true;\nconst NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n    if (NEEDS_THROW_FOR_STACK)\n        try {\n            getErrorWithStack.arguments;\n            throw new Error();\n        }\n        catch (e) {\n            return e;\n        }\n    return new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n    var stack = exception.stack;\n    if (!stack)\n        return \"\";\n    numIgnoredFrames = (numIgnoredFrames || 0);\n    if (stack.indexOf(exception.name) === 0)\n        numIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n    return stack.split('\\n')\n        .slice(numIgnoredFrames)\n        .filter(libraryFilter)\n        .map(frame => \"\\n\" + frame)\n        .join('');\n}\n\nvar dexieErrorNames = [\n    'Modify',\n    'Bulk',\n    'OpenFailed',\n    'VersionChange',\n    'Schema',\n    'Upgrade',\n    'InvalidTable',\n    'MissingAPI',\n    'NoSuchDatabase',\n    'InvalidArgument',\n    'SubTransaction',\n    'Unsupported',\n    'Internal',\n    'DatabaseClosed',\n    'PrematureCommit',\n    'ForeignAwait'\n];\nvar idbDomErrorNames = [\n    'Unknown',\n    'Constraint',\n    'Data',\n    'TransactionInactive',\n    'ReadOnly',\n    'Version',\n    'NotFound',\n    'InvalidState',\n    'InvalidAccess',\n    'Abort',\n    'Timeout',\n    'QuotaExceeded',\n    'Syntax',\n    'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n    VersionChanged: \"Database version changed by other database connection\",\n    DatabaseClosed: \"Database has been closed\",\n    Abort: \"Transaction aborted\",\n    TransactionInactive: \"Transaction has already completed or failed\",\n    MissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n};\nfunction DexieError(name, msg) {\n    this._e = getErrorWithStack();\n    this.name = name;\n    this.message = msg;\n}\nderive(DexieError).from(Error).extend({\n    stack: {\n        get: function () {\n            return this._stack ||\n                (this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n        }\n    },\n    toString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n    return msg + \". Errors: \" + Object.keys(failures)\n        .map(key => failures[key].toString())\n        .filter((v, i, s) => s.indexOf(v) === i)\n        .join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n    this._e = getErrorWithStack();\n    this.failures = failures;\n    this.failedKeys = failedKeys;\n    this.successCount = successCount;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n    this._e = getErrorWithStack();\n    this.name = \"BulkError\";\n    this.failures = Object.keys(failures).map(pos => failures[pos]);\n    this.failuresByPos = failures;\n    this.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce((obj, name) => (obj[name] = name + \"Error\", obj), {});\nconst BaseException = DexieError;\nvar exceptions = errorList.reduce((obj, name) => {\n    var fullName = name + \"Error\";\n    function DexieError(msgOrInner, inner) {\n        this._e = getErrorWithStack();\n        this.name = fullName;\n        if (!msgOrInner) {\n            this.message = defaultTexts[name] || fullName;\n            this.inner = null;\n        }\n        else if (typeof msgOrInner === 'string') {\n            this.message = `${msgOrInner}${!inner ? '' : '\\n ' + inner}`;\n            this.inner = inner || null;\n        }\n        else if (typeof msgOrInner === 'object') {\n            this.message = `${msgOrInner.name} ${msgOrInner.message}`;\n            this.inner = msgOrInner;\n        }\n    }\n    derive(DexieError).from(BaseException);\n    obj[name] = DexieError;\n    return obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce((obj, name) => {\n    obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfunction mapError(domError, message) {\n    if (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n        return domError;\n    var rv = new exceptionMap[domError.name](message || domError.message, domError);\n    if (\"stack\" in domError) {\n        setProp(rv, \"stack\", { get: function () {\n                return this.inner.stack;\n            } });\n    }\n    return rv;\n}\nvar fullNameExceptions = errorList.reduce((obj, name) => {\n    if ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n        obj[name + \"Error\"] = exceptions[name];\n    return obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n    if (f1 == null || f1 === mirror)\n        return f2;\n    return function (val) {\n        return f2(f1(val));\n    };\n}\nfunction callBoth(on1, on2) {\n    return function () {\n        on1.apply(this, arguments);\n        on2.apply(this, arguments);\n    };\n}\nfunction hookCreatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res !== undefined)\n            arguments[0] = res;\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res2 !== undefined ? res2 : res;\n    };\n}\nfunction hookDeletingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        f1.apply(this, arguments);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = this.onerror = null;\n        f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n    };\n}\nfunction hookUpdatingChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function (modifications) {\n        var res = f1.apply(this, arguments);\n        extend(modifications, res);\n        var onsuccess = this.onsuccess,\n        onerror = this.onerror;\n        this.onsuccess = null;\n        this.onerror = null;\n        var res2 = f2.apply(this, arguments);\n        if (onsuccess)\n            this.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n        if (onerror)\n            this.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n        return res === undefined ?\n            (res2 === undefined ? undefined : res2) :\n            (extend(res, res2));\n    };\n}\nfunction reverseStoppableEventChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        if (f2.apply(this, arguments) === false)\n            return false;\n        return f1.apply(this, arguments);\n    };\n}\nfunction promisableChain(f1, f2) {\n    if (f1 === nop)\n        return f2;\n    return function () {\n        var res = f1.apply(this, arguments);\n        if (res && typeof res.then === 'function') {\n            var thiz = this, i = arguments.length, args = new Array(i);\n            while (i--)\n                args[i] = arguments[i];\n            return res.then(function () {\n                return f2.apply(thiz, args);\n            });\n        }\n        return f2.apply(this, arguments);\n    };\n}\n\nvar INTERNAL = {};\nconst LONG_STACKS_CLIP_LIMIT = 100,\nMAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, [resolvedNativePromise, nativePromiseProto, resolvedGlobalPromise] = typeof Promise === 'undefined' ?\n    [] :\n    (() => {\n        let globalP = Promise.resolve();\n        if (typeof crypto === 'undefined' || !crypto.subtle)\n            return [globalP, getProto(globalP), globalP];\n        const nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n        return [\n            nativeP,\n            getProto(nativeP),\n            globalP\n        ];\n    })(), nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nconst NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nconst patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n    () => { resolvedGlobalPromise.then(physicalTick); }\n    :\n        _global.setImmediate ?\n            setImmediate.bind(null, physicalTick) :\n            _global.MutationObserver ?\n                () => {\n                    var hiddenDiv = document.createElement(\"div\");\n                    (new MutationObserver(() => {\n                        physicalTick();\n                        hiddenDiv = null;\n                    })).observe(hiddenDiv, { attributes: true });\n                    hiddenDiv.setAttribute('i', '1');\n                } :\n                () => { setTimeout(physicalTick, 0); };\nvar asap = function (callback, args) {\n    microtickQueue.push([callback, args]);\n    if (needsNewPhysicalTick) {\n        schedulePhysicalTick();\n        needsNewPhysicalTick = false;\n    }\n};\nvar isOutsideMicroTick = true,\nneedsNewPhysicalTick = true,\nunhandledErrors = [],\nrejectingErrors = [],\ncurrentFulfiller = null, rejectionMapper = mirror;\nvar globalPSD = {\n    id: 'global',\n    global: true,\n    ref: 0,\n    unhandleds: [],\n    onunhandled: globalError,\n    pgp: false,\n    env: {},\n    finalize: function () {\n        this.unhandleds.forEach(uh => {\n            try {\n                globalError(uh[0], uh[1]);\n            }\n            catch (e) { }\n        });\n    }\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n    if (typeof this !== 'object')\n        throw new TypeError('Promises must be constructed via new');\n    this._listeners = [];\n    this.onuncatched = nop;\n    this._lib = false;\n    var psd = (this._PSD = PSD);\n    if (debug) {\n        this._stackHolder = getErrorWithStack();\n        this._prev = null;\n        this._numPrev = 0;\n    }\n    if (typeof fn !== 'function') {\n        if (fn !== INTERNAL)\n            throw new TypeError('Not a function');\n        this._state = arguments[1];\n        this._value = arguments[2];\n        if (this._state === false)\n            handleRejection(this, this._value);\n        return;\n    }\n    this._state = null;\n    this._value = null;\n    ++psd.ref;\n    executePromiseTask(this, fn);\n}\nconst thenProp = {\n    get: function () {\n        var psd = PSD, microTaskId = totalEchoes;\n        function then(onFulfilled, onRejected) {\n            var possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n            const cleanup = possibleAwait && !decrementExpectedAwaits();\n            var rv = new DexiePromise((resolve, reject) => {\n                propagateToListener(this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n            });\n            debug && linkToPreviousPromise(rv, this);\n            return rv;\n        }\n        then.prototype = INTERNAL;\n        return then;\n    },\n    set: function (value) {\n        setProp(this, 'then', value && value.prototype === INTERNAL ?\n            thenProp :\n            {\n                get: function () {\n                    return value;\n                },\n                set: thenProp.set\n            });\n    }\n};\nprops(DexiePromise.prototype, {\n    then: thenProp,\n    _then: function (onFulfilled, onRejected) {\n        propagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n    },\n    catch: function (onRejected) {\n        if (arguments.length === 1)\n            return this.then(null, onRejected);\n        var type = arguments[0], handler = arguments[1];\n        return typeof type === 'function' ? this.then(null, err =>\n        err instanceof type ? handler(err) : PromiseReject(err))\n            : this.then(null, err =>\n            err && err.name === type ? handler(err) : PromiseReject(err));\n    },\n    finally: function (onFinally) {\n        return this.then(value => {\n            onFinally();\n            return value;\n        }, err => {\n            onFinally();\n            return PromiseReject(err);\n        });\n    },\n    stack: {\n        get: function () {\n            if (this._stack)\n                return this._stack;\n            try {\n                stack_being_generated = true;\n                var stacks = getStack(this, [], MAX_LONG_STACKS);\n                var stack = stacks.join(\"\\nFrom previous: \");\n                if (this._state !== null)\n                    this._stack = stack;\n                return stack;\n            }\n            finally {\n                stack_being_generated = false;\n            }\n        }\n    },\n    timeout: function (ms, msg) {\n        return ms < Infinity ?\n            new DexiePromise((resolve, reject) => {\n                var handle = setTimeout(() => reject(new exceptions.Timeout(msg)), ms);\n                this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n            }) : this;\n    }\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n    setProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n    this.psd = zone;\n}\nprops(DexiePromise, {\n    all: function () {\n        var values = getArrayOf.apply(null, arguments)\n            .map(onPossibleParallellAsync);\n        return new DexiePromise(function (resolve, reject) {\n            if (values.length === 0)\n                resolve([]);\n            var remaining = values.length;\n            values.forEach((a, i) => DexiePromise.resolve(a).then(x => {\n                values[i] = x;\n                if (!--remaining)\n                    resolve(values);\n            }, reject));\n        });\n    },\n    resolve: value => {\n        if (value instanceof DexiePromise)\n            return value;\n        if (value && typeof value.then === 'function')\n            return new DexiePromise((resolve, reject) => {\n                value.then(resolve, reject);\n            });\n        var rv = new DexiePromise(INTERNAL, true, value);\n        linkToPreviousPromise(rv, currentFulfiller);\n        return rv;\n    },\n    reject: PromiseReject,\n    race: function () {\n        var values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n        return new DexiePromise((resolve, reject) => {\n            values.map(value => DexiePromise.resolve(value).then(resolve, reject));\n        });\n    },\n    PSD: {\n        get: () => PSD,\n        set: value => PSD = value\n    },\n    totalEchoes: { get: () => totalEchoes },\n    newPSD: newScope,\n    usePSD: usePSD,\n    scheduler: {\n        get: () => asap,\n        set: value => { asap = value; }\n    },\n    rejectionMapper: {\n        get: () => rejectionMapper,\n        set: value => { rejectionMapper = value; }\n    },\n    follow: (fn, zoneProps) => {\n        return new DexiePromise((resolve, reject) => {\n            return newScope((resolve, reject) => {\n                var psd = PSD;\n                psd.unhandleds = [];\n                psd.onunhandled = reject;\n                psd.finalize = callBoth(function () {\n                    run_at_end_of_this_or_next_physical_tick(() => {\n                        this.unhandleds.length === 0 ? resolve() : reject(this.unhandleds[0]);\n                    });\n                }, psd.finalize);\n                fn();\n            }, zoneProps, resolve, reject);\n        });\n    }\n});\nif (NativePromise) {\n    if (NativePromise.allSettled)\n        setProp(DexiePromise, \"allSettled\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise(resolve => {\n                if (possiblePromises.length === 0)\n                    resolve([]);\n                let remaining = possiblePromises.length;\n                const results = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => results[i] = { status: \"fulfilled\", value }, reason => results[i] = { status: \"rejected\", reason })\n                    .then(() => --remaining || resolve(results)));\n            });\n        });\n    if (NativePromise.any && typeof AggregateError !== 'undefined')\n        setProp(DexiePromise, \"any\", function () {\n            const possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n            return new DexiePromise((resolve, reject) => {\n                if (possiblePromises.length === 0)\n                    reject(new AggregateError([]));\n                let remaining = possiblePromises.length;\n                const failures = new Array(remaining);\n                possiblePromises.forEach((p, i) => DexiePromise.resolve(p).then(value => resolve(value), failure => {\n                    failures[i] = failure;\n                    if (!--remaining)\n                        reject(new AggregateError(failures));\n                }));\n            });\n        });\n}\nfunction executePromiseTask(promise, fn) {\n    try {\n        fn(value => {\n            if (promise._state !== null)\n                return;\n            if (value === promise)\n                throw new TypeError('A promise cannot be resolved with itself.');\n            var shouldExecuteTick = promise._lib && beginMicroTickScope();\n            if (value && typeof value.then === 'function') {\n                executePromiseTask(promise, (resolve, reject) => {\n                    value instanceof DexiePromise ?\n                        value._then(resolve, reject) :\n                        value.then(resolve, reject);\n                });\n            }\n            else {\n                promise._state = true;\n                promise._value = value;\n                propagateAllListeners(promise);\n            }\n            if (shouldExecuteTick)\n                endMicroTickScope();\n        }, handleRejection.bind(null, promise));\n    }\n    catch (ex) {\n        handleRejection(promise, ex);\n    }\n}\nfunction handleRejection(promise, reason) {\n    rejectingErrors.push(reason);\n    if (promise._state !== null)\n        return;\n    var shouldExecuteTick = promise._lib && beginMicroTickScope();\n    reason = rejectionMapper(reason);\n    promise._state = false;\n    promise._value = reason;\n    debug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(() => {\n        var origProp = getPropertyDescriptor(reason, \"stack\");\n        reason._promise = promise;\n        setProp(reason, \"stack\", {\n            get: () => stack_being_generated ?\n                origProp && (origProp.get ?\n                    origProp.get.apply(reason) :\n                    origProp.value) :\n                promise.stack\n        });\n    });\n    addPossiblyUnhandledError(promise);\n    propagateAllListeners(promise);\n    if (shouldExecuteTick)\n        endMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n    var listeners = promise._listeners;\n    promise._listeners = [];\n    for (var i = 0, len = listeners.length; i < len; ++i) {\n        propagateToListener(promise, listeners[i]);\n    }\n    var psd = promise._PSD;\n    --psd.ref || psd.finalize();\n    if (numScheduledCalls === 0) {\n        ++numScheduledCalls;\n        asap(() => {\n            if (--numScheduledCalls === 0)\n                finalizePhysicalTick();\n        }, []);\n    }\n}\nfunction propagateToListener(promise, listener) {\n    if (promise._state === null) {\n        promise._listeners.push(listener);\n        return;\n    }\n    var cb = promise._state ? listener.onFulfilled : listener.onRejected;\n    if (cb === null) {\n        return (promise._state ? listener.resolve : listener.reject)(promise._value);\n    }\n    ++listener.psd.ref;\n    ++numScheduledCalls;\n    asap(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n    try {\n        currentFulfiller = promise;\n        var ret, value = promise._value;\n        if (promise._state) {\n            ret = cb(value);\n        }\n        else {\n            if (rejectingErrors.length)\n                rejectingErrors = [];\n            ret = cb(value);\n            if (rejectingErrors.indexOf(value) === -1)\n                markErrorAsHandled(promise);\n        }\n        listener.resolve(ret);\n    }\n    catch (e) {\n        listener.reject(e);\n    }\n    finally {\n        currentFulfiller = null;\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n        --listener.psd.ref || listener.psd.finalize();\n    }\n}\nfunction getStack(promise, stacks, limit) {\n    if (stacks.length === limit)\n        return stacks;\n    var stack = \"\";\n    if (promise._state === false) {\n        var failure = promise._value, errorName, message;\n        if (failure != null) {\n            errorName = failure.name || \"Error\";\n            message = failure.message || failure;\n            stack = prettyStack(failure, 0);\n        }\n        else {\n            errorName = failure;\n            message = \"\";\n        }\n        stacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n    }\n    if (debug) {\n        stack = prettyStack(promise._stackHolder, 2);\n        if (stack && stacks.indexOf(stack) === -1)\n            stacks.push(stack);\n        if (promise._prev)\n            getStack(promise._prev, stacks, limit);\n    }\n    return stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n    var numPrev = prev ? prev._numPrev + 1 : 0;\n    if (numPrev < LONG_STACKS_CLIP_LIMIT) {\n        promise._prev = prev;\n        promise._numPrev = numPrev;\n    }\n}\nfunction physicalTick() {\n    beginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n    var wasRootExec = isOutsideMicroTick;\n    isOutsideMicroTick = false;\n    needsNewPhysicalTick = false;\n    return wasRootExec;\n}\nfunction endMicroTickScope() {\n    var callbacks, i, l;\n    do {\n        while (microtickQueue.length > 0) {\n            callbacks = microtickQueue;\n            microtickQueue = [];\n            l = callbacks.length;\n            for (i = 0; i < l; ++i) {\n                var item = callbacks[i];\n                item[0].apply(null, item[1]);\n            }\n        }\n    } while (microtickQueue.length > 0);\n    isOutsideMicroTick = true;\n    needsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n    var unhandledErrs = unhandledErrors;\n    unhandledErrors = [];\n    unhandledErrs.forEach(p => {\n        p._PSD.onunhandled.call(null, p._value, p);\n    });\n    var finalizers = tickFinalizers.slice(0);\n    var i = finalizers.length;\n    while (i)\n        finalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n    function finalizer() {\n        fn();\n        tickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n    }\n    tickFinalizers.push(finalizer);\n    ++numScheduledCalls;\n    asap(() => {\n        if (--numScheduledCalls === 0)\n            finalizePhysicalTick();\n    }, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n    if (!unhandledErrors.some(p => p._value === promise._value))\n        unhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n    var i = unhandledErrors.length;\n    while (i)\n        if (unhandledErrors[--i]._value === promise._value) {\n            unhandledErrors.splice(i, 1);\n            return;\n        }\n}\nfunction PromiseReject(reason) {\n    return new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n    var psd = PSD;\n    return function () {\n        var wasRootExec = beginMicroTickScope(), outerScope = PSD;\n        try {\n            switchToZone(psd, true);\n            return fn.apply(this, arguments);\n        }\n        catch (e) {\n            errorCatcher && errorCatcher(e);\n        }\n        finally {\n            switchToZone(outerScope, false);\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    };\n}\nconst task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props, a1, a2) {\n    var parent = PSD, psd = Object.create(parent);\n    psd.parent = parent;\n    psd.ref = 0;\n    psd.global = false;\n    psd.id = ++zone_id_counter;\n    var globalEnv = globalPSD.env;\n    psd.env = patchGlobalPromise ? {\n        Promise: DexiePromise,\n        PromiseProp: { value: DexiePromise, configurable: true, writable: true },\n        all: DexiePromise.all,\n        race: DexiePromise.race,\n        allSettled: DexiePromise.allSettled,\n        any: DexiePromise.any,\n        resolve: DexiePromise.resolve,\n        reject: DexiePromise.reject,\n        nthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n        gthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n    } : {};\n    if (props)\n        extend(psd, props);\n    ++parent.ref;\n    psd.finalize = function () {\n        --this.parent.ref || this.parent.finalize();\n    };\n    var rv = usePSD(psd, fn, a1, a2);\n    if (psd.ref === 0)\n        psd.finalize();\n    return rv;\n}\nfunction incrementExpectedAwaits() {\n    if (!task.id)\n        task.id = ++taskCounter;\n    ++task.awaits;\n    task.echoes += ZONE_ECHO_LIMIT;\n    return task.id;\n}\nfunction decrementExpectedAwaits() {\n    if (!task.awaits)\n        return false;\n    if (--task.awaits === 0)\n        task.id = 0;\n    task.echoes = task.awaits * ZONE_ECHO_LIMIT;\n    return true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n    incrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n    if (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n        incrementExpectedAwaits();\n        return possiblePromise.then(x => {\n            decrementExpectedAwaits();\n            return x;\n        }, e => {\n            decrementExpectedAwaits();\n            return rejection(e);\n        });\n    }\n    return possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n    ++totalEchoes;\n    if (!task.echoes || --task.echoes === 0) {\n        task.echoes = task.id = 0;\n    }\n    zoneStack.push(PSD);\n    switchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n    var zone = zoneStack[zoneStack.length - 1];\n    zoneStack.pop();\n    switchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n    var currentZone = PSD;\n    if (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n        enqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n    }\n    if (targetZone === PSD)\n        return;\n    PSD = targetZone;\n    if (currentZone === globalPSD)\n        globalPSD.env = snapShot();\n    if (patchGlobalPromise) {\n        var GlobalPromise = globalPSD.env.Promise;\n        var targetEnv = targetZone.env;\n        nativePromiseProto.then = targetEnv.nthen;\n        GlobalPromise.prototype.then = targetEnv.gthen;\n        if (currentZone.global || targetZone.global) {\n            Object.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n            GlobalPromise.all = targetEnv.all;\n            GlobalPromise.race = targetEnv.race;\n            GlobalPromise.resolve = targetEnv.resolve;\n            GlobalPromise.reject = targetEnv.reject;\n            if (targetEnv.allSettled)\n                GlobalPromise.allSettled = targetEnv.allSettled;\n            if (targetEnv.any)\n                GlobalPromise.any = targetEnv.any;\n        }\n    }\n}\nfunction snapShot() {\n    var GlobalPromise = _global.Promise;\n    return patchGlobalPromise ? {\n        Promise: GlobalPromise,\n        PromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n        all: GlobalPromise.all,\n        race: GlobalPromise.race,\n        allSettled: GlobalPromise.allSettled,\n        any: GlobalPromise.any,\n        resolve: GlobalPromise.resolve,\n        reject: GlobalPromise.reject,\n        nthen: nativePromiseProto.then,\n        gthen: GlobalPromise.prototype.then\n    } : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n    var outerScope = PSD;\n    try {\n        switchToZone(psd, true);\n        return fn(a1, a2, a3);\n    }\n    finally {\n        switchToZone(outerScope, false);\n    }\n}\nfunction enqueueNativeMicroTask(job) {\n    nativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n    return typeof fn !== 'function' ? fn : function () {\n        var outerZone = PSD;\n        if (possibleAwait)\n            incrementExpectedAwaits();\n        switchToZone(zone, true);\n        try {\n            return fn.apply(this, arguments);\n        }\n        finally {\n            switchToZone(outerZone, false);\n            if (cleanup)\n                enqueueNativeMicroTask(decrementExpectedAwaits);\n        }\n    };\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n    return function (onResolved, onRejected) {\n        return origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n    };\n}\nconst UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n    var rv;\n    try {\n        rv = promise.onuncatched(err);\n    }\n    catch (e) { }\n    if (rv !== false)\n        try {\n            var event, eventData = { promise: promise, reason: err };\n            if (_global.document && document.createEvent) {\n                event = document.createEvent('Event');\n                event.initEvent(UNHANDLEDREJECTION, true, true);\n                extend(event, eventData);\n            }\n            else if (_global.CustomEvent) {\n                event = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n                extend(event, eventData);\n            }\n            if (event && _global.dispatchEvent) {\n                dispatchEvent(event);\n                if (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n                    try {\n                        _global.onunhandledrejection(event);\n                    }\n                    catch (_) { }\n            }\n            if (debug && event && !event.defaultPrevented) {\n                console.warn(`Unhandled rejection: ${err.stack || err}`);\n            }\n        }\n        catch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n    if (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n        if (db._state.openComplete) {\n            return rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n        }\n        if (!db._state.isBeingOpened) {\n            if (!db._options.autoOpen)\n                return rejection(new exceptions.DatabaseClosed());\n            db.open().catch(nop);\n        }\n        return db._state.dbReadyPromise.then(() => tempTransaction(db, mode, storeNames, fn));\n    }\n    else {\n        var trans = db._createTransaction(mode, storeNames, db._dbSchema);\n        try {\n            trans.create();\n        }\n        catch (ex) {\n            return rejection(ex);\n        }\n        return trans._promise(mode, (resolve, reject) => {\n            return newScope(() => {\n                PSD.trans = trans;\n                return fn(resolve, reject, trans);\n            });\n        }).then(result => {\n            return trans._completion.then(() => result);\n        });\n    }\n}\n\nconst DEXIE_VERSION = '3.2.0';\nconst maxString = String.fromCharCode(65535);\nconst minKey = -Infinity;\nconst INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nconst STRING_EXPECTED = \"String expected.\";\nconst connections = [];\nconst isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nconst hasIEDeleteObjectStoreBug = isIEOrEdge;\nconst hangsOnDeleteLargeKeyRange = isIEOrEdge;\nconst dexieStackFrameFilter = frame => !/(dexie\\.js|dexie\\.min\\.js)/.test(frame);\nconst DBNAMES_DB = '__dbnames';\nconst READONLY = 'readonly';\nconst READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n    return filter1 ?\n        filter2 ?\n            function () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n            filter1 :\n        filter2;\n}\n\nconst AnyRange = {\n    type: 3 ,\n    lower: -Infinity,\n    lowerOpen: false,\n    upper: [[]],\n    upperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n    return typeof keyPath === \"string\" && !/\\./.test(keyPath)\n        ? (obj) => {\n            if (obj[keyPath] === undefined && (keyPath in obj)) {\n                obj = deepClone(obj);\n                delete obj[keyPath];\n            }\n            return obj;\n        }\n        : (obj) => obj;\n}\n\nclass Table {\n    _trans(mode, fn, writeLocked) {\n        const trans = this._tx || PSD.trans;\n        const tableName = this.name;\n        function checkTableInTransaction(resolve, reject, trans) {\n            if (!trans.schema[tableName])\n                throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n            return fn(trans.idbtrans, trans);\n        }\n        const wasRootExec = beginMicroTickScope();\n        try {\n            return trans && trans.db === this.db ?\n                trans === PSD.trans ?\n                    trans._promise(mode, checkTableInTransaction, writeLocked) :\n                    newScope(() => trans._promise(mode, checkTableInTransaction, writeLocked), { trans: trans, transless: PSD.transless || PSD }) :\n                tempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n        }\n        finally {\n            if (wasRootExec)\n                endMicroTickScope();\n        }\n    }\n    get(keyOrCrit, cb) {\n        if (keyOrCrit && keyOrCrit.constructor === Object)\n            return this.where(keyOrCrit).first(cb);\n        return this._trans('readonly', (trans) => {\n            return this.core.get({ trans, key: keyOrCrit })\n                .then(res => this.hook.reading.fire(res));\n        }).then(cb);\n    }\n    where(indexOrCrit) {\n        if (typeof indexOrCrit === 'string')\n            return new this.db.WhereClause(this, indexOrCrit);\n        if (isArray(indexOrCrit))\n            return new this.db.WhereClause(this, `[${indexOrCrit.join('+')}]`);\n        const keyPaths = keys(indexOrCrit);\n        if (keyPaths.length === 1)\n            return this\n                .where(keyPaths[0])\n                .equals(indexOrCrit[keyPaths[0]]);\n        const compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(ix => ix.compound &&\n            keyPaths.every(keyPath => ix.keyPath.indexOf(keyPath) >= 0) &&\n            ix.keyPath.every(keyPath => keyPaths.indexOf(keyPath) >= 0))[0];\n        if (compoundIndex && this.db._maxKey !== maxString)\n            return this\n                .where(compoundIndex.name)\n                .equals(compoundIndex.keyPath.map(kp => indexOrCrit[kp]));\n        if (!compoundIndex && debug)\n            console.warn(`The query ${JSON.stringify(indexOrCrit)} on ${this.name} would benefit of a ` +\n                `compound index [${keyPaths.join('+')}]`);\n        const { idxByName } = this.schema;\n        const idb = this.db._deps.indexedDB;\n        function equals(a, b) {\n            try {\n                return idb.cmp(a, b) === 0;\n            }\n            catch (e) {\n                return false;\n            }\n        }\n        const [idx, filterFunction] = keyPaths.reduce(([prevIndex, prevFilterFn], keyPath) => {\n            const index = idxByName[keyPath];\n            const value = indexOrCrit[keyPath];\n            return [\n                prevIndex || index,\n                prevIndex || !index ?\n                    combine(prevFilterFn, index && index.multi ?\n                        x => {\n                            const prop = getByKeyPath(x, keyPath);\n                            return isArray(prop) && prop.some(item => equals(value, item));\n                        } : x => equals(value, getByKeyPath(x, keyPath)))\n                    : prevFilterFn\n            ];\n        }, [null, null]);\n        return idx ?\n            this.where(idx.name).equals(indexOrCrit[idx.keyPath])\n                .filter(filterFunction) :\n            compoundIndex ?\n                this.filter(filterFunction) :\n                this.where(keyPaths).equals('');\n    }\n    filter(filterFunction) {\n        return this.toCollection().and(filterFunction);\n    }\n    count(thenShortcut) {\n        return this.toCollection().count(thenShortcut);\n    }\n    offset(offset) {\n        return this.toCollection().offset(offset);\n    }\n    limit(numRows) {\n        return this.toCollection().limit(numRows);\n    }\n    each(callback) {\n        return this.toCollection().each(callback);\n    }\n    toArray(thenShortcut) {\n        return this.toCollection().toArray(thenShortcut);\n    }\n    toCollection() {\n        return new this.db.Collection(new this.db.WhereClause(this));\n    }\n    orderBy(index) {\n        return new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n            `[${index.join('+')}]` :\n            index));\n    }\n    reverse() {\n        return this.toCollection().reverse();\n    }\n    mapToClass(constructor) {\n        this.schema.mappedClass = constructor;\n        const readHook = obj => {\n            if (!obj)\n                return obj;\n            const res = Object.create(constructor.prototype);\n            for (var m in obj)\n                if (hasOwn(obj, m))\n                    try {\n                        res[m] = obj[m];\n                    }\n                    catch (_) { }\n            return res;\n        };\n        if (this.schema.readHook) {\n            this.hook.reading.unsubscribe(this.schema.readHook);\n        }\n        this.schema.readHook = readHook;\n        this.hook(\"reading\", readHook);\n        return constructor;\n    }\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return this.mapToClass(Class);\n    }\n    add(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n        }).then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    update(keyOrObject, modifications) {\n        if (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n            const key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n            if (key === undefined)\n                return rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n            try {\n                if (typeof modifications !== \"function\") {\n                    keys(modifications).forEach(keyPath => {\n                        setByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n                    });\n                }\n                else {\n                    modifications(keyOrObject, { value: keyOrObject, primKey: key });\n                }\n            }\n            catch (_a) {\n            }\n            return this.where(\":id\").equals(key).modify(modifications);\n        }\n        else {\n            return this.where(\":id\").equals(keyOrObject).modify(modifications);\n        }\n    }\n    put(obj, key) {\n        const { auto, keyPath } = this.schema.primKey;\n        let objToAdd = obj;\n        if (keyPath && auto) {\n            objToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n        }\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult)\n            .then(lastResult => {\n            if (keyPath) {\n                try {\n                    setByKeyPath(obj, keyPath, lastResult);\n                }\n                catch (_) { }\n            }\n            return lastResult;\n        });\n    }\n    delete(key) {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'delete', keys: [key] }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    clear() {\n        return this._trans('readwrite', trans => this.core.mutate({ trans, type: 'deleteRange', range: AnyRange }))\n            .then(res => res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined);\n    }\n    bulkGet(keys) {\n        return this._trans('readonly', trans => {\n            return this.core.getMany({\n                keys,\n                trans\n            }).then(result => result.map(res => this.hook.reading.fire(res)));\n        });\n    }\n    bulkAdd(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToAdd = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'add', keys: keys, values: objectsToAdd, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkAdd(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkPut(objects, keysOrOptions, options) {\n        const keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n        options = options || (keys ? undefined : keysOrOptions);\n        const wantResults = options ? options.allKeys : undefined;\n        return this._trans('readwrite', trans => {\n            const { auto, keyPath } = this.schema.primKey;\n            if (keyPath && keys)\n                throw new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n            if (keys && keys.length !== objects.length)\n                throw new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n            const numObjects = objects.length;\n            let objectsToPut = keyPath && auto ?\n                objects.map(workaroundForUndefinedPrimKey(keyPath)) :\n                objects;\n            return this.core.mutate({ trans, type: 'put', keys: keys, values: objectsToPut, wantResults })\n                .then(({ numFailures, results, lastResult, failures }) => {\n                const result = wantResults ? results : lastResult;\n                if (numFailures === 0)\n                    return result;\n                throw new BulkError(`${this.name}.bulkPut(): ${numFailures} of ${numObjects} operations failed`, failures);\n            });\n        });\n    }\n    bulkDelete(keys) {\n        const numKeys = keys.length;\n        return this._trans('readwrite', trans => {\n            return this.core.mutate({ trans, type: 'delete', keys: keys });\n        }).then(({ numFailures, lastResult, failures }) => {\n            if (numFailures === 0)\n                return lastResult;\n            throw new BulkError(`${this.name}.bulkDelete(): ${numFailures} of ${numKeys} operations failed`, failures);\n        });\n    }\n}\n\nfunction Events(ctx) {\n    var evs = {};\n    var rv = function (eventName, subscriber) {\n        if (subscriber) {\n            var i = arguments.length, args = new Array(i - 1);\n            while (--i)\n                args[i - 1] = arguments[i];\n            evs[eventName].subscribe.apply(null, args);\n            return ctx;\n        }\n        else if (typeof (eventName) === 'string') {\n            return evs[eventName];\n        }\n    };\n    rv.addEventType = add;\n    for (var i = 1, l = arguments.length; i < l; ++i) {\n        add(arguments[i]);\n    }\n    return rv;\n    function add(eventName, chainFunction, defaultFunction) {\n        if (typeof eventName === 'object')\n            return addConfiguredEvents(eventName);\n        if (!chainFunction)\n            chainFunction = reverseStoppableEventChain;\n        if (!defaultFunction)\n            defaultFunction = nop;\n        var context = {\n            subscribers: [],\n            fire: defaultFunction,\n            subscribe: function (cb) {\n                if (context.subscribers.indexOf(cb) === -1) {\n                    context.subscribers.push(cb);\n                    context.fire = chainFunction(context.fire, cb);\n                }\n            },\n            unsubscribe: function (cb) {\n                context.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n                context.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n            }\n        };\n        evs[eventName] = rv[eventName] = context;\n        return context;\n    }\n    function addConfiguredEvents(cfg) {\n        keys(cfg).forEach(function (eventName) {\n            var args = cfg[eventName];\n            if (isArray(args)) {\n                add(eventName, cfg[eventName][0], cfg[eventName][1]);\n            }\n            else if (args === 'asap') {\n                var context = add(eventName, mirror, function fire() {\n                    var i = arguments.length, args = new Array(i);\n                    while (i--)\n                        args[i] = arguments[i];\n                    context.subscribers.forEach(function (fn) {\n                        asap$1(function fireEvent() {\n                            fn.apply(null, args);\n                        });\n                    });\n                });\n            }\n            else\n                throw new exceptions.InvalidArgument(\"Invalid event config\");\n        });\n    }\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n    derive(constructor).from({ prototype });\n    return constructor;\n}\n\nfunction createTableConstructor(db) {\n    return makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n        this.db = db;\n        this._tx = trans;\n        this.name = name;\n        this.schema = tableSchema;\n        this.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n            \"creating\": [hookCreatingChain, nop],\n            \"reading\": [pureFunctionChain, mirror],\n            \"updating\": [hookUpdatingChain, nop],\n            \"deleting\": [hookDeletingChain, nop]\n        });\n    });\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n    return !(ctx.filter || ctx.algorithm || ctx.or) &&\n        (ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n    ctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n    var curr = ctx.replayFilter;\n    ctx.replayFilter = curr ? () => combine(curr(), factory()) : factory;\n    ctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n    ctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n    if (ctx.isPrimKey)\n        return coreSchema.primaryKey;\n    const index = coreSchema.getIndexByKeyPath(ctx.index);\n    if (!index)\n        throw new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n    return index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n    const index = getIndexOrStore(ctx, coreTable.schema);\n    return coreTable.openCursor({\n        trans,\n        values: !ctx.keysOnly,\n        reverse: ctx.dir === 'prev',\n        unique: !!ctx.unique,\n        query: {\n            index,\n            range: ctx.range\n        }\n    });\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n    const filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n    if (!ctx.or) {\n        return iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n    }\n    else {\n        const set = {};\n        const union = (item, cursor, advance) => {\n            if (!filter || filter(cursor, advance, result => cursor.stop(result), err => cursor.fail(err))) {\n                var primaryKey = cursor.primaryKey;\n                var key = '' + primaryKey;\n                if (key === '[object ArrayBuffer]')\n                    key = '' + new Uint8Array(primaryKey);\n                if (!hasOwn(set, key)) {\n                    set[key] = true;\n                    fn(item, cursor, advance);\n                }\n            }\n        };\n        return Promise.all([\n            ctx.or._iterate(union, coreTrans),\n            iterate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n        ]);\n    }\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n    var mappedFn = valueMapper ? (x, c, a) => fn(valueMapper(x), c, a) : fn;\n    var wrappedFn = wrap(mappedFn);\n    return cursorPromise.then(cursor => {\n        if (cursor) {\n            return cursor.start(() => {\n                var c = () => cursor.continue();\n                if (!filter || filter(cursor, advancer => c = advancer, val => { cursor.stop(val); c = nop; }, e => { cursor.fail(e); c = nop; }))\n                    wrappedFn(cursor.value, cursor, advancer => c = advancer);\n                c();\n            });\n        }\n    });\n}\n\nfunction cmp(a, b) {\n    try {\n        const ta = type(a);\n        const tb = type(b);\n        if (ta !== tb) {\n            if (ta === 'Array')\n                return 1;\n            if (tb === 'Array')\n                return -1;\n            if (ta === 'binary')\n                return 1;\n            if (tb === 'binary')\n                return -1;\n            if (ta === 'string')\n                return 1;\n            if (tb === 'string')\n                return -1;\n            if (ta === 'Date')\n                return 1;\n            if (tb !== 'Date')\n                return NaN;\n            return -1;\n        }\n        switch (ta) {\n            case 'number':\n            case 'Date':\n            case 'string':\n                return a > b ? 1 : a < b ? -1 : 0;\n            case 'binary': {\n                return compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n            }\n            case 'Array':\n                return compareArrays(a, b);\n        }\n    }\n    catch (_a) { }\n    return NaN;\n}\nfunction compareArrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        const res = cmp(a[i], b[i]);\n        if (res !== 0)\n            return res;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction compareUint8Arrays(a, b) {\n    const al = a.length;\n    const bl = b.length;\n    const l = al < bl ? al : bl;\n    for (let i = 0; i < l; ++i) {\n        if (a[i] !== b[i])\n            return a[i] < b[i] ? -1 : 1;\n    }\n    return al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction type(x) {\n    const t = typeof x;\n    if (t !== 'object')\n        return t;\n    if (ArrayBuffer.isView(x))\n        return 'binary';\n    const tsTag = toStringTag(x);\n    return tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n}\nfunction getUint8Array(a) {\n    if (a instanceof Uint8Array)\n        return a;\n    if (ArrayBuffer.isView(a))\n        return new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n    return new Uint8Array(a);\n}\n\nclass Collection {\n    _read(fn, cb) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readonly', fn).then(cb);\n    }\n    _write(fn) {\n        var ctx = this._ctx;\n        return ctx.error ?\n            ctx.table._trans(null, rejection.bind(null, ctx.error)) :\n            ctx.table._trans('readwrite', fn, \"locked\");\n    }\n    _addAlgorithm(fn) {\n        var ctx = this._ctx;\n        ctx.algorithm = combine(ctx.algorithm, fn);\n    }\n    _iterate(fn, coreTrans) {\n        return iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n    }\n    clone(props) {\n        var rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n        if (props)\n            extend(ctx, props);\n        rv._ctx = ctx;\n        return rv;\n    }\n    raw() {\n        this._ctx.valueMapper = null;\n        return this;\n    }\n    each(fn) {\n        var ctx = this._ctx;\n        return this._read(trans => iter(ctx, fn, trans, ctx.table.core));\n    }\n    count(cb) {\n        return this._read(trans => {\n            const ctx = this._ctx;\n            const coreTable = ctx.table.core;\n            if (isPlainKeyRange(ctx, true)) {\n                return coreTable.count({\n                    trans,\n                    query: {\n                        index: getIndexOrStore(ctx, coreTable.schema),\n                        range: ctx.range\n                    }\n                }).then(count => Math.min(count, ctx.limit));\n            }\n            else {\n                var count = 0;\n                return iter(ctx, () => { ++count; return false; }, trans, coreTable)\n                    .then(() => count);\n            }\n        }).then(cb);\n    }\n    sortBy(keyPath, cb) {\n        const parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n        function getval(obj, i) {\n            if (i)\n                return getval(obj[parts[i]], i - 1);\n            return obj[lastPart];\n        }\n        var order = this._ctx.dir === \"next\" ? 1 : -1;\n        function sorter(a, b) {\n            var aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n            return aVal < bVal ? -order : aVal > bVal ? order : 0;\n        }\n        return this.toArray(function (a) {\n            return a.sort(sorter);\n        }).then(cb);\n    }\n    toArray(cb) {\n        return this._read(trans => {\n            var ctx = this._ctx;\n            if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n                const { valueMapper } = ctx;\n                const index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    limit: ctx.limit,\n                    values: true,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                }).then(({ result }) => valueMapper ? result.map(valueMapper) : result);\n            }\n            else {\n                const a = [];\n                return iter(ctx, item => a.push(item), trans, ctx.table.core).then(() => a);\n            }\n        }, cb);\n    }\n    offset(offset) {\n        var ctx = this._ctx;\n        if (offset <= 0)\n            return this;\n        ctx.offset += offset;\n        if (isPlainKeyRange(ctx)) {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return (cursor, advance) => {\n                    if (offsetLeft === 0)\n                        return true;\n                    if (offsetLeft === 1) {\n                        --offsetLeft;\n                        return false;\n                    }\n                    advance(() => {\n                        cursor.advance(offsetLeft);\n                        offsetLeft = 0;\n                    });\n                    return false;\n                };\n            });\n        }\n        else {\n            addReplayFilter(ctx, () => {\n                var offsetLeft = offset;\n                return () => (--offsetLeft < 0);\n            });\n        }\n        return this;\n    }\n    limit(numRows) {\n        this._ctx.limit = Math.min(this._ctx.limit, numRows);\n        addReplayFilter(this._ctx, () => {\n            var rowsLeft = numRows;\n            return function (cursor, advance, resolve) {\n                if (--rowsLeft <= 0)\n                    advance(resolve);\n                return rowsLeft >= 0;\n            };\n        }, true);\n        return this;\n    }\n    until(filterFunction, bIncludeStopEntry) {\n        addFilter(this._ctx, function (cursor, advance, resolve) {\n            if (filterFunction(cursor.value)) {\n                advance(resolve);\n                return bIncludeStopEntry;\n            }\n            else {\n                return true;\n            }\n        });\n        return this;\n    }\n    first(cb) {\n        return this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n    }\n    last(cb) {\n        return this.reverse().first(cb);\n    }\n    filter(filterFunction) {\n        addFilter(this._ctx, function (cursor) {\n            return filterFunction(cursor.value);\n        });\n        addMatchFilter(this._ctx, filterFunction);\n        return this;\n    }\n    and(filter) {\n        return this.filter(filter);\n    }\n    or(indexName) {\n        return new this.db.WhereClause(this._ctx.table, indexName, this);\n    }\n    reverse() {\n        this._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n        if (this._ondirectionchange)\n            this._ondirectionchange(this._ctx.dir);\n        return this;\n    }\n    desc() {\n        return this.reverse();\n    }\n    eachKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.key, cursor); });\n    }\n    eachUniqueKey(cb) {\n        this._ctx.unique = \"unique\";\n        return this.eachKey(cb);\n    }\n    eachPrimaryKey(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        return this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n    }\n    keys(cb) {\n        var ctx = this._ctx;\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.key);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    primaryKeys(cb) {\n        var ctx = this._ctx;\n        if (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n            return this._read(trans => {\n                var index = getIndexOrStore(ctx, ctx.table.core.schema);\n                return ctx.table.core.query({\n                    trans,\n                    values: false,\n                    limit: ctx.limit,\n                    query: {\n                        index,\n                        range: ctx.range\n                    }\n                });\n            }).then(({ result }) => result).then(cb);\n        }\n        ctx.keysOnly = !ctx.isMatch;\n        var a = [];\n        return this.each(function (item, cursor) {\n            a.push(cursor.primaryKey);\n        }).then(function () {\n            return a;\n        }).then(cb);\n    }\n    uniqueKeys(cb) {\n        this._ctx.unique = \"unique\";\n        return this.keys(cb);\n    }\n    firstKey(cb) {\n        return this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n    }\n    lastKey(cb) {\n        return this.reverse().firstKey(cb);\n    }\n    distinct() {\n        var ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n        if (!idx || !idx.multi)\n            return this;\n        var set = {};\n        addFilter(this._ctx, function (cursor) {\n            var strKey = cursor.primaryKey.toString();\n            var found = hasOwn(set, strKey);\n            set[strKey] = true;\n            return !found;\n        });\n        return this;\n    }\n    modify(changes) {\n        var ctx = this._ctx;\n        return this._write(trans => {\n            var modifyer;\n            if (typeof changes === 'function') {\n                modifyer = changes;\n            }\n            else {\n                var keyPaths = keys(changes);\n                var numKeys = keyPaths.length;\n                modifyer = function (item) {\n                    var anythingModified = false;\n                    for (var i = 0; i < numKeys; ++i) {\n                        var keyPath = keyPaths[i], val = changes[keyPath];\n                        if (getByKeyPath(item, keyPath) !== val) {\n                            setByKeyPath(item, keyPath, val);\n                            anythingModified = true;\n                        }\n                    }\n                    return anythingModified;\n                };\n            }\n            const coreTable = ctx.table.core;\n            const { outbound, extractKey } = coreTable.schema.primaryKey;\n            const limit = this.db._options.modifyChunkSize || 200;\n            const totalFailures = [];\n            let successCount = 0;\n            const failedKeys = [];\n            const applyMutateResult = (expectedCount, res) => {\n                const { failures, numFailures } = res;\n                successCount += expectedCount - numFailures;\n                for (let pos of keys(failures)) {\n                    totalFailures.push(failures[pos]);\n                }\n            };\n            return this.clone().primaryKeys().then(keys => {\n                const nextChunk = (offset) => {\n                    const count = Math.min(limit, keys.length - offset);\n                    return coreTable.getMany({\n                        trans,\n                        keys: keys.slice(offset, offset + count),\n                        cache: \"immutable\"\n                    }).then(values => {\n                        const addValues = [];\n                        const putValues = [];\n                        const putKeys = outbound ? [] : null;\n                        const deleteKeys = [];\n                        for (let i = 0; i < count; ++i) {\n                            const origValue = values[i];\n                            const ctx = {\n                                value: deepClone(origValue),\n                                primKey: keys[offset + i]\n                            };\n                            if (modifyer.call(ctx, ctx.value, ctx) !== false) {\n                                if (ctx.value == null) {\n                                    deleteKeys.push(keys[offset + i]);\n                                }\n                                else if (!outbound && cmp(extractKey(origValue), extractKey(ctx.value)) !== 0) {\n                                    deleteKeys.push(keys[offset + i]);\n                                    addValues.push(ctx.value);\n                                }\n                                else {\n                                    putValues.push(ctx.value);\n                                    if (outbound)\n                                        putKeys.push(keys[offset + i]);\n                                }\n                            }\n                        }\n                        const criteria = isPlainKeyRange(ctx) &&\n                            ctx.limit === Infinity &&\n                            (typeof changes !== 'function' || changes === deleteCallback) && {\n                            index: ctx.index,\n                            range: ctx.range\n                        };\n                        return Promise.resolve(addValues.length > 0 &&\n                            coreTable.mutate({ trans, type: 'add', values: addValues })\n                                .then(res => {\n                                for (let pos in res.failures) {\n                                    deleteKeys.splice(parseInt(pos), 1);\n                                }\n                                applyMutateResult(addValues.length, res);\n                            })).then(() => (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'put',\n                                keys: putKeys,\n                                values: putValues,\n                                criteria,\n                                changeSpec: typeof changes !== 'function'\n                                    && changes\n                            }).then(res => applyMutateResult(putValues.length, res))).then(() => (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n                            coreTable.mutate({\n                                trans,\n                                type: 'delete',\n                                keys: deleteKeys,\n                                criteria\n                            }).then(res => applyMutateResult(deleteKeys.length, res))).then(() => {\n                            return keys.length > offset + count && nextChunk(offset + limit);\n                        });\n                    });\n                };\n                return nextChunk(0).then(() => {\n                    if (totalFailures.length > 0)\n                        throw new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n                    return keys.length;\n                });\n            });\n        });\n    }\n    delete() {\n        var ctx = this._ctx, range = ctx.range;\n        if (isPlainKeyRange(ctx) &&\n            ((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n         {\n            return this._write(trans => {\n                const { primaryKey } = ctx.table.core.schema;\n                const coreRange = range;\n                return ctx.table.core.count({ trans, query: { index: primaryKey, range: coreRange } }).then(count => {\n                    return ctx.table.core.mutate({ trans, type: 'deleteRange', range: coreRange })\n                        .then(({ failures, lastResult, results, numFailures }) => {\n                        if (numFailures)\n                            throw new ModifyError(\"Could not delete some values\", Object.keys(failures).map(pos => failures[pos]), count - numFailures);\n                        return count - numFailures;\n                    });\n                });\n            });\n        }\n        return this.modify(deleteCallback);\n    }\n}\nconst deleteCallback = (value, ctx) => ctx.value = null;\n\nfunction createCollectionConstructor(db) {\n    return makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n        this.db = db;\n        let keyRange = AnyRange, error = null;\n        if (keyRangeGenerator)\n            try {\n                keyRange = keyRangeGenerator();\n            }\n            catch (ex) {\n                error = ex;\n            }\n        const whereCtx = whereClause._ctx;\n        const table = whereCtx.table;\n        const readingHook = table.hook.reading.fire;\n        this._ctx = {\n            table: table,\n            index: whereCtx.index,\n            isPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n            range: keyRange,\n            keysOnly: false,\n            dir: \"next\",\n            unique: \"\",\n            algorithm: null,\n            filter: null,\n            replayFilter: null,\n            justLimit: true,\n            isMatch: null,\n            offset: 0,\n            limit: Infinity,\n            error: error,\n            or: whereCtx.or,\n            valueMapper: readingHook !== mirror ? readingHook : null\n        };\n    });\n}\n\nfunction simpleCompare(a, b) {\n    return a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n    return a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n    var collection = collectionOrWhereClause instanceof WhereClause ?\n        new collectionOrWhereClause.Collection(collectionOrWhereClause) :\n        collectionOrWhereClause;\n    collection._ctx.error = T ? new T(err) : new TypeError(err);\n    return collection;\n}\nfunction emptyCollection(whereClause) {\n    return new whereClause.Collection(whereClause, () => rangeEqual(\"\")).limit(0);\n}\nfunction upperFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toUpperCase() :\n        (s) => s.toLowerCase();\n}\nfunction lowerFactory(dir) {\n    return dir === \"next\" ?\n        (s) => s.toLowerCase() :\n        (s) => s.toUpperCase();\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n    var length = Math.min(key.length, lowerNeedle.length);\n    var llp = -1;\n    for (var i = 0; i < length; ++i) {\n        var lwrKeyChar = lowerKey[i];\n        if (lwrKeyChar !== lowerNeedle[i]) {\n            if (cmp(key[i], upperNeedle[i]) < 0)\n                return key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n            if (cmp(key[i], lowerNeedle[i]) < 0)\n                return key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n            if (llp >= 0)\n                return key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n            return null;\n        }\n        if (cmp(key[i], lwrKeyChar) < 0)\n            llp = i;\n    }\n    if (length < lowerNeedle.length && dir === \"next\")\n        return key + upperNeedle.substr(key.length);\n    if (length < key.length && dir === \"prev\")\n        return key.substr(0, upperNeedle.length);\n    return (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n    var upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n    if (!needles.every(s => typeof s === 'string')) {\n        return fail(whereClause, STRING_EXPECTED);\n    }\n    function initDirection(dir) {\n        upper = upperFactory(dir);\n        lower = lowerFactory(dir);\n        compare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n        var needleBounds = needles.map(function (needle) {\n            return { lower: lower(needle), upper: upper(needle) };\n        }).sort(function (a, b) {\n            return compare(a.lower, b.lower);\n        });\n        upperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n        lowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n        direction = dir;\n        nextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n    }\n    initDirection(\"next\");\n    var c = new whereClause.Collection(whereClause, () => createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix));\n    c._ondirectionchange = function (direction) {\n        initDirection(direction);\n    };\n    var firstPossibleNeedle = 0;\n    c._addAlgorithm(function (cursor, advance, resolve) {\n        var key = cursor.key;\n        if (typeof key !== 'string')\n            return false;\n        var lowerKey = lower(key);\n        if (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n            return true;\n        }\n        else {\n            var lowestPossibleCasing = null;\n            for (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n                var casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n                if (casing === null && lowestPossibleCasing === null)\n                    firstPossibleNeedle = i + 1;\n                else if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n                    lowestPossibleCasing = casing;\n                }\n            }\n            if (lowestPossibleCasing !== null) {\n                advance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n            }\n            else {\n                advance(resolve);\n            }\n            return false;\n        }\n    });\n    return c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n    return {\n        type: 2 ,\n        lower,\n        upper,\n        lowerOpen,\n        upperOpen\n    };\n}\nfunction rangeEqual(value) {\n    return {\n        type: 1 ,\n        lower: value,\n        upper: value\n    };\n}\n\nclass WhereClause {\n    get Collection() {\n        return this._ctx.table.db.Collection;\n    }\n    between(lower, upper, includeLower, includeUpper) {\n        includeLower = includeLower !== false;\n        includeUpper = includeUpper === true;\n        try {\n            if ((this._cmp(lower, upper) > 0) ||\n                (this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n                return emptyCollection(this);\n            return new this.Collection(this, () => createRange(lower, upper, !includeLower, !includeUpper));\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n    }\n    equals(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => rangeEqual(value));\n    }\n    above(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, true));\n    }\n    aboveOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(value, undefined, false));\n    }\n    below(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value, false, true));\n    }\n    belowOrEqual(value) {\n        if (value == null)\n            return fail(this, INVALID_KEY_ARGUMENT);\n        return new this.Collection(this, () => createRange(undefined, value));\n    }\n    startsWith(str) {\n        if (typeof str !== 'string')\n            return fail(this, STRING_EXPECTED);\n        return this.between(str, str + maxString, true, true);\n    }\n    startsWithIgnoreCase(str) {\n        if (str === \"\")\n            return this.startsWith(str);\n        return addIgnoreCaseAlgorithm(this, (x, a) => x.indexOf(a[0]) === 0, [str], maxString);\n    }\n    equalsIgnoreCase(str) {\n        return addIgnoreCaseAlgorithm(this, (x, a) => x === a[0], [str], \"\");\n    }\n    anyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.indexOf(x) !== -1, set, \"\");\n    }\n    startsWithAnyOfIgnoreCase() {\n        var set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return emptyCollection(this);\n        return addIgnoreCaseAlgorithm(this, (x, a) => a.some(n => x.indexOf(n) === 0), set, maxString);\n    }\n    anyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        let compare = this._cmp;\n        try {\n            set.sort(compare);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        const c = new this.Collection(this, () => createRange(set[0], set[set.length - 1]));\n        c._ondirectionchange = direction => {\n            compare = (direction === \"next\" ?\n                this._ascending :\n                this._descending);\n            set.sort(compare);\n        };\n        let i = 0;\n        c._addAlgorithm((cursor, advance, resolve) => {\n            const key = cursor.key;\n            while (compare(key, set[i]) > 0) {\n                ++i;\n                if (i === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (compare(key, set[i]) === 0) {\n                return true;\n            }\n            else {\n                advance(() => { cursor.continue(set[i]); });\n                return false;\n            }\n        });\n        return c;\n    }\n    notEqual(value) {\n        return this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n    }\n    noneOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (set.length === 0)\n            return new this.Collection(this);\n        try {\n            set.sort(this._ascending);\n        }\n        catch (e) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        const ranges = set.reduce((res, val) => res ?\n            res.concat([[res[res.length - 1][1], val]]) :\n            [[minKey, val]], null);\n        ranges.push([set[set.length - 1], this.db._maxKey]);\n        return this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n    }\n    inAnyRange(ranges, options) {\n        const cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n        if (ranges.length === 0)\n            return emptyCollection(this);\n        if (!ranges.every(range => range[0] !== undefined &&\n            range[1] !== undefined &&\n            ascending(range[0], range[1]) <= 0)) {\n            return fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n        }\n        const includeLowers = !options || options.includeLowers !== false;\n        const includeUppers = options && options.includeUppers === true;\n        function addRange(ranges, newRange) {\n            let i = 0, l = ranges.length;\n            for (; i < l; ++i) {\n                const range = ranges[i];\n                if (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n                    range[0] = min(range[0], newRange[0]);\n                    range[1] = max(range[1], newRange[1]);\n                    break;\n                }\n            }\n            if (i === l)\n                ranges.push(newRange);\n            return ranges;\n        }\n        let sortDirection = ascending;\n        function rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n        let set;\n        try {\n            set = ranges.reduce(addRange, []);\n            set.sort(rangeSorter);\n        }\n        catch (ex) {\n            return fail(this, INVALID_KEY_ARGUMENT);\n        }\n        let rangePos = 0;\n        const keyIsBeyondCurrentEntry = includeUppers ?\n            key => ascending(key, set[rangePos][1]) > 0 :\n            key => ascending(key, set[rangePos][1]) >= 0;\n        const keyIsBeforeCurrentEntry = includeLowers ?\n            key => descending(key, set[rangePos][0]) > 0 :\n            key => descending(key, set[rangePos][0]) >= 0;\n        function keyWithinCurrentRange(key) {\n            return !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n        }\n        let checkKey = keyIsBeyondCurrentEntry;\n        const c = new this.Collection(this, () => createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers));\n        c._ondirectionchange = direction => {\n            if (direction === \"next\") {\n                checkKey = keyIsBeyondCurrentEntry;\n                sortDirection = ascending;\n            }\n            else {\n                checkKey = keyIsBeforeCurrentEntry;\n                sortDirection = descending;\n            }\n            set.sort(rangeSorter);\n        };\n        c._addAlgorithm((cursor, advance, resolve) => {\n            var key = cursor.key;\n            while (checkKey(key)) {\n                ++rangePos;\n                if (rangePos === set.length) {\n                    advance(resolve);\n                    return false;\n                }\n            }\n            if (keyWithinCurrentRange(key)) {\n                return true;\n            }\n            else if (this._cmp(key, set[rangePos][1]) === 0 || this._cmp(key, set[rangePos][0]) === 0) {\n                return false;\n            }\n            else {\n                advance(() => {\n                    if (sortDirection === ascending)\n                        cursor.continue(set[rangePos][0]);\n                    else\n                        cursor.continue(set[rangePos][1]);\n                });\n                return false;\n            }\n        });\n        return c;\n    }\n    startsWithAnyOf() {\n        const set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n        if (!set.every(s => typeof s === 'string')) {\n            return fail(this, \"startsWithAnyOf() only works with strings\");\n        }\n        if (set.length === 0)\n            return emptyCollection(this);\n        return this.inAnyRange(set.map((str) => [str, str + maxString]));\n    }\n}\n\nfunction createWhereClauseConstructor(db) {\n    return makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n        this.db = db;\n        this._ctx = {\n            table: table,\n            index: index === \":id\" ? null : index,\n            or: orCollection\n        };\n        const indexedDB = db._deps.indexedDB;\n        if (!indexedDB)\n            throw new exceptions.MissingAPI();\n        this._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n        this._descending = (a, b) => indexedDB.cmp(b, a);\n        this._max = (a, b) => indexedDB.cmp(a, b) > 0 ? a : b;\n        this._min = (a, b) => indexedDB.cmp(a, b) < 0 ? a : b;\n        this._IDBKeyRange = db._deps.IDBKeyRange;\n    });\n}\n\nfunction eventRejectHandler(reject) {\n    return wrap(function (event) {\n        preventDefault(event);\n        reject(event.target.error);\n        return false;\n    });\n}\nfunction preventDefault(event) {\n    if (event.stopPropagation)\n        event.stopPropagation();\n    if (event.preventDefault)\n        event.preventDefault();\n}\n\nconst DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\nconst STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\nconst globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\nclass Transaction {\n    _lock() {\n        assert(!PSD.global);\n        ++this._reculock;\n        if (this._reculock === 1 && !PSD.global)\n            PSD.lockOwnerFor = this;\n        return this;\n    }\n    _unlock() {\n        assert(!PSD.global);\n        if (--this._reculock === 0) {\n            if (!PSD.global)\n                PSD.lockOwnerFor = null;\n            while (this._blockedFuncs.length > 0 && !this._locked()) {\n                var fnAndPSD = this._blockedFuncs.shift();\n                try {\n                    usePSD(fnAndPSD[1], fnAndPSD[0]);\n                }\n                catch (e) { }\n            }\n        }\n        return this;\n    }\n    _locked() {\n        return this._reculock && PSD.lockOwnerFor !== this;\n    }\n    create(idbtrans) {\n        if (!this.mode)\n            return this;\n        const idbdb = this.db.idbdb;\n        const dbOpenError = this.db._state.dbOpenError;\n        assert(!this.idbtrans);\n        if (!idbtrans && !idbdb) {\n            switch (dbOpenError && dbOpenError.name) {\n                case \"DatabaseClosedError\":\n                    throw new exceptions.DatabaseClosed(dbOpenError);\n                case \"MissingAPIError\":\n                    throw new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n                default:\n                    throw new exceptions.OpenFailed(dbOpenError);\n            }\n        }\n        if (!this.active)\n            throw new exceptions.TransactionInactive();\n        assert(this._completion._state === null);\n        idbtrans = this.idbtrans = idbtrans ||\n            (this.db.core\n                ? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n                : idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n        idbtrans.onerror = wrap(ev => {\n            preventDefault(ev);\n            this._reject(idbtrans.error);\n        });\n        idbtrans.onabort = wrap(ev => {\n            preventDefault(ev);\n            this.active && this._reject(new exceptions.Abort(idbtrans.error));\n            this.active = false;\n            this.on(\"abort\").fire(ev);\n        });\n        idbtrans.oncomplete = wrap(() => {\n            this.active = false;\n            this._resolve();\n            if ('mutatedParts' in idbtrans) {\n                globalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n            }\n        });\n        return this;\n    }\n    _promise(mode, fn, bWriteLock) {\n        if (mode === 'readwrite' && this.mode !== 'readwrite')\n            return rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n        if (!this.active)\n            return rejection(new exceptions.TransactionInactive());\n        if (this._locked()) {\n            return new DexiePromise((resolve, reject) => {\n                this._blockedFuncs.push([() => {\n                        this._promise(mode, fn, bWriteLock).then(resolve, reject);\n                    }, PSD]);\n            });\n        }\n        else if (bWriteLock) {\n            return newScope(() => {\n                var p = new DexiePromise((resolve, reject) => {\n                    this._lock();\n                    const rv = fn(resolve, reject, this);\n                    if (rv && rv.then)\n                        rv.then(resolve, reject);\n                });\n                p.finally(() => this._unlock());\n                p._lib = true;\n                return p;\n            });\n        }\n        else {\n            var p = new DexiePromise((resolve, reject) => {\n                var rv = fn(resolve, reject, this);\n                if (rv && rv.then)\n                    rv.then(resolve, reject);\n            });\n            p._lib = true;\n            return p;\n        }\n    }\n    _root() {\n        return this.parent ? this.parent._root() : this;\n    }\n    waitFor(promiseLike) {\n        var root = this._root();\n        const promise = DexiePromise.resolve(promiseLike);\n        if (root._waitingFor) {\n            root._waitingFor = root._waitingFor.then(() => promise);\n        }\n        else {\n            root._waitingFor = promise;\n            root._waitingQueue = [];\n            var store = root.idbtrans.objectStore(root.storeNames[0]);\n            (function spin() {\n                ++root._spinCount;\n                while (root._waitingQueue.length)\n                    (root._waitingQueue.shift())();\n                if (root._waitingFor)\n                    store.get(-Infinity).onsuccess = spin;\n            }());\n        }\n        var currentWaitPromise = root._waitingFor;\n        return new DexiePromise((resolve, reject) => {\n            promise.then(res => root._waitingQueue.push(wrap(resolve.bind(null, res))), err => root._waitingQueue.push(wrap(reject.bind(null, err)))).finally(() => {\n                if (root._waitingFor === currentWaitPromise) {\n                    root._waitingFor = null;\n                }\n            });\n        });\n    }\n    abort() {\n        if (this.active) {\n            this.active = false;\n            if (this.idbtrans)\n                this.idbtrans.abort();\n            this._reject(new exceptions.Abort());\n        }\n    }\n    table(tableName) {\n        const memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n        if (hasOwn(memoizedTables, tableName))\n            return memoizedTables[tableName];\n        const tableSchema = this.schema[tableName];\n        if (!tableSchema) {\n            throw new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n        }\n        const transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n        transactionBoundTable.core = this.db.core.table(tableName);\n        memoizedTables[tableName] = transactionBoundTable;\n        return transactionBoundTable;\n    }\n}\n\nfunction createTransactionConstructor(db) {\n    return makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n        this.db = db;\n        this.mode = mode;\n        this.storeNames = storeNames;\n        this.schema = dbschema;\n        this.chromeTransactionDurability = chromeTransactionDurability;\n        this.idbtrans = null;\n        this.on = Events(this, \"complete\", \"error\", \"abort\");\n        this.parent = parent || null;\n        this.active = true;\n        this._reculock = 0;\n        this._blockedFuncs = [];\n        this._resolve = null;\n        this._reject = null;\n        this._waitingFor = null;\n        this._waitingQueue = null;\n        this._spinCount = 0;\n        this._completion = new DexiePromise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n        this._completion.then(() => {\n            this.active = false;\n            this.on.complete.fire();\n        }, e => {\n            var wasActive = this.active;\n            this.active = false;\n            this.on.error.fire(e);\n            this.parent ?\n                this.parent._reject(e) :\n                wasActive && this.idbtrans && this.idbtrans.abort();\n            return rejection(e);\n        });\n    });\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n    return {\n        name,\n        keyPath,\n        unique,\n        multi,\n        auto,\n        compound,\n        src: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n    };\n}\nfunction nameFromKeyPath(keyPath) {\n    return typeof keyPath === 'string' ?\n        keyPath :\n        keyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n    return {\n        name,\n        primKey,\n        indexes,\n        mappedClass: null,\n        idxByName: arrayToObject(indexes, index => [index.name, index])\n    };\n}\n\nfunction safariMultiStoreFix(storeNames) {\n    return storeNames.length === 1 ? storeNames[0] : storeNames;\n}\nlet getMaxKey = (IdbKeyRange) => {\n    try {\n        IdbKeyRange.only([[]]);\n        getMaxKey = () => [[]];\n        return [[]];\n    }\n    catch (e) {\n        getMaxKey = () => maxString;\n        return maxString;\n    }\n};\n\nfunction getKeyExtractor(keyPath) {\n    if (keyPath == null) {\n        return () => undefined;\n    }\n    else if (typeof keyPath === 'string') {\n        return getSinglePathKeyExtractor(keyPath);\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n    const split = keyPath.split('.');\n    if (split.length === 1) {\n        return obj => obj[keyPath];\n    }\n    else {\n        return obj => getByKeyPath(obj, keyPath);\n    }\n}\n\nfunction arrayify(arrayLike) {\n    return [].slice.call(arrayLike);\n}\nlet _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n    return keyPath == null ?\n        \":id\" :\n        typeof keyPath === 'string' ?\n            keyPath :\n            `[${keyPath.join('+')}]`;\n}\nfunction createDBCore(db, IdbKeyRange, tmpTrans) {\n    function extractSchema(db, trans) {\n        const tables = arrayify(db.objectStoreNames);\n        return {\n            schema: {\n                name: db.name,\n                tables: tables.map(table => trans.objectStore(table)).map(store => {\n                    const { keyPath, autoIncrement } = store;\n                    const compound = isArray(keyPath);\n                    const outbound = keyPath == null;\n                    const indexByKeyPath = {};\n                    const result = {\n                        name: store.name,\n                        primaryKey: {\n                            name: null,\n                            isPrimaryKey: true,\n                            outbound,\n                            compound,\n                            keyPath,\n                            autoIncrement,\n                            unique: true,\n                            extractKey: getKeyExtractor(keyPath)\n                        },\n                        indexes: arrayify(store.indexNames).map(indexName => store.index(indexName))\n                            .map(index => {\n                            const { name, unique, multiEntry, keyPath } = index;\n                            const compound = isArray(keyPath);\n                            const result = {\n                                name,\n                                compound,\n                                keyPath,\n                                unique,\n                                multiEntry,\n                                extractKey: getKeyExtractor(keyPath)\n                            };\n                            indexByKeyPath[getKeyPathAlias(keyPath)] = result;\n                            return result;\n                        }),\n                        getIndexByKeyPath: (keyPath) => indexByKeyPath[getKeyPathAlias(keyPath)]\n                    };\n                    indexByKeyPath[\":id\"] = result.primaryKey;\n                    if (keyPath != null) {\n                        indexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n                    }\n                    return result;\n                })\n            },\n            hasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n                !(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n                    !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n                    [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n        };\n    }\n    function makeIDBKeyRange(range) {\n        if (range.type === 3 )\n            return null;\n        if (range.type === 4 )\n            throw new Error(\"Cannot convert never type to IDBKeyRange\");\n        const { lower, upper, lowerOpen, upperOpen } = range;\n        const idbRange = lower === undefined ?\n            upper === undefined ?\n                null :\n                IdbKeyRange.upperBound(upper, !!upperOpen) :\n            upper === undefined ?\n                IdbKeyRange.lowerBound(lower, !!lowerOpen) :\n                IdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n        return idbRange;\n    }\n    function createDbCoreTable(tableSchema) {\n        const tableName = tableSchema.name;\n        function mutate({ trans, type, keys, values, range }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const store = trans.objectStore(tableName);\n                const outbound = store.keyPath == null;\n                const isAddOrPut = type === \"put\" || type === \"add\";\n                if (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n                    throw new Error(\"Invalid operation type: \" + type);\n                const { length } = keys || values || { length: 1 };\n                if (keys && values && keys.length !== values.length) {\n                    throw new Error(\"Given keys array must have same length as given values array.\");\n                }\n                if (length === 0)\n                    return resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n                let req;\n                const reqs = [];\n                const failures = [];\n                let numFailures = 0;\n                const errorHandler = event => {\n                    ++numFailures;\n                    preventDefault(event);\n                };\n                if (type === 'deleteRange') {\n                    if (range.type === 4 )\n                        return resolve({ numFailures, failures, results: [], lastResult: undefined });\n                    if (range.type === 3 )\n                        reqs.push(req = store.clear());\n                    else\n                        reqs.push(req = store.delete(makeIDBKeyRange(range)));\n                }\n                else {\n                    const [args1, args2] = isAddOrPut ?\n                        outbound ?\n                            [values, keys] :\n                            [values, null] :\n                        [keys, null];\n                    if (isAddOrPut) {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = (args2 && args2[i] !== undefined ?\n                                store[type](args1[i], args2[i]) :\n                                store[type](args1[i])));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                    else {\n                        for (let i = 0; i < length; ++i) {\n                            reqs.push(req = store[type](args1[i]));\n                            req.onerror = errorHandler;\n                        }\n                    }\n                }\n                const done = event => {\n                    const lastResult = event.target.result;\n                    reqs.forEach((req, i) => req.error != null && (failures[i] = req.error));\n                    resolve({\n                        numFailures,\n                        failures,\n                        results: type === \"delete\" ? keys : reqs.map(req => req.result),\n                        lastResult\n                    });\n                };\n                req.onerror = event => {\n                    errorHandler(event);\n                    done(event);\n                };\n                req.onsuccess = done;\n            });\n        }\n        function openCursor({ trans, values, query, reverse, unique }) {\n            return new Promise((resolve, reject) => {\n                resolve = wrap(resolve);\n                const { index, range } = query;\n                const store = trans.objectStore(tableName);\n                const source = index.isPrimaryKey ?\n                    store :\n                    store.index(index.name);\n                const direction = reverse ?\n                    unique ?\n                        \"prevunique\" :\n                        \"prev\" :\n                    unique ?\n                        \"nextunique\" :\n                        \"next\";\n                const req = values || !('openKeyCursor' in source) ?\n                    source.openCursor(makeIDBKeyRange(range), direction) :\n                    source.openKeyCursor(makeIDBKeyRange(range), direction);\n                req.onerror = eventRejectHandler(reject);\n                req.onsuccess = wrap(ev => {\n                    const cursor = req.result;\n                    if (!cursor) {\n                        resolve(null);\n                        return;\n                    }\n                    cursor.___id = ++_id_counter;\n                    cursor.done = false;\n                    const _cursorContinue = cursor.continue.bind(cursor);\n                    let _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n                    if (_cursorContinuePrimaryKey)\n                        _cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n                    const _cursorAdvance = cursor.advance.bind(cursor);\n                    const doThrowCursorIsNotStarted = () => { throw new Error(\"Cursor not started\"); };\n                    const doThrowCursorIsStopped = () => { throw new Error(\"Cursor not stopped\"); };\n                    cursor.trans = trans;\n                    cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n                    cursor.fail = wrap(reject);\n                    cursor.next = function () {\n                        let gotOne = 1;\n                        return this.start(() => gotOne-- ? this.continue() : this.stop()).then(() => this);\n                    };\n                    cursor.start = (callback) => {\n                        const iterationPromise = new Promise((resolveIteration, rejectIteration) => {\n                            resolveIteration = wrap(resolveIteration);\n                            req.onerror = eventRejectHandler(rejectIteration);\n                            cursor.fail = rejectIteration;\n                            cursor.stop = value => {\n                                cursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n                                resolveIteration(value);\n                            };\n                        });\n                        const guardedCallback = () => {\n                            if (req.result) {\n                                try {\n                                    callback();\n                                }\n                                catch (err) {\n                                    cursor.fail(err);\n                                }\n                            }\n                            else {\n                                cursor.done = true;\n                                cursor.start = () => { throw new Error(\"Cursor behind last entry\"); };\n                                cursor.stop();\n                            }\n                        };\n                        req.onsuccess = wrap(ev => {\n                            req.onsuccess = guardedCallback;\n                            guardedCallback();\n                        });\n                        cursor.continue = _cursorContinue;\n                        cursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n                        cursor.advance = _cursorAdvance;\n                        guardedCallback();\n                        return iterationPromise;\n                    };\n                    resolve(cursor);\n                }, reject);\n            });\n        }\n        function query(hasGetAll) {\n            return (request) => {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const { trans, values, limit, query } = request;\n                    const nonInfinitLimit = limit === Infinity ? undefined : limit;\n                    const { index, range } = query;\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    if (limit === 0)\n                        return resolve({ result: [] });\n                    if (hasGetAll) {\n                        const req = values ?\n                            source.getAll(idbKeyRange, nonInfinitLimit) :\n                            source.getAllKeys(idbKeyRange, nonInfinitLimit);\n                        req.onsuccess = event => resolve({ result: event.target.result });\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                    else {\n                        let count = 0;\n                        const req = values || !('openKeyCursor' in source) ?\n                            source.openCursor(idbKeyRange) :\n                            source.openKeyCursor(idbKeyRange);\n                        const result = [];\n                        req.onsuccess = event => {\n                            const cursor = req.result;\n                            if (!cursor)\n                                return resolve({ result });\n                            result.push(values ? cursor.value : cursor.primaryKey);\n                            if (++count === limit)\n                                return resolve({ result });\n                            cursor.continue();\n                        };\n                        req.onerror = eventRejectHandler(reject);\n                    }\n                });\n            };\n        }\n        return {\n            name: tableName,\n            schema: tableSchema,\n            mutate,\n            getMany({ trans, keys }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const length = keys.length;\n                    const result = new Array(length);\n                    let keyCount = 0;\n                    let callbackCount = 0;\n                    let req;\n                    const successHandler = event => {\n                        const req = event.target;\n                        if ((result[req._pos] = req.result) != null)\n                            ;\n                        if (++callbackCount === keyCount)\n                            resolve(result);\n                    };\n                    const errorHandler = eventRejectHandler(reject);\n                    for (let i = 0; i < length; ++i) {\n                        const key = keys[i];\n                        if (key != null) {\n                            req = store.get(keys[i]);\n                            req._pos = i;\n                            req.onsuccess = successHandler;\n                            req.onerror = errorHandler;\n                            ++keyCount;\n                        }\n                    }\n                    if (keyCount === 0)\n                        resolve(result);\n                });\n            },\n            get({ trans, key }) {\n                return new Promise((resolve, reject) => {\n                    resolve = wrap(resolve);\n                    const store = trans.objectStore(tableName);\n                    const req = store.get(key);\n                    req.onsuccess = event => resolve(event.target.result);\n                    req.onerror = eventRejectHandler(reject);\n                });\n            },\n            query: query(hasGetAll),\n            openCursor,\n            count({ query, trans }) {\n                const { index, range } = query;\n                return new Promise((resolve, reject) => {\n                    const store = trans.objectStore(tableName);\n                    const source = index.isPrimaryKey ? store : store.index(index.name);\n                    const idbKeyRange = makeIDBKeyRange(range);\n                    const req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n                    req.onsuccess = wrap(ev => resolve(ev.target.result));\n                    req.onerror = eventRejectHandler(reject);\n                });\n            }\n        };\n    }\n    const { schema, hasGetAll } = extractSchema(db, tmpTrans);\n    const tables = schema.tables.map(tableSchema => createDbCoreTable(tableSchema));\n    const tableMap = {};\n    tables.forEach(table => tableMap[table.name] = table);\n    return {\n        stack: \"dbcore\",\n        transaction: db.transaction.bind(db),\n        table(name) {\n            const result = tableMap[name];\n            if (!result)\n                throw new Error(`Table '${name}' not found`);\n            return tableMap[name];\n        },\n        MIN_KEY: -Infinity,\n        MAX_KEY: getMaxKey(IdbKeyRange),\n        schema\n    };\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n    return middlewares.reduce((down, { create }) => ({ ...down, ...create(down) }), stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, { IDBKeyRange, indexedDB }, tmpTrans) {\n    const dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n    return {\n        dbcore\n    };\n}\nfunction generateMiddlewareStacks({ _novip: db }, tmpTrans) {\n    const idbdb = tmpTrans.db;\n    const stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n    db.core = stacks.dbcore;\n    db.tables.forEach(table => {\n        const tableName = table.name;\n        if (db.core.schema.tables.some(tbl => tbl.name === tableName)) {\n            table.core = db.core.table(tableName);\n            if (db[tableName] instanceof db.Table) {\n                db[tableName].core = table.core;\n            }\n        }\n    });\n}\n\nfunction setApiOnPlace({ _novip: db }, objs, tableNames, dbschema) {\n    tableNames.forEach(tableName => {\n        const schema = dbschema[tableName];\n        objs.forEach(obj => {\n            const propDesc = getPropertyDescriptor(obj, tableName);\n            if (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n                if (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n                    setProp(obj, tableName, {\n                        get() { return this.table(tableName); },\n                        set(value) {\n                            defineProperty(this, tableName, { value, writable: true, configurable: true, enumerable: true });\n                        }\n                    });\n                }\n                else {\n                    obj[tableName] = new db.Table(tableName, schema);\n                }\n            }\n        });\n    });\n}\nfunction removeTablesApi({ _novip: db }, objs) {\n    objs.forEach(obj => {\n        for (let key in obj) {\n            if (obj[key] instanceof db.Table)\n                delete obj[key];\n        }\n    });\n}\nfunction lowerVersionFirst(a, b) {\n    return a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n    const globalSchema = db._dbSchema;\n    const trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n    trans.create(idbUpgradeTrans);\n    trans._completion.catch(reject);\n    const rejectTransaction = trans._reject.bind(trans);\n    const transless = PSD.transless || PSD;\n    newScope(() => {\n        PSD.trans = trans;\n        PSD.transless = transless;\n        if (oldVersion === 0) {\n            keys(globalSchema).forEach(tableName => {\n                createTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n            });\n            generateMiddlewareStacks(db, idbUpgradeTrans);\n            DexiePromise.follow(() => db.on.populate.fire(trans)).catch(rejectTransaction);\n        }\n        else\n            updateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n    });\n}\nfunction updateTablesAndIndexes({ _novip: db }, oldVersion, trans, idbUpgradeTrans) {\n    const queue = [];\n    const versions = db._versions;\n    let globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n    let anyContentUpgraderHasRun = false;\n    const versToRun = versions.filter(v => v._cfg.version >= oldVersion);\n    versToRun.forEach(version => {\n        queue.push(() => {\n            const oldSchema = globalSchema;\n            const newSchema = version._cfg.dbschema;\n            adjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n            adjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n            globalSchema = db._dbSchema = newSchema;\n            const diff = getSchemaDiff(oldSchema, newSchema);\n            diff.add.forEach(tuple => {\n                createTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n            });\n            diff.change.forEach(change => {\n                if (change.recreate) {\n                    throw new exceptions.Upgrade(\"Not yet support for changing primary key\");\n                }\n                else {\n                    const store = idbUpgradeTrans.objectStore(change.name);\n                    change.add.forEach(idx => addIndex(store, idx));\n                    change.change.forEach(idx => {\n                        store.deleteIndex(idx.name);\n                        addIndex(store, idx);\n                    });\n                    change.del.forEach(idxName => store.deleteIndex(idxName));\n                }\n            });\n            const contentUpgrade = version._cfg.contentUpgrade;\n            if (contentUpgrade && version._cfg.version > oldVersion) {\n                generateMiddlewareStacks(db, idbUpgradeTrans);\n                trans._memoizedTables = {};\n                anyContentUpgraderHasRun = true;\n                let upgradeSchema = shallowClone(newSchema);\n                diff.del.forEach(table => {\n                    upgradeSchema[table] = oldSchema[table];\n                });\n                removeTablesApi(db, [db.Transaction.prototype]);\n                setApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema), upgradeSchema);\n                trans.schema = upgradeSchema;\n                const contentUpgradeIsAsync = isAsyncFunction(contentUpgrade);\n                if (contentUpgradeIsAsync) {\n                    incrementExpectedAwaits();\n                }\n                let returnValue;\n                const promiseFollowed = DexiePromise.follow(() => {\n                    returnValue = contentUpgrade(trans);\n                    if (returnValue) {\n                        if (contentUpgradeIsAsync) {\n                            var decrementor = decrementExpectedAwaits.bind(null, null);\n                            returnValue.then(decrementor, decrementor);\n                        }\n                    }\n                });\n                return (returnValue && typeof returnValue.then === 'function' ?\n                    DexiePromise.resolve(returnValue) : promiseFollowed.then(() => returnValue));\n            }\n        });\n        queue.push(idbtrans => {\n            if (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n                const newSchema = version._cfg.dbschema;\n                deleteRemovedTables(newSchema, idbtrans);\n            }\n            removeTablesApi(db, [db.Transaction.prototype]);\n            setApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n            trans.schema = db._dbSchema;\n        });\n    });\n    function runQueue() {\n        return queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n            DexiePromise.resolve();\n    }\n    return runQueue().then(() => {\n        createMissingTables(globalSchema, idbUpgradeTrans);\n    });\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n    const diff = {\n        del: [],\n        add: [],\n        change: []\n    };\n    let table;\n    for (table in oldSchema) {\n        if (!newSchema[table])\n            diff.del.push(table);\n    }\n    for (table in newSchema) {\n        const oldDef = oldSchema[table], newDef = newSchema[table];\n        if (!oldDef) {\n            diff.add.push([table, newDef]);\n        }\n        else {\n            const change = {\n                name: table,\n                def: newDef,\n                recreate: false,\n                del: [],\n                add: [],\n                change: []\n            };\n            if ((\n            '' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n                (oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n             {\n                change.recreate = true;\n                diff.change.push(change);\n            }\n            else {\n                const oldIndexes = oldDef.idxByName;\n                const newIndexes = newDef.idxByName;\n                let idxName;\n                for (idxName in oldIndexes) {\n                    if (!newIndexes[idxName])\n                        change.del.push(idxName);\n                }\n                for (idxName in newIndexes) {\n                    const oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n                    if (!oldIdx)\n                        change.add.push(newIdx);\n                    else if (oldIdx.src !== newIdx.src)\n                        change.change.push(newIdx);\n                }\n                if (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n                    diff.change.push(change);\n                }\n            }\n        }\n    }\n    return diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n    const store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n        { keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n        { autoIncrement: primKey.auto });\n    indexes.forEach(idx => addIndex(store, idx));\n    return store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n    keys(newSchema).forEach(tableName => {\n        if (!idbtrans.db.objectStoreNames.contains(tableName)) {\n            createTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n        }\n    });\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n    [].slice.call(idbtrans.db.objectStoreNames).forEach(storeName => newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName));\n}\nfunction addIndex(store, idx) {\n    store.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n    const globalSchema = {};\n    const dbStoreNames = slice(idbdb.objectStoreNames, 0);\n    dbStoreNames.forEach(storeName => {\n        const store = tmpTrans.objectStore(storeName);\n        let keyPath = store.keyPath;\n        const primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n        const indexes = [];\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const idbindex = store.index(store.indexNames[j]);\n            keyPath = idbindex.keyPath;\n            var index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n            indexes.push(index);\n        }\n        globalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n    });\n    return globalSchema;\n}\nfunction readGlobalSchema({ _novip: db }, idbdb, tmpTrans) {\n    db.verno = idbdb.version / 10;\n    const globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n    db._storeNames = slice(idbdb.objectStoreNames, 0);\n    setApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n    const installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n    const diff = getSchemaDiff(installedSchema, db._dbSchema);\n    return !(diff.add.length || diff.change.some(ch => ch.add.length || ch.change.length));\n}\nfunction adjustToExistingIndexNames({ _novip: db }, schema, idbtrans) {\n    const storeNames = idbtrans.db.objectStoreNames;\n    for (let i = 0; i < storeNames.length; ++i) {\n        const storeName = storeNames[i];\n        const store = idbtrans.objectStore(storeName);\n        db._hasGetAll = 'getAll' in store;\n        for (let j = 0; j < store.indexNames.length; ++j) {\n            const indexName = store.indexNames[j];\n            const keyPath = store.index(indexName).keyPath;\n            const dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n            if (schema[storeName]) {\n                const indexSpec = schema[storeName].idxByName[dexieName];\n                if (indexSpec) {\n                    indexSpec.name = indexName;\n                    delete schema[storeName].idxByName[dexieName];\n                    schema[storeName].idxByName[indexName] = indexSpec;\n                }\n            }\n        }\n    }\n    if (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n        !/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n        _global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n        [].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n        db._hasGetAll = false;\n    }\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n    return primKeyAndIndexes.split(',').map((index, indexNum) => {\n        index = index.trim();\n        const name = index.replace(/([&*]|\\+\\+)/g, \"\");\n        const keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n        return createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n    });\n}\n\nclass Version {\n    _parseStoresSpec(stores, outSchema) {\n        keys(stores).forEach(tableName => {\n            if (stores[tableName] !== null) {\n                var indexes = parseIndexSyntax(stores[tableName]);\n                var primKey = indexes.shift();\n                if (primKey.multi)\n                    throw new exceptions.Schema(\"Primary key cannot be multi-valued\");\n                indexes.forEach(idx => {\n                    if (idx.auto)\n                        throw new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n                    if (!idx.keyPath)\n                        throw new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n                });\n                outSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n            }\n        });\n    }\n    stores(stores) {\n        const db = this.db;\n        this._cfg.storesSource = this._cfg.storesSource ?\n            extend(this._cfg.storesSource, stores) :\n            stores;\n        const versions = db._versions;\n        const storesSpec = {};\n        let dbschema = {};\n        versions.forEach(version => {\n            extend(storesSpec, version._cfg.storesSource);\n            dbschema = (version._cfg.dbschema = {});\n            version._parseStoresSpec(storesSpec, dbschema);\n        });\n        db._dbSchema = dbschema;\n        removeTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n        setApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n        db._storeNames = keys(dbschema);\n        return this;\n    }\n    upgrade(upgradeFunction) {\n        this._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n        return this;\n    }\n}\n\nfunction createVersionConstructor(db) {\n    return makeClassConstructor(Version.prototype, function Version(versionNumber) {\n        this.db = db;\n        this._cfg = {\n            version: versionNumber,\n            storesSource: null,\n            dbschema: {},\n            tables: {},\n            contentUpgrade: null\n        };\n    });\n}\n\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\n    let dbNamesDB = indexedDB[\"_dbNamesDB\"];\n    if (!dbNamesDB) {\n        dbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n            addons: [],\n            indexedDB,\n            IDBKeyRange,\n        });\n        dbNamesDB.version(1).stores({ dbnames: \"name\" });\n    }\n    return dbNamesDB.table(\"dbnames\");\n}\nfunction hasDatabasesNative(indexedDB) {\n    return indexedDB && typeof indexedDB.databases === \"function\";\n}\nfunction getDatabaseNames({ indexedDB, IDBKeyRange, }) {\n    return hasDatabasesNative(indexedDB)\n        ? Promise.resolve(indexedDB.databases()).then((infos) => infos\n            .map((info) => info.name)\n            .filter((name) => name !== DBNAMES_DB))\n        : getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n}\nfunction _onDatabaseCreated({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).put({ name }).catch(nop);\n}\nfunction _onDatabaseDeleted({ indexedDB, IDBKeyRange }, name) {\n    !hasDatabasesNative(indexedDB) &&\n        name !== DBNAMES_DB &&\n        getDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n}\n\nfunction vip(fn) {\n    return newScope(function () {\n        PSD.letThrough = true;\n        return fn();\n    });\n}\n\nfunction idbReady() {\n    var isSafari = !navigator.userAgentData &&\n        /Safari\\//.test(navigator.userAgent) &&\n        !/Chrom(e|ium)\\//.test(navigator.userAgent);\n    if (!isSafari || !indexedDB.databases)\n        return Promise.resolve();\n    var intervalId;\n    return new Promise(function (resolve) {\n        var tryIdb = function () { return indexedDB.databases().finally(resolve); };\n        intervalId = setInterval(tryIdb, 100);\n        tryIdb();\n    }).finally(function () { return clearInterval(intervalId); });\n}\n\nfunction dexieOpen(db) {\n    const state = db._state;\n    const { indexedDB } = db._deps;\n    if (state.isBeingOpened || db.idbdb)\n        return state.dbReadyPromise.then(() => state.dbOpenError ?\n            rejection(state.dbOpenError) :\n            db);\n    debug && (state.openCanceller._stackHolder = getErrorWithStack());\n    state.isBeingOpened = true;\n    state.dbOpenError = null;\n    state.openComplete = false;\n    const openCanceller = state.openCanceller;\n    function throwIfCancelled() {\n        if (state.openCanceller !== openCanceller)\n            throw new exceptions.DatabaseClosed('db.open() was cancelled');\n    }\n    let resolveDbReady = state.dbReadyResolve,\n    upgradeTransaction = null, wasCreated = false;\n    return DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(() => new DexiePromise((resolve, reject) => {\n            throwIfCancelled();\n            if (!indexedDB)\n                throw new exceptions.MissingAPI();\n            const dbName = db.name;\n            const req = state.autoSchema ?\n                indexedDB.open(dbName) :\n                indexedDB.open(dbName, Math.round(db.verno * 10));\n            if (!req)\n                throw new exceptions.MissingAPI();\n            req.onerror = eventRejectHandler(reject);\n            req.onblocked = wrap(db._fireOnBlocked);\n            req.onupgradeneeded = wrap(e => {\n                upgradeTransaction = req.transaction;\n                if (state.autoSchema && !db._options.allowEmptyDB) {\n                    req.onerror = preventDefault;\n                    upgradeTransaction.abort();\n                    req.result.close();\n                    const delreq = indexedDB.deleteDatabase(dbName);\n                    delreq.onsuccess = delreq.onerror = wrap(() => {\n                        reject(new exceptions.NoSuchDatabase(`Database ${dbName} doesnt exist`));\n                    });\n                }\n                else {\n                    upgradeTransaction.onerror = eventRejectHandler(reject);\n                    var oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n                    wasCreated = oldVer < 1;\n                    db._novip.idbdb = req.result;\n                    runUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n                }\n            }, reject);\n            req.onsuccess = wrap(() => {\n                upgradeTransaction = null;\n                const idbdb = db._novip.idbdb = req.result;\n                const objectStoreNames = slice(idbdb.objectStoreNames);\n                if (objectStoreNames.length > 0)\n                    try {\n                        const tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n                        if (state.autoSchema)\n                            readGlobalSchema(db, idbdb, tmpTrans);\n                        else {\n                            adjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n                            if (!verifyInstalledSchema(db, tmpTrans)) {\n                                console.warn(`Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.`);\n                            }\n                        }\n                        generateMiddlewareStacks(db, tmpTrans);\n                    }\n                    catch (e) {\n                    }\n                connections.push(db);\n                idbdb.onversionchange = wrap(ev => {\n                    state.vcFired = true;\n                    db.on(\"versionchange\").fire(ev);\n                });\n                idbdb.onclose = wrap(ev => {\n                    db.on(\"close\").fire(ev);\n                });\n                if (wasCreated)\n                    _onDatabaseCreated(db._deps, dbName);\n                resolve();\n            }, reject);\n        }))]).then(() => {\n        throwIfCancelled();\n        state.onReadyBeingFired = [];\n        return DexiePromise.resolve(vip(() => db.on.ready.fire(db.vip))).then(function fireRemainders() {\n            if (state.onReadyBeingFired.length > 0) {\n                let remainders = state.onReadyBeingFired.reduce(promisableChain, nop);\n                state.onReadyBeingFired = [];\n                return DexiePromise.resolve(vip(() => remainders(db.vip))).then(fireRemainders);\n            }\n        });\n    }).finally(() => {\n        state.onReadyBeingFired = null;\n        state.isBeingOpened = false;\n    }).then(() => {\n        return db;\n    }).catch(err => {\n        state.dbOpenError = err;\n        try {\n            upgradeTransaction && upgradeTransaction.abort();\n        }\n        catch (_a) { }\n        if (openCanceller === state.openCanceller) {\n            db._close();\n        }\n        return rejection(err);\n    }).finally(() => {\n        state.openComplete = true;\n        resolveDbReady();\n    });\n}\n\nfunction awaitIterator(iterator) {\n    var callNext = result => iterator.next(result), doThrow = error => iterator.throw(error), onSuccess = step(callNext), onError = step(doThrow);\n    function step(getNext) {\n        return (val) => {\n            var next = getNext(val), value = next.value;\n            return next.done ? value :\n                (!value || typeof value.then !== 'function' ?\n                    isArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n                    value.then(onSuccess, onError));\n        };\n    }\n    return step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n    var i = arguments.length;\n    if (i < 2)\n        throw new exceptions.InvalidArgument(\"Too few arguments\");\n    var args = new Array(i - 1);\n    while (--i)\n        args[i - 1] = arguments[i];\n    scopeFunc = args.pop();\n    var tables = flatten(args);\n    return [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n    return DexiePromise.resolve().then(() => {\n        const transless = PSD.transless || PSD;\n        const trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n        const zoneProps = {\n            trans: trans,\n            transless: transless\n        };\n        if (parentTransaction) {\n            trans.idbtrans = parentTransaction.idbtrans;\n        }\n        else {\n            trans.create();\n        }\n        const scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n        if (scopeFuncIsAsync) {\n            incrementExpectedAwaits();\n        }\n        let returnValue;\n        const promiseFollowed = DexiePromise.follow(() => {\n            returnValue = scopeFunc.call(trans, trans);\n            if (returnValue) {\n                if (scopeFuncIsAsync) {\n                    var decrementor = decrementExpectedAwaits.bind(null, null);\n                    returnValue.then(decrementor, decrementor);\n                }\n                else if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n                    returnValue = awaitIterator(returnValue);\n                }\n            }\n        }, zoneProps);\n        return (returnValue && typeof returnValue.then === 'function' ?\n            DexiePromise.resolve(returnValue).then(x => trans.active ?\n                x\n                : rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")))\n            : promiseFollowed.then(() => returnValue)).then(x => {\n            if (parentTransaction)\n                trans._resolve();\n            return trans._completion.then(() => x);\n        }).catch(e => {\n            trans._reject(e);\n            return rejection(e);\n        });\n    });\n}\n\nfunction pad(a, value, count) {\n    const result = isArray(a) ? a.slice() : [a];\n    for (let i = 0; i < count; ++i)\n        result.push(value);\n    return result;\n}\nfunction createVirtualIndexMiddleware(down) {\n    return {\n        ...down,\n        table(tableName) {\n            const table = down.table(tableName);\n            const { schema } = table;\n            const indexLookup = {};\n            const allVirtualIndexes = [];\n            function addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n                const keyPathAlias = getKeyPathAlias(keyPath);\n                const indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n                const keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n                const isVirtual = keyTail > 0;\n                const virtualIndex = {\n                    ...lowLevelIndex,\n                    isVirtual,\n                    keyTail,\n                    keyLength,\n                    extractKey: getKeyExtractor(keyPath),\n                    unique: !isVirtual && lowLevelIndex.unique\n                };\n                indexList.push(virtualIndex);\n                if (!virtualIndex.isPrimaryKey) {\n                    allVirtualIndexes.push(virtualIndex);\n                }\n                if (keyLength > 1) {\n                    const virtualKeyPath = keyLength === 2 ?\n                        keyPath[0] :\n                        keyPath.slice(0, keyLength - 1);\n                    addVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n                }\n                indexList.sort((a, b) => a.keyTail - b.keyTail);\n                return virtualIndex;\n            }\n            const primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n            indexLookup[\":id\"] = [primaryKey];\n            for (const index of schema.indexes) {\n                addVirtualIndexes(index.keyPath, 0, index);\n            }\n            function findBestIndex(keyPath) {\n                const result = indexLookup[getKeyPathAlias(keyPath)];\n                return result && result[0];\n            }\n            function translateRange(range, keyTail) {\n                return {\n                    type: range.type === 1  ?\n                        2  :\n                        range.type,\n                    lower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n                    lowerOpen: true,\n                    upper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n                    upperOpen: true\n                };\n            }\n            function translateRequest(req) {\n                const index = req.query.index;\n                return index.isVirtual ? {\n                    ...req,\n                    query: {\n                        index,\n                        range: translateRange(req.query.range, index.keyTail)\n                    }\n                } : req;\n            }\n            const result = {\n                ...table,\n                schema: {\n                    ...schema,\n                    primaryKey,\n                    indexes: allVirtualIndexes,\n                    getIndexByKeyPath: findBestIndex\n                },\n                count(req) {\n                    return table.count(translateRequest(req));\n                },\n                query(req) {\n                    return table.query(translateRequest(req));\n                },\n                openCursor(req) {\n                    const { keyTail, isVirtual, keyLength } = req.query.index;\n                    if (!isVirtual)\n                        return table.openCursor(req);\n                    function createVirtualCursor(cursor) {\n                        function _continue(key) {\n                            key != null ?\n                                cursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n                                req.unique ?\n                                    cursor.continue(cursor.key.slice(0, keyLength)\n                                        .concat(req.reverse\n                                        ? down.MIN_KEY\n                                        : down.MAX_KEY, keyTail)) :\n                                    cursor.continue();\n                        }\n                        const virtualCursor = Object.create(cursor, {\n                            continue: { value: _continue },\n                            continuePrimaryKey: {\n                                value(key, primaryKey) {\n                                    cursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n                                }\n                            },\n                            primaryKey: {\n                                get() {\n                                    return cursor.primaryKey;\n                                }\n                            },\n                            key: {\n                                get() {\n                                    const key = cursor.key;\n                                    return keyLength === 1 ?\n                                        key[0] :\n                                        key.slice(0, keyLength);\n                                }\n                            },\n                            value: {\n                                get() {\n                                    return cursor.value;\n                                }\n                            }\n                        });\n                        return virtualCursor;\n                    }\n                    return table.openCursor(translateRequest(req))\n                        .then(cursor => cursor && createVirtualCursor(cursor));\n                }\n            };\n            return result;\n        }\n    };\n}\nconst virtualIndexMiddleware = {\n    stack: \"dbcore\",\n    name: \"VirtualIndexMiddleware\",\n    level: 1,\n    create: createVirtualIndexMiddleware\n};\n\nfunction getObjectDiff(a, b, rv, prfx) {\n    rv = rv || {};\n    prfx = prfx || '';\n    keys(a).forEach((prop) => {\n        if (!hasOwn(b, prop)) {\n            rv[prfx + prop] = undefined;\n        }\n        else {\n            var ap = a[prop], bp = b[prop];\n            if (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n                const apTypeName = toStringTag(ap);\n                const bpTypeName = toStringTag(bp);\n                if (apTypeName !== bpTypeName) {\n                    rv[prfx + prop] = b[prop];\n                }\n                else if (apTypeName === 'Object') {\n                    getObjectDiff(ap, bp, rv, prfx + prop + '.');\n                }\n                else if (ap !== bp) {\n                    rv[prfx + prop] = b[prop];\n                }\n            }\n            else if (ap !== bp)\n                rv[prfx + prop] = b[prop];\n        }\n    });\n    keys(b).forEach((prop) => {\n        if (!hasOwn(a, prop)) {\n            rv[prfx + prop] = b[prop];\n        }\n    });\n    return rv;\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n    if (req.type === 'delete')\n        return req.keys;\n    return req.keys || req.values.map(primaryKey.extractKey);\n}\n\nconst hooksMiddleware = {\n    stack: \"dbcore\",\n    name: \"HooksMiddleware\",\n    level: 2,\n    create: (downCore) => ({\n        ...downCore,\n        table(tableName) {\n            const downTable = downCore.table(tableName);\n            const { primaryKey } = downTable.schema;\n            const tableMiddleware = {\n                ...downTable,\n                mutate(req) {\n                    const dxTrans = PSD.trans;\n                    const { deleting, creating, updating } = dxTrans.table(tableName).hook;\n                    switch (req.type) {\n                        case 'add':\n                            if (creating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'put':\n                            if (creating.fire === nop && updating.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'delete':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => addPutOrDelete(req), true);\n                        case 'deleteRange':\n                            if (deleting.fire === nop)\n                                break;\n                            return dxTrans._promise('readwrite', () => deleteRange(req), true);\n                    }\n                    return downTable.mutate(req);\n                    function addPutOrDelete(req) {\n                        const dxTrans = PSD.trans;\n                        const keys = req.keys || getEffectiveKeys(primaryKey, req);\n                        if (!keys)\n                            throw new Error(\"Keys missing\");\n                        req = req.type === 'add' || req.type === 'put' ?\n                            { ...req, keys } :\n                            { ...req };\n                        if (req.type !== 'delete')\n                            req.values = [...req.values];\n                        if (req.keys)\n                            req.keys = [...req.keys];\n                        return getExistingValues(downTable, req, keys).then(existingValues => {\n                            const contexts = keys.map((key, i) => {\n                                const existingValue = existingValues[i];\n                                const ctx = { onerror: null, onsuccess: null };\n                                if (req.type === 'delete') {\n                                    deleting.fire.call(ctx, key, existingValue, dxTrans);\n                                }\n                                else if (req.type === 'add' || existingValue === undefined) {\n                                    const generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n                                    if (key == null && generatedPrimaryKey != null) {\n                                        key = generatedPrimaryKey;\n                                        req.keys[i] = key;\n                                        if (!primaryKey.outbound) {\n                                            setByKeyPath(req.values[i], primaryKey.keyPath, key);\n                                        }\n                                    }\n                                }\n                                else {\n                                    const objectDiff = getObjectDiff(existingValue, req.values[i]);\n                                    const additionalChanges = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n                                    if (additionalChanges) {\n                                        const requestedValue = req.values[i];\n                                        Object.keys(additionalChanges).forEach(keyPath => {\n                                            if (hasOwn(requestedValue, keyPath)) {\n                                                requestedValue[keyPath] = additionalChanges[keyPath];\n                                            }\n                                            else {\n                                                setByKeyPath(requestedValue, keyPath, additionalChanges[keyPath]);\n                                            }\n                                        });\n                                    }\n                                }\n                                return ctx;\n                            });\n                            return downTable.mutate(req).then(({ failures, results, numFailures, lastResult }) => {\n                                for (let i = 0; i < keys.length; ++i) {\n                                    const primKey = results ? results[i] : keys[i];\n                                    const ctx = contexts[i];\n                                    if (primKey == null) {\n                                        ctx.onerror && ctx.onerror(failures[i]);\n                                    }\n                                    else {\n                                        ctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n                                            req.values[i] :\n                                            primKey\n                                        );\n                                    }\n                                }\n                                return { failures, results, numFailures, lastResult };\n                            }).catch(error => {\n                                contexts.forEach(ctx => ctx.onerror && ctx.onerror(error));\n                                return Promise.reject(error);\n                            });\n                        });\n                    }\n                    function deleteRange(req) {\n                        return deleteNextChunk(req.trans, req.range, 10000);\n                    }\n                    function deleteNextChunk(trans, range, limit) {\n                        return downTable.query({ trans, values: false, query: { index: primaryKey, range }, limit })\n                            .then(({ result }) => {\n                            return addPutOrDelete({ type: 'delete', keys: result, trans }).then(res => {\n                                if (res.numFailures > 0)\n                                    return Promise.reject(res.failures[0]);\n                                if (result.length < limit) {\n                                    return { failures: [], numFailures: 0, lastResult: undefined };\n                                }\n                                else {\n                                    return deleteNextChunk(trans, { ...range, lower: result[result.length - 1], lowerOpen: true }, limit);\n                                }\n                            });\n                        });\n                    }\n                }\n            };\n            return tableMiddleware;\n        },\n    })\n};\nfunction getExistingValues(table, req, effectiveKeys) {\n    return req.type === \"add\"\n        ? Promise.resolve([])\n        : table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n}\n\nfunction getFromTransactionCache(keys, cache, clone) {\n    try {\n        if (!cache)\n            return null;\n        if (cache.keys.length < keys.length)\n            return null;\n        const result = [];\n        for (let i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n            if (cmp(cache.keys[i], keys[j]) !== 0)\n                continue;\n            result.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n            ++j;\n        }\n        return result.length === keys.length ? result : null;\n    }\n    catch (_a) {\n        return null;\n    }\n}\nconst cacheExistingValuesMiddleware = {\n    stack: \"dbcore\",\n    level: -1,\n    create: (core) => {\n        return {\n            table: (tableName) => {\n                const table = core.table(tableName);\n                return {\n                    ...table,\n                    getMany: (req) => {\n                        if (!req.cache) {\n                            return table.getMany(req);\n                        }\n                        const cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n                        if (cachedResult) {\n                            return DexiePromise.resolve(cachedResult);\n                        }\n                        return table.getMany(req).then((res) => {\n                            req.trans[\"_cache\"] = {\n                                keys: req.keys,\n                                values: req.cache === \"clone\" ? deepClone(res) : res,\n                            };\n                            return res;\n                        });\n                    },\n                    mutate: (req) => {\n                        if (req.type !== \"add\")\n                            req.trans[\"_cache\"] = null;\n                        return table.mutate(req);\n                    },\n                };\n            },\n        };\n    },\n};\n\nfunction isEmptyRange(node) {\n    return !(\"from\" in node);\n}\nconst RangeSet = function (fromOrTree, to) {\n    if (this) {\n        extend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n    }\n    else {\n        const rv = new RangeSet();\n        if (fromOrTree && (\"d\" in fromOrTree)) {\n            extend(rv, fromOrTree);\n        }\n        return rv;\n    }\n};\nprops(RangeSet.prototype, {\n    add(rangeSet) {\n        mergeRanges(this, rangeSet);\n        return this;\n    },\n    addKey(key) {\n        addRange(this, key, key);\n        return this;\n    },\n    addKeys(keys) {\n        keys.forEach(key => addRange(this, key, key));\n        return this;\n    },\n    [iteratorSymbol]() {\n        return getRangeSetIterator(this);\n    }\n});\nfunction addRange(target, from, to) {\n    const diff = cmp(from, to);\n    if (isNaN(diff))\n        return;\n    if (diff > 0)\n        throw RangeError();\n    if (isEmptyRange(target))\n        return extend(target, { from, to, d: 1 });\n    const left = target.l;\n    const right = target.r;\n    if (cmp(to, target.from) < 0) {\n        left\n            ? addRange(left, from, to)\n            : (target.l = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.to) > 0) {\n        right\n            ? addRange(right, from, to)\n            : (target.r = { from, to, d: 1, l: null, r: null });\n        return rebalance(target);\n    }\n    if (cmp(from, target.from) < 0) {\n        target.from = from;\n        target.l = null;\n        target.d = right ? right.d + 1 : 1;\n    }\n    if (cmp(to, target.to) > 0) {\n        target.to = to;\n        target.r = null;\n        target.d = target.l ? target.l.d + 1 : 1;\n    }\n    const rightWasCutOff = !target.r;\n    if (left && !target.l) {\n        mergeRanges(target, left);\n    }\n    if (right && rightWasCutOff) {\n        mergeRanges(target, right);\n    }\n}\nfunction mergeRanges(target, newSet) {\n    function _addRangeSet(target, { from, to, l, r }) {\n        addRange(target, from, to);\n        if (l)\n            _addRangeSet(target, l);\n        if (r)\n            _addRangeSet(target, r);\n    }\n    if (!isEmptyRange(newSet))\n        _addRangeSet(target, newSet);\n}\nfunction rangesOverlap(rangeSet1, rangeSet2) {\n    const i1 = getRangeSetIterator(rangeSet2);\n    let nextResult1 = i1.next();\n    if (nextResult1.done)\n        return false;\n    let a = nextResult1.value;\n    const i2 = getRangeSetIterator(rangeSet1);\n    let nextResult2 = i2.next(a.from);\n    let b = nextResult2.value;\n    while (!nextResult1.done && !nextResult2.done) {\n        if (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n            return true;\n        cmp(a.from, b.from) < 0\n            ? (a = (nextResult1 = i1.next(b.from)).value)\n            : (b = (nextResult2 = i2.next(a.from)).value);\n    }\n    return false;\n}\nfunction getRangeSetIterator(node) {\n    let state = isEmptyRange(node) ? null : { s: 0, n: node };\n    return {\n        next(key) {\n            const keyProvided = arguments.length > 0;\n            while (state) {\n                switch (state.s) {\n                    case 0:\n                        state.s = 1;\n                        if (keyProvided) {\n                            while (state.n.l && cmp(key, state.n.from) < 0)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                        else {\n                            while (state.n.l)\n                                state = { up: state, n: state.n.l, s: 1 };\n                        }\n                    case 1:\n                        state.s = 2;\n                        if (!keyProvided || cmp(key, state.n.to) <= 0)\n                            return { value: state.n, done: false };\n                    case 2:\n                        if (state.n.r) {\n                            state.s = 3;\n                            state = { up: state, n: state.n.r, s: 0 };\n                            continue;\n                        }\n                    case 3:\n                        state = state.up;\n                }\n            }\n            return { done: true };\n        },\n    };\n}\nfunction rebalance(target) {\n    var _a, _b;\n    const diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n    const r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n    if (r) {\n        const l = r === \"r\" ? \"l\" : \"r\";\n        const rootClone = { ...target };\n        const oldRootRight = target[r];\n        target.from = oldRootRight.from;\n        target.to = oldRootRight.to;\n        target[r] = oldRootRight[r];\n        rootClone[r] = oldRootRight[l];\n        target[l] = rootClone;\n        rootClone.d = computeDepth(rootClone);\n    }\n    target.d = computeDepth(target);\n}\nfunction computeDepth({ r, l }) {\n    return (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n}\n\nconst observabilityMiddleware = {\n    stack: \"dbcore\",\n    level: 0,\n    create: (core) => {\n        const dbName = core.schema.name;\n        const FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n        return {\n            ...core,\n            table: (tableName) => {\n                const table = core.table(tableName);\n                const { schema } = table;\n                const { primaryKey } = schema;\n                const { extractKey, outbound } = primaryKey;\n                const tableClone = {\n                    ...table,\n                    mutate: (req) => {\n                        const trans = req.trans;\n                        const mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n                        const getRangeSet = (indexName) => {\n                            const part = `idb://${dbName}/${tableName}/${indexName}`;\n                            return (mutatedParts[part] ||\n                                (mutatedParts[part] = new RangeSet()));\n                        };\n                        const pkRangeSet = getRangeSet(\"\");\n                        const delsRangeSet = getRangeSet(\":dels\");\n                        const { type } = req;\n                        let [keys, newObjs] = req.type === \"deleteRange\"\n                            ? [req.range]\n                            : req.type === \"delete\"\n                                ? [req.keys]\n                                : req.values.length < 50\n                                    ? [[], req.values]\n                                    : [];\n                        const oldCache = req.trans[\"_cache\"];\n                        return table.mutate(req).then((res) => {\n                            if (isArray(keys)) {\n                                if (type !== \"delete\")\n                                    keys = res.results;\n                                pkRangeSet.addKeys(keys);\n                                const oldObjs = getFromTransactionCache(keys, oldCache);\n                                if (!oldObjs && type !== \"add\") {\n                                    delsRangeSet.addKeys(keys);\n                                }\n                                if (oldObjs || newObjs) {\n                                    trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n                                }\n                            }\n                            else if (keys) {\n                                const range = { from: keys.lower, to: keys.upper };\n                                delsRangeSet.add(range);\n                                pkRangeSet.add(range);\n                            }\n                            else {\n                                pkRangeSet.add(FULL_RANGE);\n                                delsRangeSet.add(FULL_RANGE);\n                                schema.indexes.forEach(idx => getRangeSet(idx.name).add(FULL_RANGE));\n                            }\n                            return res;\n                        });\n                    },\n                };\n                const getRange = ({ query: { index, range }, }) => {\n                    var _a, _b;\n                    return [\n                        index,\n                        new RangeSet((_a = range.lower) !== null && _a !== void 0 ? _a : core.MIN_KEY, (_b = range.upper) !== null && _b !== void 0 ? _b : core.MAX_KEY),\n                    ];\n                };\n                const readSubscribers = {\n                    get: (req) => [primaryKey, new RangeSet(req.key)],\n                    getMany: (req) => [primaryKey, new RangeSet().addKeys(req.keys)],\n                    count: getRange,\n                    query: getRange,\n                    openCursor: getRange,\n                };\n                keys(readSubscribers).forEach(method => {\n                    tableClone[method] = function (req) {\n                        const { subscr } = PSD;\n                        if (subscr) {\n                            const getRangeSet = (indexName) => {\n                                const part = `idb://${dbName}/${tableName}/${indexName}`;\n                                return (subscr[part] ||\n                                    (subscr[part] = new RangeSet()));\n                            };\n                            const pkRangeSet = getRangeSet(\"\");\n                            const delsRangeSet = getRangeSet(\":dels\");\n                            const [queriedIndex, queriedRanges] = readSubscribers[method](req);\n                            getRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n                            if (!queriedIndex.isPrimaryKey) {\n                                if (method === \"count\") {\n                                    delsRangeSet.add(FULL_RANGE);\n                                }\n                                else {\n                                    const keysPromise = method === \"query\" &&\n                                        outbound &&\n                                        req.values &&\n                                        table.query({\n                                            ...req,\n                                            values: false,\n                                        });\n                                    return table[method].apply(this, arguments).then((res) => {\n                                        if (method === \"query\") {\n                                            if (outbound && req.values) {\n                                                return keysPromise.then(({ result: resultingKeys }) => {\n                                                    pkRangeSet.addKeys(resultingKeys);\n                                                    return res;\n                                                });\n                                            }\n                                            const pKeys = req.values\n                                                ? res.result.map(extractKey)\n                                                : res.result;\n                                            if (req.values) {\n                                                pkRangeSet.addKeys(pKeys);\n                                            }\n                                            else {\n                                                delsRangeSet.addKeys(pKeys);\n                                            }\n                                        }\n                                        else if (method === \"openCursor\") {\n                                            const cursor = res;\n                                            const wantValues = req.values;\n                                            return (cursor &&\n                                                Object.create(cursor, {\n                                                    key: {\n                                                        get() {\n                                                            delsRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.key;\n                                                        },\n                                                    },\n                                                    primaryKey: {\n                                                        get() {\n                                                            const pkey = cursor.primaryKey;\n                                                            delsRangeSet.addKey(pkey);\n                                                            return pkey;\n                                                        },\n                                                    },\n                                                    value: {\n                                                        get() {\n                                                            wantValues && pkRangeSet.addKey(cursor.primaryKey);\n                                                            return cursor.value;\n                                                        },\n                                                    },\n                                                }));\n                                        }\n                                        return res;\n                                    });\n                                }\n                            }\n                        }\n                        return table[method].apply(this, arguments);\n                    };\n                });\n                return tableClone;\n            },\n        };\n    },\n};\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n    function addAffectedIndex(ix) {\n        const rangeSet = getRangeSet(ix.name || \"\");\n        function extractKey(obj) {\n            return obj != null ? ix.extractKey(obj) : null;\n        }\n        const addKeyOrKeys = (key) => ix.multiEntry && isArray(key)\n            ? key.forEach(key => rangeSet.addKey(key))\n            : rangeSet.addKey(key);\n        (oldObjs || newObjs).forEach((_, i) => {\n            const oldKey = oldObjs && extractKey(oldObjs[i]);\n            const newKey = newObjs && extractKey(newObjs[i]);\n            if (cmp(oldKey, newKey) !== 0) {\n                if (oldKey != null)\n                    addKeyOrKeys(oldKey);\n                if (newKey != null)\n                    addKeyOrKeys(newKey);\n            }\n        });\n    }\n    schema.indexes.forEach(addAffectedIndex);\n}\n\nclass Dexie$1 {\n    constructor(name, options) {\n        this._middlewares = {};\n        this.verno = 0;\n        const deps = Dexie$1.dependencies;\n        this._options = options = {\n            addons: Dexie$1.addons,\n            autoOpen: true,\n            indexedDB: deps.indexedDB,\n            IDBKeyRange: deps.IDBKeyRange,\n            ...options\n        };\n        this._deps = {\n            indexedDB: options.indexedDB,\n            IDBKeyRange: options.IDBKeyRange\n        };\n        const { addons, } = options;\n        this._dbSchema = {};\n        this._versions = [];\n        this._storeNames = [];\n        this._allTables = {};\n        this.idbdb = null;\n        this._novip = this;\n        const state = {\n            dbOpenError: null,\n            isBeingOpened: false,\n            onReadyBeingFired: null,\n            openComplete: false,\n            dbReadyResolve: nop,\n            dbReadyPromise: null,\n            cancelOpen: nop,\n            openCanceller: null,\n            autoSchema: true\n        };\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n        this._state = state;\n        this.name = name;\n        this.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n        this.on.ready.subscribe = override(this.on.ready.subscribe, subscribe => {\n            return (subscriber, bSticky) => {\n                Dexie$1.vip(() => {\n                    const state = this._state;\n                    if (state.openComplete) {\n                        if (!state.dbOpenError)\n                            DexiePromise.resolve().then(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else if (state.onReadyBeingFired) {\n                        state.onReadyBeingFired.push(subscriber);\n                        if (bSticky)\n                            subscribe(subscriber);\n                    }\n                    else {\n                        subscribe(subscriber);\n                        const db = this;\n                        if (!bSticky)\n                            subscribe(function unsubscribe() {\n                                db.on.ready.unsubscribe(subscriber);\n                                db.on.ready.unsubscribe(unsubscribe);\n                            });\n                    }\n                });\n            };\n        });\n        this.Collection = createCollectionConstructor(this);\n        this.Table = createTableConstructor(this);\n        this.Transaction = createTransactionConstructor(this);\n        this.Version = createVersionConstructor(this);\n        this.WhereClause = createWhereClauseConstructor(this);\n        this.on(\"versionchange\", ev => {\n            if (ev.newVersion > 0)\n                console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`);\n            else\n                console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`);\n            this.close();\n        });\n        this.on(\"blocked\", ev => {\n            if (!ev.newVersion || ev.newVersion < ev.oldVersion)\n                console.warn(`Dexie.delete('${this.name}') was blocked`);\n            else\n                console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${ev.oldVersion / 10}`);\n        });\n        this._maxKey = getMaxKey(options.IDBKeyRange);\n        this._createTransaction = (mode, storeNames, dbschema, parentTransaction) => new this.Transaction(mode, storeNames, dbschema, this._options.chromeTransactionDurability, parentTransaction);\n        this._fireOnBlocked = ev => {\n            this.on(\"blocked\").fire(ev);\n            connections\n                .filter(c => c.name === this.name && c !== this && !c._state.vcFired)\n                .map(c => c.on(\"versionchange\").fire(ev));\n        };\n        this.use(virtualIndexMiddleware);\n        this.use(hooksMiddleware);\n        this.use(observabilityMiddleware);\n        this.use(cacheExistingValuesMiddleware);\n        this.vip = Object.create(this, { _vip: { value: true } });\n        addons.forEach(addon => addon(this));\n    }\n    version(versionNumber) {\n        if (isNaN(versionNumber) || versionNumber < 0.1)\n            throw new exceptions.Type(`Given version is not a positive number`);\n        versionNumber = Math.round(versionNumber * 10) / 10;\n        if (this.idbdb || this._state.isBeingOpened)\n            throw new exceptions.Schema(\"Cannot add version when database is open\");\n        this.verno = Math.max(this.verno, versionNumber);\n        const versions = this._versions;\n        var versionInstance = versions.filter(v => v._cfg.version === versionNumber)[0];\n        if (versionInstance)\n            return versionInstance;\n        versionInstance = new this.Version(versionNumber);\n        versions.push(versionInstance);\n        versions.sort(lowerVersionFirst);\n        versionInstance.stores({});\n        this._state.autoSchema = false;\n        return versionInstance;\n    }\n    _whenReady(fn) {\n        return (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise((resolve, reject) => {\n            if (this._state.openComplete) {\n                return reject(new exceptions.DatabaseClosed(this._state.dbOpenError));\n            }\n            if (!this._state.isBeingOpened) {\n                if (!this._options.autoOpen) {\n                    reject(new exceptions.DatabaseClosed());\n                    return;\n                }\n                this.open().catch(nop);\n            }\n            this._state.dbReadyPromise.then(resolve, reject);\n        }).then(fn);\n    }\n    use({ stack, create, level, name }) {\n        if (name)\n            this.unuse({ stack, name });\n        const middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n        middlewares.push({ stack, create, level: level == null ? 10 : level, name });\n        middlewares.sort((a, b) => a.level - b.level);\n        return this;\n    }\n    unuse({ stack, name, create }) {\n        if (stack && this._middlewares[stack]) {\n            this._middlewares[stack] = this._middlewares[stack].filter(mw => create ? mw.create !== create :\n                name ? mw.name !== name :\n                    false);\n        }\n        return this;\n    }\n    open() {\n        return dexieOpen(this);\n    }\n    _close() {\n        const state = this._state;\n        const idx = connections.indexOf(this);\n        if (idx >= 0)\n            connections.splice(idx, 1);\n        if (this.idbdb) {\n            try {\n                this.idbdb.close();\n            }\n            catch (e) { }\n            this._novip.idbdb = null;\n        }\n        state.dbReadyPromise = new DexiePromise(resolve => {\n            state.dbReadyResolve = resolve;\n        });\n        state.openCanceller = new DexiePromise((_, reject) => {\n            state.cancelOpen = reject;\n        });\n    }\n    close() {\n        this._close();\n        const state = this._state;\n        this._options.autoOpen = false;\n        state.dbOpenError = new exceptions.DatabaseClosed();\n        if (state.isBeingOpened)\n            state.cancelOpen(state.dbOpenError);\n    }\n    delete() {\n        const hasArguments = arguments.length > 0;\n        const state = this._state;\n        return new DexiePromise((resolve, reject) => {\n            const doDelete = () => {\n                this.close();\n                var req = this._deps.indexedDB.deleteDatabase(this.name);\n                req.onsuccess = wrap(() => {\n                    _onDatabaseDeleted(this._deps, this.name);\n                    resolve();\n                });\n                req.onerror = eventRejectHandler(reject);\n                req.onblocked = this._fireOnBlocked;\n            };\n            if (hasArguments)\n                throw new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n            if (state.isBeingOpened) {\n                state.dbReadyPromise.then(doDelete);\n            }\n            else {\n                doDelete();\n            }\n        });\n    }\n    backendDB() {\n        return this.idbdb;\n    }\n    isOpen() {\n        return this.idbdb !== null;\n    }\n    hasBeenClosed() {\n        const dbOpenError = this._state.dbOpenError;\n        return dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n    }\n    hasFailed() {\n        return this._state.dbOpenError !== null;\n    }\n    dynamicallyOpened() {\n        return this._state.autoSchema;\n    }\n    get tables() {\n        return keys(this._allTables).map(name => this._allTables[name]);\n    }\n    transaction() {\n        const args = extractTransactionArgs.apply(this, arguments);\n        return this._transaction.apply(this, args);\n    }\n    _transaction(mode, tables, scopeFunc) {\n        let parentTransaction = PSD.trans;\n        if (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n            parentTransaction = null;\n        const onlyIfCompatible = mode.indexOf('?') !== -1;\n        mode = mode.replace('!', '').replace('?', '');\n        let idbMode, storeNames;\n        try {\n            storeNames = tables.map(table => {\n                var storeName = table instanceof this.Table ? table.name : table;\n                if (typeof storeName !== 'string')\n                    throw new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n                return storeName;\n            });\n            if (mode == \"r\" || mode === READONLY)\n                idbMode = READONLY;\n            else if (mode == \"rw\" || mode == READWRITE)\n                idbMode = READWRITE;\n            else\n                throw new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n            if (parentTransaction) {\n                if (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n                    if (onlyIfCompatible) {\n                        parentTransaction = null;\n                    }\n                    else\n                        throw new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n                }\n                if (parentTransaction) {\n                    storeNames.forEach(storeName => {\n                        if (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n                            if (onlyIfCompatible) {\n                                parentTransaction = null;\n                            }\n                            else\n                                throw new exceptions.SubTransaction(\"Table \" + storeName +\n                                    \" not included in parent transaction.\");\n                        }\n                    });\n                }\n                if (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n                    parentTransaction = null;\n                }\n            }\n        }\n        catch (e) {\n            return parentTransaction ?\n                parentTransaction._promise(null, (_, reject) => { reject(e); }) :\n                rejection(e);\n        }\n        const enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n        return (parentTransaction ?\n            parentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n            PSD.trans ?\n                usePSD(PSD.transless, () => this._whenReady(enterTransaction)) :\n                this._whenReady(enterTransaction));\n    }\n    table(tableName) {\n        if (!hasOwn(this._allTables, tableName)) {\n            throw new exceptions.InvalidTable(`Table ${tableName} does not exist`);\n        }\n        return this._allTables[tableName];\n    }\n}\n\nconst symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n    ? Symbol.observable\n    : \"@@observable\";\nclass Observable {\n    constructor(subscribe) {\n        this._subscribe = subscribe;\n    }\n    subscribe(x, error, complete) {\n        return this._subscribe(!x || typeof x === \"function\" ? { next: x, error, complete } : x);\n    }\n    [symbolObservable]() {\n        return this;\n    }\n}\n\nfunction extendObservabilitySet(target, newSet) {\n    keys(newSet).forEach(part => {\n        const rangeSet = target[part] || (target[part] = new RangeSet());\n        mergeRanges(rangeSet, newSet[part]);\n    });\n    return target;\n}\n\nfunction liveQuery(querier) {\n    return new Observable((observer) => {\n        const scopeFuncIsAsync = isAsyncFunction(querier);\n        function execute(subscr) {\n            if (scopeFuncIsAsync) {\n                incrementExpectedAwaits();\n            }\n            const exec = () => newScope(querier, { subscr, trans: null });\n            const rv = PSD.trans\n                ?\n                    usePSD(PSD.transless, exec)\n                : exec();\n            if (scopeFuncIsAsync) {\n                rv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n            }\n            return rv;\n        }\n        let closed = false;\n        let accumMuts = {};\n        let currentObs = {};\n        const subscription = {\n            get closed() {\n                return closed;\n            },\n            unsubscribe: () => {\n                closed = true;\n                globalEvents.storagemutated.unsubscribe(mutationListener);\n            },\n        };\n        observer.start && observer.start(subscription);\n        let querying = false, startedListening = false;\n        function shouldNotify() {\n            return keys(currentObs).some((key) => accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]));\n        }\n        const mutationListener = (parts) => {\n            extendObservabilitySet(accumMuts, parts);\n            if (shouldNotify()) {\n                doQuery();\n            }\n        };\n        const doQuery = () => {\n            if (querying || closed)\n                return;\n            accumMuts = {};\n            const subscr = {};\n            const ret = execute(subscr);\n            if (!startedListening) {\n                globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n                startedListening = true;\n            }\n            querying = true;\n            Promise.resolve(ret).then((result) => {\n                querying = false;\n                if (closed)\n                    return;\n                if (shouldNotify()) {\n                    doQuery();\n                }\n                else {\n                    accumMuts = {};\n                    currentObs = subscr;\n                    observer.next && observer.next(result);\n                }\n            }, (err) => {\n                querying = false;\n                observer.error && observer.error(err);\n                subscription.unsubscribe();\n            });\n        };\n        doQuery();\n        return subscription;\n    });\n}\n\nlet domDeps;\ntry {\n    domDeps = {\n        indexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n        IDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n    };\n}\ncatch (e) {\n    domDeps = { indexedDB: null, IDBKeyRange: null };\n}\n\nconst Dexie = Dexie$1;\nprops(Dexie, {\n    ...fullNameExceptions,\n    delete(databaseName) {\n        const db = new Dexie(databaseName, { addons: [] });\n        return db.delete();\n    },\n    exists(name) {\n        return new Dexie(name, { addons: [] }).open().then(db => {\n            db.close();\n            return true;\n        }).catch('NoSuchDatabaseError', () => false);\n    },\n    getDatabaseNames(cb) {\n        try {\n            return getDatabaseNames(Dexie.dependencies).then(cb);\n        }\n        catch (_a) {\n            return rejection(new exceptions.MissingAPI());\n        }\n    },\n    defineClass() {\n        function Class(content) {\n            extend(this, content);\n        }\n        return Class;\n    },\n    ignoreTransaction(scopeFunc) {\n        return PSD.trans ?\n            usePSD(PSD.transless, scopeFunc) :\n            scopeFunc();\n    },\n    vip,\n    async: function (generatorFn) {\n        return function () {\n            try {\n                var rv = awaitIterator(generatorFn.apply(this, arguments));\n                if (!rv || typeof rv.then !== 'function')\n                    return DexiePromise.resolve(rv);\n                return rv;\n            }\n            catch (e) {\n                return rejection(e);\n            }\n        };\n    },\n    spawn: function (generatorFn, args, thiz) {\n        try {\n            var rv = awaitIterator(generatorFn.apply(thiz, args || []));\n            if (!rv || typeof rv.then !== 'function')\n                return DexiePromise.resolve(rv);\n            return rv;\n        }\n        catch (e) {\n            return rejection(e);\n        }\n    },\n    currentTransaction: {\n        get: () => PSD.trans || null\n    },\n    waitFor: function (promiseOrFunction, optionalTimeout) {\n        const promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n            Dexie.ignoreTransaction(promiseOrFunction) :\n            promiseOrFunction)\n            .timeout(optionalTimeout || 60000);\n        return PSD.trans ?\n            PSD.trans.waitFor(promise) :\n            promise;\n    },\n    Promise: DexiePromise,\n    debug: {\n        get: () => debug,\n        set: value => {\n            setDebug(value, value === 'dexie' ? () => true : dexieStackFrameFilter);\n        }\n    },\n    derive: derive,\n    extend: extend,\n    props: props,\n    override: override,\n    Events: Events,\n    on: globalEvents,\n    liveQuery,\n    extendObservabilitySet,\n    getByKeyPath: getByKeyPath,\n    setByKeyPath: setByKeyPath,\n    delByKeyPath: delByKeyPath,\n    shallowClone: shallowClone,\n    deepClone: deepClone,\n    getObjectDiff: getObjectDiff,\n    cmp,\n    asap: asap$1,\n    minKey: minKey,\n    addons: [],\n    connections: connections,\n    errnames: errnames,\n    dependencies: domDeps,\n    semVer: DEXIE_VERSION,\n    version: DEXIE_VERSION.split('.')\n        .map(n => parseInt(n))\n        .reduce((p, c, i) => p + (c / Math.pow(10, i * 2))),\n});\nDexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\nif (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, updatedParts => {\n        if (!propagatingLocally) {\n            let event;\n            if (isIEOrEdge) {\n                event = document.createEvent('CustomEvent');\n                event.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n            }\n            else {\n                event = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n                    detail: updatedParts\n                });\n            }\n            propagatingLocally = true;\n            dispatchEvent(event);\n            propagatingLocally = false;\n        }\n    });\n    addEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, ({ detail }) => {\n        if (!propagatingLocally) {\n            propagateLocally(detail);\n        }\n    });\n}\nfunction propagateLocally(updateParts) {\n    let wasMe = propagatingLocally;\n    try {\n        propagatingLocally = true;\n        globalEvents.storagemutated.fire(updateParts);\n    }\n    finally {\n        propagatingLocally = wasMe;\n    }\n}\nlet propagatingLocally = false;\n\nif (typeof BroadcastChannel !== 'undefined') {\n    const bc = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        if (!propagatingLocally) {\n            bc.postMessage(changedParts);\n        }\n    });\n    bc.onmessage = (ev) => {\n        if (ev.data)\n            propagateLocally(ev.data);\n    };\n}\nelse if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n    globalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, (changedParts) => {\n        try {\n            if (!propagatingLocally) {\n                if (typeof localStorage !== 'undefined') {\n                    localStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n                        trig: Math.random(),\n                        changedParts,\n                    }));\n                }\n                if (typeof self['clients'] === 'object') {\n                    [...self['clients'].matchAll({ includeUncontrolled: true })].forEach((client) => client.postMessage({\n                        type: STORAGE_MUTATED_DOM_EVENT_NAME,\n                        changedParts,\n                    }));\n                }\n            }\n        }\n        catch (_a) { }\n    });\n    addEventListener('storage', (ev) => {\n        if (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n            const data = JSON.parse(ev.newValue);\n            if (data)\n                propagateLocally(data.changedParts);\n        }\n    });\n    const swContainer = self.document && navigator.serviceWorker;\n    if (swContainer) {\n        swContainer.addEventListener('message', propagateMessageLocally);\n    }\n}\nfunction propagateMessageLocally({ data }) {\n    if (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n        propagateLocally(data.changedParts);\n    }\n}\n\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\nexport { Dexie$1 as Dexie, RangeSet, Dexie$1 as default, liveQuery, mergeRanges, rangesOverlap };\n//# sourceMappingURL=dexie.mjs.map\n","/* ========================================================================== \n *                           dexie-export-import.js\n * ==========================================================================\n *\n * Dexie addon for exporting and importing databases to / from Blobs.\n *\n * By David Fahlander, david.fahlander@gmail.com,\n *\n * ==========================================================================\n *\n * Version 1.0.3, Fri Jul 02 2021\n *\n * http://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n * \n */\n\nimport Dexie from 'dexie';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nfunction getSchemaString(table) {\n    var primKeyAndIndexes = [table.schema.primKey].concat(table.schema.indexes);\n    return primKeyAndIndexes.map(function (index) { return index.src; }).join(',');\n}\nfunction extractDbSchema(exportedDb) {\n    var schema = {};\n    for (var _i = 0, _a = exportedDb.tables; _i < _a.length; _i++) {\n        var table = _a[_i];\n        schema[table.name] = table.schema;\n    }\n    return schema;\n}\nfunction readBlobAsync(blob, type) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onabort = function (ev) { return reject(new Error(\"file read aborted\")); };\n        reader.onerror = function (ev) { return reject(ev.target.error); };\n        reader.onload = function (ev) { return resolve(ev.target.result); };\n        if (type === 'binary')\n            reader.readAsArrayBuffer(blob);\n        else\n            reader.readAsText(blob);\n    });\n}\nfunction readBlobSync(blob, type) {\n    if (typeof FileReaderSync === 'undefined') {\n        throw new Error('FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.');\n    }\n    var reader = new FileReaderSync(); // Requires worker environment\n    var data = type === 'binary' ?\n        reader.readAsArrayBuffer(blob) :\n        reader.readAsText(blob);\n    return data;\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar typeson = createCommonjsModule(function (module, exports) {\n!function(e,n){module.exports=n();}(commonjsGlobal,function(){var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},n=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(t.push(s.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e;}finally{try{!r&&c.return&&c.return();}finally{if(i)throw o}}return t}(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),t=function(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,s=Object.getPrototypeOf,c={}.hasOwnProperty,a=c.toString,u=[\"type\",\"replaced\",\"iterateIn\",\"iterateUnsetNumeric\"];function isThenable(e,n){return Typeson.isObject(e)&&\"function\"==typeof e.then&&(!n||\"function\"==typeof e.catch)}function toStringTag(e){return o.call(e).slice(8,-1)}function hasConstructorOf(n,t){if(!n||\"object\"!==(void 0===n?\"undefined\":e(n)))return !1;var r=s(n);if(!r)return !1;var i=c.call(r,\"constructor\")&&r.constructor;return \"function\"!=typeof i?null===t:\"function\"==typeof i&&null!==t&&a.call(i)===a.call(t)}function isPlainObject(e){return !(!e||\"Object\"!==toStringTag(e))&&(!s(e)||hasConstructorOf(e,Object))}function isObject(n){return n&&\"object\"===(void 0===n?\"undefined\":e(n))}function Typeson(o){var s=[],c=[],a={},y=this.types={},p=this.stringify=function(e,n,t,r){r=Object.assign({},o,r,{stringification:!0});var s=l(e,null,r);return i(s)?JSON.stringify(s[0],n,t):s.then(function(e){return JSON.stringify(e,n,t)})};this.stringifySync=function(e,n,t,r){return p(e,n,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,n,t,r){return p(e,n,t,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var f=this.parse=function(e,n,t){return t=Object.assign({},o,t,{parse:!0}),h(JSON.parse(e,n),t)};this.parseSync=function(e,n,t){return f(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.parseAsync=function(e,n,t){return f(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.specialTypeNames=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.returnTypeNames=!0,this.encapsulate(e,n,t)},this.rootTypeName=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.iterateNone=!0,this.encapsulate(e,n,t)};var l=this.encapsulate=function(y,p,f){var l=(f=Object.assign({sync:!0},o,f)).sync,h={},v=[],d=[],b=[],O=!(f&&\"cyclic\"in f)||f.cyclic,m=f.encapsulateObserver,T=_encapsulate(\"\",y,O,p||{},b);function finish(e){var n=Object.values(h);if(f.iterateNone)return n.length?n[0]:Typeson.getJSONType(e);if(n.length){if(f.returnTypeNames)return [].concat(t(new Set(n)));e&&isPlainObject(e)&&!e.hasOwnProperty(\"$types\")?e.$types=h:e={$:e,$types:{$:h}};}else isObject(e)&&e.hasOwnProperty(\"$types\")&&(e={$:e,$types:!0});return !f.returnTypeNames&&e}return b.length?l&&f.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():Promise.resolve(function checkPromises(e,t){return Promise.all(t.map(function(e){return e[1].p})).then(function(r){return Promise.all(r.map(function(r){var i=[],o=t.splice(0,1)[0],s=n(o,7),c=s[0],a=s[2],u=s[3],y=s[4],p=s[5],f=s[6],l=_encapsulate(c,r,a,u,i,!0,f),h=hasConstructorOf(l,TypesonPromise);return c&&h?l.p.then(function(n){return y[p]=n,checkPromises(e,i)}):(c?y[p]=l:e=h?l.p:l,checkPromises(e,i))}))}).then(function(){return e})}(T,b)).then(finish):!l&&f.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():f.stringification&&l?[finish(T)]:l?finish(T):Promise.resolve(finish(T));function _adaptBuiltinStateObjectProperties(e,n,t){Object.assign(e,n);var r=u.map(function(n){var t=e[n];return delete e[n],t});t(),u.forEach(function(n,t){e[n]=r[t];});}function _encapsulate(n,t,o,c,a,u,y){var p=void 0,l={},b=void 0===t?\"undefined\":e(t),O=m?function(e){var r=y||c.type||Typeson.getJSONType(t);m(Object.assign(e||l,{keypath:n,value:t,cyclic:o,stateObj:c,promisesData:a,resolvingTypesonPromise:u,awaitingTypesonPromise:hasConstructorOf(t,TypesonPromise)},void 0!==r?{type:r}:{}));}:null;if(b in{string:1,boolean:1,number:1,undefined:1})return void 0===t||\"number\"===b&&(isNaN(t)||t===-1/0||t===1/0)?(p=replace(n,t,c,a,!1,u,O))!==t&&(l={replaced:p}):p=t,O&&O(),p;if(null===t)return O&&O(),t;if(o&&!c.iterateIn&&!c.iterateUnsetNumeric){var T=v.indexOf(t);if(!(T<0))return h[n]=\"#\",O&&O({cyclicKeypath:d[T]}),\"#\"+d[T];!0===o&&(v.push(t),d.push(n));}var g=isPlainObject(t),P=i(t),j=(g||P)&&(!s.length||c.replaced)||c.iterateIn?t:replace(n,t,c,a,g||P,null,O),S=void 0;if(j!==t?(p=j,l={replaced:j}):P||\"array\"===c.iterateIn?(S=new Array(t.length),l={clone:S}):g||\"object\"===c.iterateIn?l={clone:S={}}:\"\"===n&&hasConstructorOf(t,TypesonPromise)?(a.push([n,t,o,c,void 0,void 0,c.type]),p=t):p=t,O&&O(),f.iterateNone)return S||p;if(!S)return p;if(c.iterateIn){var w=function _loop(e){var r={ownKeys:t.hasOwnProperty(e)};_adaptBuiltinStateObjectProperties(c,r,function(){var r=n+(n?\".\":\"\")+escapeKeyPathComponent(e),i=_encapsulate(r,t[e],!!o,c,a,u);hasConstructorOf(i,TypesonPromise)?a.push([r,i,!!o,c,S,e,c.type]):void 0!==i&&(S[e]=i);});};for(var A in t)w(A);O&&O({endIterateIn:!0,end:!0});}else r(t).forEach(function(e){var r=n+(n?\".\":\"\")+escapeKeyPathComponent(e);_adaptBuiltinStateObjectProperties(c,{ownKeys:!0},function(){var n=_encapsulate(r,t[e],!!o,c,a,u);hasConstructorOf(n,TypesonPromise)?a.push([r,n,!!o,c,S,e,c.type]):void 0!==n&&(S[e]=n);});}),O&&O({endIterateOwn:!0,end:!0});if(c.iterateUnsetNumeric){for(var C=t.length,N=function _loop2(e){if(!(e in t)){var r=n+(n?\".\":\"\")+e;_adaptBuiltinStateObjectProperties(c,{ownKeys:!1},function(){var n=_encapsulate(r,void 0,!!o,c,a,u);hasConstructorOf(n,TypesonPromise)?a.push([r,n,!!o,c,S,e,c.type]):void 0!==n&&(S[e]=n);});}},B=0;B<C;B++)N(B);O&&O({endIterateUnsetNumeric:!0,end:!0});}return S}function replace(e,n,t,r,i,o,u){for(var y=i?s:c,p=y.length;p--;){var f=y[p];if(f.test(n,t)){var v=f.type;if(a[v]){var d=h[e];h[e]=d?[v].concat(d):v;}return Object.assign(t,{type:v,replaced:!0}),!l&&f.replaceAsync||f.replace?(u&&u({replacing:!0}),_encapsulate(e,f[l||!f.replaceAsync?\"replace\":\"replaceAsync\"](n,t),O&&\"readonly\",t,r,o,v)):(u&&u({typeDetected:!0}),_encapsulate(e,n,O&&\"readonly\",t,r,o,v))}}return n}};this.encapsulateSync=function(e,n,t){return l(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.encapsulateAsync=function(e,n,t){return l(e,n,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))};var h=this.revive=function(e,t){var s=(t=Object.assign({sync:!0},o,t)).sync,c=e&&e.$types,u=!0;if(!c)return e;if(!0===c)return e.$;c.$&&isPlainObject(c.$)&&(e=e.$,c=c.$,u=!1);var y=[],p={},f=function _revive(e,t,o,s,f,l){if(u&&\"$types\"===e)return;var h=c[e];if(i(t)||isPlainObject(t)){var v=i(t)?new Array(t.length):{};for(r(t).forEach(function(n){var r=_revive(e+(e?\".\":\"\")+escapeKeyPathComponent(n),t[n],o||v,s,v,n);hasConstructorOf(r,Undefined)?v[n]=void 0:void 0!==r&&(v[n]=r);}),t=v;y.length;){var d=n(y[0],4),b=d[0],O=d[1],m=d[2],T=d[3],g=getByKeyPath(b,O);if(hasConstructorOf(g,Undefined))m[T]=void 0;else {if(void 0===g)break;m[T]=g;}y.splice(0,1);}}if(!h)return t;if(\"#\"===h){var P=getByKeyPath(o,t.substr(1));return void 0===P&&y.push([o,t.substr(1),f,l]),P}var j=s.sync;return [].concat(h).reduce(function(e,n){var t=a[n];if(!t)throw new Error(\"Unregistered type: \"+n);return t[j&&t.revive?\"revive\":!j&&t.reviveAsync?\"reviveAsync\":\"revive\"](e,p)},t)}(\"\",e,null,t);return isThenable(f=hasConstructorOf(f,Undefined)?void 0:f)?s&&t.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():f:!s&&t.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():s?f:Promise.resolve(f)};this.reviveSync=function(e,n){return h(e,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.reviveAsync=function(e,n){return h(e,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.register=function(e,n){return n=n||{},[].concat(e).forEach(function R(e){if(i(e))return e.map(R);e&&r(e).forEach(function(t){if(\"#\"===t)throw new TypeError(\"# cannot be used as a type name as it is reserved for cyclic objects\");if(Typeson.JSON_TYPES.includes(t))throw new TypeError(\"Plain JSON object types are reserved as type names\");var r=e[t],o=r.testPlainObjects?s:c,u=o.filter(function(e){return e.type===t});if(u.length&&(o.splice(o.indexOf(u[0]),1),delete a[t],delete y[t]),r){if(\"function\"==typeof r){var p=r;r={test:function test(e){return e&&e.constructor===p},replace:function replace(e){return assign({},e)},revive:function revive(e){return assign(Object.create(p.prototype),e)}};}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var f={type:t,test:r.test.bind(r)};r.replace&&(f.replace=r.replace.bind(r)),r.replaceAsync&&(f.replaceAsync=r.replaceAsync.bind(r));var l=\"number\"==typeof n.fallback?n.fallback:n.fallback?0:1/0;if(r.testPlainObjects?s.splice(l,0,f):c.splice(l,0,f),r.revive||r.reviveAsync){var h={};r.revive&&(h.revive=r.revive.bind(r)),r.reviveAsync&&(h.reviveAsync=r.reviveAsync.bind(r)),a[t]=h;}y[t]=r;}});}),this};}function assign(e,n){return r(n).map(function(t){e[t]=n[t];}),e}function escapeKeyPathComponent(e){return e.replace(/~/g,\"~0\").replace(/\\./g,\"~1\")}function unescapeKeyPathComponent(e){return e.replace(/~1/g,\".\").replace(/~0/g,\"~\")}function getByKeyPath(e,n){if(\"\"===n)return e;var t=n.indexOf(\".\");if(t>-1){var r=e[unescapeKeyPathComponent(n.substr(0,t))];return void 0===r?void 0:getByKeyPath(r,n.substr(t+1))}return e[unescapeKeyPathComponent(n)]}function Undefined(){}function TypesonPromise(e){this.p=new Promise(e);}return TypesonPromise.prototype.then=function(e,n){var t=this;return new TypesonPromise(function(r,i){t.p.then(function(n){r(e?e(n):n);},function(e){t.p.catch(function(e){return n?n(e):Promise.reject(e)}).then(r,i);});})},TypesonPromise.prototype.catch=function(e){return this.then(null,e)},TypesonPromise.resolve=function(e){return new TypesonPromise(function(n){n(e);})},TypesonPromise.reject=function(e){return new TypesonPromise(function(n,t){t(e);})},[\"all\",\"race\"].map(function(e){TypesonPromise[e]=function(n){return new TypesonPromise(function(t,r){Promise[e](n.map(function(e){return e.p})).then(t,r);})};}),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(e){if(!e||\"Object\"!==toStringTag(e))return !1;var n=s(e);return !n||hasConstructorOf(e,Object)||isUserObject(n)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(n){return null===n?\"null\":i(n)?\"array\":void 0===n?\"undefined\":e(n)},Typeson.JSON_TYPES=[\"null\",\"boolean\",\"number\",\"string\",\"array\",\"object\"],Typeson});\n});\n\nvar structuredCloning = createCommonjsModule(function (module, exports) {\n!function(e,t){module.exports=t();}(commonjsGlobal,function(){var e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function sliceIterator(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e;}finally{try{!r&&a.return&&a.return();}finally{if(i)throw o}}return n}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),n=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},r=Object.keys,i=Array.isArray,o={}.toString,s=Object.getPrototypeOf,a={}.hasOwnProperty,c=a.toString,u=[\"type\",\"replaced\",\"iterateIn\",\"iterateUnsetNumeric\"];function isThenable(e,t){return Typeson.isObject(e)&&\"function\"==typeof e.then&&(!t||\"function\"==typeof e.catch)}function toStringTag(e){return o.call(e).slice(8,-1)}function hasConstructorOf(t,n){if(!t||\"object\"!==(void 0===t?\"undefined\":e(t)))return !1;var r=s(t);if(!r)return !1;var i=a.call(r,\"constructor\")&&r.constructor;return \"function\"!=typeof i?null===n:\"function\"==typeof i&&null!==n&&c.call(i)===c.call(n)}function isPlainObject(e){return !(!e||\"Object\"!==toStringTag(e))&&(!s(e)||hasConstructorOf(e,Object))}function isObject(t){return t&&\"object\"===(void 0===t?\"undefined\":e(t))}function Typeson(o){var s=[],a=[],c={},f=this.types={},p=this.stringify=function(e,t,n,r){r=Object.assign({},o,r,{stringification:!0});var s=y(e,null,r);return i(s)?JSON.stringify(s[0],t,n):s.then(function(e){return JSON.stringify(e,t,n)})};this.stringifySync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!0}))},this.stringifyAsync=function(e,t,n,r){return p(e,t,n,Object.assign({},{throwOnBadSyncType:!0},r,{sync:!1}))};var l=this.parse=function(e,t,n){return n=Object.assign({},o,n,{parse:!0}),v(JSON.parse(e,t),n)};this.parseSync=function(e,t,n){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.parseAsync=function(e,t,n){return l(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))},this.specialTypeNames=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)},this.rootTypeName=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)};var y=this.encapsulate=function(f,p,l){var y=(l=Object.assign({sync:!0},o,l)).sync,v={},d=[],h=[],g=[],b=!(l&&\"cyclic\"in l)||l.cyclic,m=l.encapsulateObserver,T=_encapsulate(\"\",f,b,p||{},g);function finish(e){var t=Object.values(v);if(l.iterateNone)return t.length?t[0]:Typeson.getJSONType(e);if(t.length){if(l.returnTypeNames)return [].concat(n(new Set(t)));e&&isPlainObject(e)&&!e.hasOwnProperty(\"$types\")?e.$types=v:e={$:e,$types:{$:v}};}else isObject(e)&&e.hasOwnProperty(\"$types\")&&(e={$:e,$types:!0});return !l.returnTypeNames&&e}return g.length?y&&l.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():Promise.resolve(function checkPromises(e,n){return Promise.all(n.map(function(e){return e[1].p})).then(function(r){return Promise.all(r.map(function(r){var i=[],o=n.splice(0,1)[0],s=t(o,7),a=s[0],c=s[2],u=s[3],f=s[4],p=s[5],l=s[6],y=_encapsulate(a,r,c,u,i,!0,l),v=hasConstructorOf(y,TypesonPromise);return a&&v?y.p.then(function(t){return f[p]=t,checkPromises(e,i)}):(a?f[p]=y:e=v?y.p:y,checkPromises(e,i))}))}).then(function(){return e})}(T,g)).then(finish):!y&&l.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():l.stringification&&y?[finish(T)]:y?finish(T):Promise.resolve(finish(T));function _adaptBuiltinStateObjectProperties(e,t,n){Object.assign(e,t);var r=u.map(function(t){var n=e[t];return delete e[t],n});n(),u.forEach(function(t,n){e[t]=r[n];});}function _encapsulate(t,n,o,a,c,u,f){var p=void 0,y={},g=void 0===n?\"undefined\":e(n),b=m?function(e){var r=f||a.type||Typeson.getJSONType(n);m(Object.assign(e||y,{keypath:t,value:n,cyclic:o,stateObj:a,promisesData:c,resolvingTypesonPromise:u,awaitingTypesonPromise:hasConstructorOf(n,TypesonPromise)},void 0!==r?{type:r}:{}));}:null;if(g in{string:1,boolean:1,number:1,undefined:1})return void 0===n||\"number\"===g&&(isNaN(n)||n===-1/0||n===1/0)?(p=replace(t,n,a,c,!1,u,b))!==n&&(y={replaced:p}):p=n,b&&b(),p;if(null===n)return b&&b(),n;if(o&&!a.iterateIn&&!a.iterateUnsetNumeric){var T=d.indexOf(n);if(!(T<0))return v[t]=\"#\",b&&b({cyclicKeypath:h[T]}),\"#\"+h[T];!0===o&&(d.push(n),h.push(t));}var O=isPlainObject(n),w=i(n),S=(O||w)&&(!s.length||a.replaced)||a.iterateIn?n:replace(t,n,a,c,O||w,null,b),P=void 0;if(S!==n?(p=S,y={replaced:S}):w||\"array\"===a.iterateIn?(P=new Array(n.length),y={clone:P}):O||\"object\"===a.iterateIn?y={clone:P={}}:\"\"===t&&hasConstructorOf(n,TypesonPromise)?(c.push([t,n,o,a,void 0,void 0,a.type]),p=n):p=n,b&&b(),l.iterateNone)return P||p;if(!P)return p;if(a.iterateIn){var j=function _loop(e){var r={ownKeys:n.hasOwnProperty(e)};_adaptBuiltinStateObjectProperties(a,r,function(){var r=t+(t?\".\":\"\")+escapeKeyPathComponent(e),i=_encapsulate(r,n[e],!!o,a,c,u);hasConstructorOf(i,TypesonPromise)?c.push([r,i,!!o,a,P,e,a.type]):void 0!==i&&(P[e]=i);});};for(var A in n)j(A);b&&b({endIterateIn:!0,end:!0});}else r(n).forEach(function(e){var r=t+(t?\".\":\"\")+escapeKeyPathComponent(e);_adaptBuiltinStateObjectProperties(a,{ownKeys:!0},function(){var t=_encapsulate(r,n[e],!!o,a,c,u);hasConstructorOf(t,TypesonPromise)?c.push([r,t,!!o,a,P,e,a.type]):void 0!==t&&(P[e]=t);});}),b&&b({endIterateOwn:!0,end:!0});if(a.iterateUnsetNumeric){for(var C=n.length,N=function _loop2(e){if(!(e in n)){var r=t+(t?\".\":\"\")+e;_adaptBuiltinStateObjectProperties(a,{ownKeys:!1},function(){var t=_encapsulate(r,void 0,!!o,a,c,u);hasConstructorOf(t,TypesonPromise)?c.push([r,t,!!o,a,P,e,a.type]):void 0!==t&&(P[e]=t);});}},B=0;B<C;B++)N(B);b&&b({endIterateUnsetNumeric:!0,end:!0});}return P}function replace(e,t,n,r,i,o,u){for(var f=i?s:a,p=f.length;p--;){var l=f[p];if(l.test(t,n)){var d=l.type;if(c[d]){var h=v[e];v[e]=h?[d].concat(h):d;}return Object.assign(n,{type:d,replaced:!0}),!y&&l.replaceAsync||l.replace?(u&&u({replacing:!0}),_encapsulate(e,l[y||!l.replaceAsync?\"replace\":\"replaceAsync\"](t,n),b&&\"readonly\",n,r,o,d)):(u&&u({typeDetected:!0}),_encapsulate(e,t,b&&\"readonly\",n,r,o,d))}}return t}};this.encapsulateSync=function(e,t,n){return y(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!0}))},this.encapsulateAsync=function(e,t,n){return y(e,t,Object.assign({},{throwOnBadSyncType:!0},n,{sync:!1}))};var v=this.revive=function(e,n){var s=(n=Object.assign({sync:!0},o,n)).sync,a=e&&e.$types,u=!0;if(!a)return e;if(!0===a)return e.$;a.$&&isPlainObject(a.$)&&(e=e.$,a=a.$,u=!1);var f=[],p={},l=function _revive(e,n,o,s,l,y){if(u&&\"$types\"===e)return;var v=a[e];if(i(n)||isPlainObject(n)){var d=i(n)?new Array(n.length):{};for(r(n).forEach(function(t){var r=_revive(e+(e?\".\":\"\")+escapeKeyPathComponent(t),n[t],o||d,s,d,t);hasConstructorOf(r,Undefined)?d[t]=void 0:void 0!==r&&(d[t]=r);}),n=d;f.length;){var h=t(f[0],4),g=h[0],b=h[1],m=h[2],T=h[3],O=getByKeyPath(g,b);if(hasConstructorOf(O,Undefined))m[T]=void 0;else {if(void 0===O)break;m[T]=O;}f.splice(0,1);}}if(!v)return n;if(\"#\"===v){var w=getByKeyPath(o,n.substr(1));return void 0===w&&f.push([o,n.substr(1),l,y]),w}var S=s.sync;return [].concat(v).reduce(function(e,t){var n=c[t];if(!n)throw new Error(\"Unregistered type: \"+t);return n[S&&n.revive?\"revive\":!S&&n.reviveAsync?\"reviveAsync\":\"revive\"](e,p)},n)}(\"\",e,null,n);return isThenable(l=hasConstructorOf(l,Undefined)?void 0:l)?s&&n.throwOnBadSyncType?function(){throw new TypeError(\"Sync method requested but async result obtained\")}():l:!s&&n.throwOnBadSyncType?function(){throw new TypeError(\"Async method requested but sync result obtained\")}():s?l:Promise.resolve(l)};this.reviveSync=function(e,t){return v(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!0}))},this.reviveAsync=function(e,t){return v(e,Object.assign({},{throwOnBadSyncType:!0},t,{sync:!1}))},this.register=function(e,t){return t=t||{},[].concat(e).forEach(function R(e){if(i(e))return e.map(R);e&&r(e).forEach(function(n){if(\"#\"===n)throw new TypeError(\"# cannot be used as a type name as it is reserved for cyclic objects\");if(Typeson.JSON_TYPES.includes(n))throw new TypeError(\"Plain JSON object types are reserved as type names\");var r=e[n],o=r.testPlainObjects?s:a,u=o.filter(function(e){return e.type===n});if(u.length&&(o.splice(o.indexOf(u[0]),1),delete c[n],delete f[n]),r){if(\"function\"==typeof r){var p=r;r={test:function test(e){return e&&e.constructor===p},replace:function replace(e){return assign({},e)},revive:function revive(e){return assign(Object.create(p.prototype),e)}};}else i(r)&&(r={test:r[0],replace:r[1],revive:r[2]});var l={type:n,test:r.test.bind(r)};r.replace&&(l.replace=r.replace.bind(r)),r.replaceAsync&&(l.replaceAsync=r.replaceAsync.bind(r));var y=\"number\"==typeof t.fallback?t.fallback:t.fallback?0:1/0;if(r.testPlainObjects?s.splice(y,0,l):a.splice(y,0,l),r.revive||r.reviveAsync){var v={};r.revive&&(v.revive=r.revive.bind(r)),r.reviveAsync&&(v.reviveAsync=r.reviveAsync.bind(r)),c[n]=v;}f[n]=r;}});}),this};}function assign(e,t){return r(t).map(function(n){e[n]=t[n];}),e}function escapeKeyPathComponent(e){return e.replace(/~/g,\"~0\").replace(/\\./g,\"~1\")}function unescapeKeyPathComponent(e){return e.replace(/~1/g,\".\").replace(/~0/g,\"~\")}function getByKeyPath(e,t){if(\"\"===t)return e;var n=t.indexOf(\".\");if(n>-1){var r=e[unescapeKeyPathComponent(t.substr(0,n))];return void 0===r?void 0:getByKeyPath(r,t.substr(n+1))}return e[unescapeKeyPathComponent(t)]}function Undefined(){}function TypesonPromise(e){this.p=new Promise(e);}TypesonPromise.prototype.then=function(e,t){var n=this;return new TypesonPromise(function(r,i){n.p.then(function(t){r(e?e(t):t);},function(e){n.p.catch(function(e){return t?t(e):Promise.reject(e)}).then(r,i);});})},TypesonPromise.prototype.catch=function(e){return this.then(null,e)},TypesonPromise.resolve=function(e){return new TypesonPromise(function(t){t(e);})},TypesonPromise.reject=function(e){return new TypesonPromise(function(t,n){n(e);})},[\"all\",\"race\"].map(function(e){TypesonPromise[e]=function(t){return new TypesonPromise(function(n,r){Promise[e](t.map(function(e){return e.p})).then(n,r);})};}),Typeson.Undefined=Undefined,Typeson.Promise=TypesonPromise,Typeson.isThenable=isThenable,Typeson.toStringTag=toStringTag,Typeson.hasConstructorOf=hasConstructorOf,Typeson.isObject=isObject,Typeson.isPlainObject=isPlainObject,Typeson.isUserObject=function isUserObject(e){if(!e||\"Object\"!==toStringTag(e))return !1;var t=s(e);return !t||hasConstructorOf(e,Object)||isUserObject(t)},Typeson.escapeKeyPathComponent=escapeKeyPathComponent,Typeson.unescapeKeyPathComponent=unescapeKeyPathComponent,Typeson.getByKeyPath=getByKeyPath,Typeson.getJSONType=function(t){return null===t?\"null\":i(t)?\"array\":void 0===t?\"undefined\":e(t)},Typeson.JSON_TYPES=[\"null\",\"boolean\",\"number\",\"string\",\"array\",\"object\"];for(var f={userObject:{test:function test(e,t){return Typeson.isUserObject(e)},replace:function replace(e){return Object.assign({},e)},revive:function revive(e){return e}}},p=[[{sparseArrays:{testPlainObjects:!0,test:function test(e){return Array.isArray(e)},replace:function replace(e,t){return t.iterateUnsetNumeric=!0,e}}},{sparseUndefined:{test:function test(e,t){return void 0===e&&!1===t.ownKeys},replace:function replace(e){return null},revive:function revive(e){}}}],{undef:{test:function test(e,t){return void 0===e&&(t.ownKeys||!(\"ownKeys\"in t))},replace:function replace(e){return null},revive:function revive(e){return new Typeson.Undefined}}}],l={StringObject:{test:function test(t){return \"String\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return String(e)},revive:function revive(e){return new String(e)}},BooleanObject:{test:function test(t){return \"Boolean\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return Boolean(e)},revive:function revive(e){return new Boolean(e)}},NumberObject:{test:function test(t){return \"Number\"===Typeson.toStringTag(t)&&\"object\"===(void 0===t?\"undefined\":e(t))},replace:function replace(e){return Number(e)},revive:function revive(e){return new Number(e)}}},y=[{nan:{test:function test(e){return \"number\"==typeof e&&isNaN(e)},replace:function replace(e){return \"NaN\"},revive:function revive(e){return NaN}}},{infinity:{test:function test(e){return e===1/0},replace:function replace(e){return \"Infinity\"},revive:function revive(e){return 1/0}}},{negativeInfinity:{test:function test(e){return e===-1/0},replace:function replace(e){return \"-Infinity\"},revive:function revive(e){return -1/0}}}],v={date:{test:function test(e){return \"Date\"===Typeson.toStringTag(e)},replace:function replace(e){var t=e.getTime();return isNaN(t)?\"NaN\":t},revive:function revive(e){return \"NaN\"===e?new Date(NaN):new Date(e)}}},d={regexp:{test:function test(e){return \"RegExp\"===Typeson.toStringTag(e)},replace:function replace(e){return {source:e.source,flags:(e.global?\"g\":\"\")+(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.sticky?\"y\":\"\")+(e.unicode?\"u\":\"\")}},revive:function revive(e){var t=e.source,n=e.flags;return new RegExp(t,n)}}},h={map:{test:function test(e){return \"Map\"===Typeson.toStringTag(e)},replace:function replace(e){return Array.from(e.entries())},revive:function revive(e){return new Map(e)}}},g={set:{test:function test(e){return \"Set\"===Typeson.toStringTag(e)},replace:function replace(e){return Array.from(e.values())},revive:function revive(e){return new Set(e)}}},b=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",m=new Uint8Array(256),T=0;T<b.length;T++)m[b.charCodeAt(T)]=T;var O=function encode(e,t,n){for(var r=new Uint8Array(e,t,n),i=r.length,o=\"\",s=0;s<i;s+=3)o+=b[r[s]>>2],o+=b[(3&r[s])<<4|r[s+1]>>4],o+=b[(15&r[s+1])<<2|r[s+2]>>6],o+=b[63&r[s+2]];return i%3==2?o=o.substring(0,o.length-1)+\"=\":i%3==1&&(o=o.substring(0,o.length-2)+\"==\"),o},w=function decode(e){var t=e.length,n=.75*e.length,r=0,i=void 0,o=void 0,s=void 0,a=void 0;\"=\"===e[e.length-1]&&(n--,\"=\"===e[e.length-2]&&n--);for(var c=new ArrayBuffer(n),u=new Uint8Array(c),f=0;f<t;f+=4)i=m[e.charCodeAt(f)],o=m[e.charCodeAt(f+1)],s=m[e.charCodeAt(f+2)],a=m[e.charCodeAt(f+3)],u[r++]=i<<2|o>>4,u[r++]=(15&o)<<4|s>>2,u[r++]=(3&s)<<6|63&a;return c},S={arraybuffer:{test:function test(e){return \"ArrayBuffer\"===Typeson.toStringTag(e)},replace:function replace(e,t){t.buffers||(t.buffers=[]);var n=t.buffers.indexOf(e);return n>-1?{index:n}:(t.buffers.push(e),O(e))},revive:function revive(t,n){if(n.buffers||(n.buffers=[]),\"object\"===(void 0===t?\"undefined\":e(t)))return n.buffers[t.index];var r=w(t);return n.buffers.push(r),r}}},P=\"undefined\"==typeof self?commonjsGlobal:self,j={};[\"Int8Array\",\"Uint8Array\",\"Uint8ClampedArray\",\"Int16Array\",\"Uint16Array\",\"Int32Array\",\"Uint32Array\",\"Float32Array\",\"Float64Array\"].forEach(function(e){var t=e,n=P[t];n&&(j[e.toLowerCase()]={test:function test(e){return Typeson.toStringTag(e)===t},replace:function replace(e,t){var n=e.buffer,r=e.byteOffset,i=e.length;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,length:i}:(t.buffers.push(n),{encoded:O(n),byteOffset:r,length:i})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var r=e.byteOffset,i=e.length,o=e.encoded,s=e.index,a=void 0;return \"index\"in e?a=t.buffers[s]:(a=w(o),t.buffers.push(a)),new n(a,r,i)}});});var A={dataview:{test:function test(e){return \"DataView\"===Typeson.toStringTag(e)},replace:function replace(e,t){var n=e.buffer,r=e.byteOffset,i=e.byteLength;t.buffers||(t.buffers=[]);var o=t.buffers.indexOf(n);return o>-1?{index:o,byteOffset:r,byteLength:i}:(t.buffers.push(n),{encoded:O(n),byteOffset:r,byteLength:i})},revive:function revive(e,t){t.buffers||(t.buffers=[]);var n=e.byteOffset,r=e.byteLength,i=e.encoded,o=e.index,s=void 0;return \"index\"in e?s=t.buffers[o]:(s=w(i),t.buffers.push(s)),new DataView(s,n,r)}}},C={IntlCollator:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.Collator)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.Collator(e.locale,e)}},IntlDateTimeFormat:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.DateTimeFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.DateTimeFormat(e.locale,e)}},IntlNumberFormat:{test:function test(e){return Typeson.hasConstructorOf(e,Intl.NumberFormat)},replace:function replace(e){return e.resolvedOptions()},revive:function revive(e){return new Intl.NumberFormat(e.locale,e)}}};function string2arraybuffer(e){for(var t=new Uint16Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}var N={file:{test:function test(e){return \"File\"===Typeson.toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.open(\"GET\",URL.createObjectURL(e),!1),\"undefined\"!=typeof TextEncoder&&t.overrideMimeType(\"text/plain; charset=utf-16le\"),200!==t.status&&0!==t.status)throw new Error(\"Bad Blob access: \"+t.status);return t.send(),{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:function revive(e){var t=e.name,n=e.type,r=e.stringContents,i=e.lastModified,o=string2arraybuffer(r);return new File([o],t,{type:n,lastModified:i})},replaceAsync:function replaceAsync(e){return new Typeson.Promise(function(t,n){if(e.isClosed)n(new Error(\"The File is closed\"));else {var r=new FileReader;r.addEventListener(\"load\",function(){t({type:e.type,stringContents:r.result,name:e.name,lastModified:e.lastModified});}),r.addEventListener(\"error\",function(){n(r.error);}),r.readAsText(e,\"UTF-16\");}})}}};return [f,p,l,y,v,d,{imagedata:{test:function test(e){return \"ImageData\"===Typeson.toStringTag(e)},replace:function replace(e){return {array:Array.from(e.data),width:e.width,height:e.height}},revive:function revive(e){return new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}}},{imagebitmap:{test:function test(e){return \"ImageBitmap\"===Typeson.toStringTag(e)||e&&e.dataset&&\"ImageBitmap\"===e.dataset.toStringTag},replace:function replace(e){var t=document.createElement(\"canvas\");return t.getContext(\"2d\").drawImage(e,0,0),t.toDataURL()},revive:function revive(e){var t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=document.createElement(\"img\");return r.onload=function(){n.drawImage(r,0,0);},r.src=e,t},reviveAsync:function reviveAsync(e){var t=document.createElement(\"canvas\"),n=t.getContext(\"2d\"),r=document.createElement(\"img\");return r.onload=function(){n.drawImage(r,0,0);},r.src=e,createImageBitmap(t)}}},N,{file:N.file,filelist:{test:function test(e){return \"FileList\"===Typeson.toStringTag(e)},replace:function replace(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.item(n);return t},revive:function revive(e){function FileList(){this._files=arguments[0],this.length=this._files.length;}return FileList.prototype.item=function(e){return this._files[e]},FileList.prototype[Symbol.toStringTag]=\"FileList\",new FileList(e)}}},{blob:{test:function test(e){return \"Blob\"===Typeson.toStringTag(e)},replace:function replace(e){var t=new XMLHttpRequest;if(t.open(\"GET\",URL.createObjectURL(e),!1),\"undefined\"!=typeof TextEncoder&&t.overrideMimeType(\"text/plain; charset=utf-16le\"),200!==t.status&&0!==t.status)throw new Error(\"Bad Blob access: \"+t.status);return t.send(),{type:e.type,stringContents:t.responseText}},revive:function revive(e){var t=e.type,n=e.stringContents;return new Blob([string2arraybuffer(n)],{type:t})},replaceAsync:function replaceAsync(e){return new Typeson.Promise(function(t,n){if(e.isClosed)n(new Error(\"The Blob is closed\"));else {var r=new FileReader;r.addEventListener(\"load\",function(){t({type:e.type,stringContents:r.result});}),r.addEventListener(\"error\",function(){n(r.error);}),r.readAsText(e,\"UTF-16\");}})}}}].concat(\"function\"==typeof Map?h:[],\"function\"==typeof Set?g:[],\"function\"==typeof ArrayBuffer?S:[],\"function\"==typeof Uint8Array?j:[],\"function\"==typeof DataView?A:[],\"undefined\"!=typeof Intl?C:[])});\n\n});\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2017 Brett Zamir, 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.\n\nvar lookup = new Uint8Array(256);\n\nfor (var i = 0; i < chars.length; i++) {\n  lookup[chars.charCodeAt(i)] = i;\n}\n\nvar encode = function encode(arraybuffer, byteOffset, length) {\n  if (length === null || length === undefined) {\n    length = arraybuffer.byteLength; // Needed for Safari\n  }\n\n  var bytes = new Uint8Array(arraybuffer, byteOffset || 0, // Default needed for Safari\n  length);\n  var len = bytes.length;\n  var base64 = '';\n\n  for (var _i = 0; _i < len; _i += 3) {\n    base64 += chars[bytes[_i] >> 2];\n    base64 += chars[(bytes[_i] & 3) << 4 | bytes[_i + 1] >> 4];\n    base64 += chars[(bytes[_i + 1] & 15) << 2 | bytes[_i + 2] >> 6];\n    base64 += chars[bytes[_i + 2] & 63];\n  }\n\n  if (len % 3 === 2) {\n    base64 = base64.substring(0, base64.length - 1) + '=';\n  } else if (len % 3 === 1) {\n    base64 = base64.substring(0, base64.length - 2) + '==';\n  }\n\n  return base64;\n};\nvar decode = function decode(base64) {\n  var len = base64.length;\n  var bufferLength = base64.length * 0.75;\n  var p = 0;\n  var encoded1, encoded2, encoded3, encoded4;\n\n  if (base64[base64.length - 1] === '=') {\n    bufferLength--;\n\n    if (base64[base64.length - 2] === '=') {\n      bufferLength--;\n    }\n  }\n\n  var arraybuffer = new ArrayBuffer(bufferLength),\n      bytes = new Uint8Array(arraybuffer);\n\n  for (var _i2 = 0; _i2 < len; _i2 += 4) {\n    encoded1 = lookup[base64.charCodeAt(_i2)];\n    encoded2 = lookup[base64.charCodeAt(_i2 + 1)];\n    encoded3 = lookup[base64.charCodeAt(_i2 + 2)];\n    encoded4 = lookup[base64.charCodeAt(_i2 + 3)];\n    bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n    bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n    bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n  }\n\n  return arraybuffer;\n};\n\n/* eslint-env browser, node */\nvar _global = typeof self === 'undefined' ? global : self;\nvar exportObj = {};\n[\n    'Int8Array',\n    'Uint8Array',\n    'Uint8ClampedArray',\n    'Int16Array',\n    'Uint16Array',\n    'Int32Array',\n    'Uint32Array',\n    'Float32Array',\n    'Float64Array'\n].forEach(function (typeName) {\n    var arrType = typeName;\n    var TypedArray = _global[arrType];\n    if (TypedArray) {\n        exportObj[typeName.toLowerCase() + \"2\"] = {\n            test: function (x) { return typeson.toStringTag(x) === arrType; },\n            replace: function (_a) {\n                var buffer = _a.buffer, byteOffset = _a.byteOffset, length = _a.length;\n                return {\n                    buffer: buffer,\n                    byteOffset: byteOffset,\n                    length: length\n                };\n            },\n            revive: function (b64Obj) {\n                var buffer = b64Obj.buffer, byteOffset = b64Obj.byteOffset, length = b64Obj.length;\n                return new TypedArray(buffer, byteOffset, length);\n            }\n        };\n    }\n});\n\nvar arrayBuffer = {\n    arraybuffer: {\n        test: function (x) { return typeson.toStringTag(x) === 'ArrayBuffer'; },\n        replace: function (b) {\n            return encode(b, 0, b.byteLength);\n        },\n        revive: function (b64) {\n            var buffer = decode(b64);\n            return buffer;\n        }\n    }\n};\n// See also typed-arrays!\n\nvar TSON = new typeson().register(structuredCloning);\nvar readBlobsSynchronously = 'FileReaderSync' in self; // true in workers only.\nvar blobsToAwait = [];\nvar blobsToAwaitPos = 0;\n// Need to patch encapsulateAsync as it does not work as of typeson 5.8.2\n// Also, current version of typespn-registry-1.0.0-alpha.21 does not\n// encapsulate/revive Blobs correctly (fails one of the unit tests in\n// this library (test 'export-format'))\nTSON.register([\n    arrayBuffer,\n    exportObj, {\n        blob2: {\n            test: function (x) { return typeson.toStringTag(x) === 'Blob'; },\n            replace: function (b) {\n                if (b.isClosed) { // On MDN, but not in https://w3c.github.io/FileAPI/#dfn-Blob\n                    throw new Error('The Blob is closed');\n                }\n                if (readBlobsSynchronously) {\n                    var data = readBlobSync(b, 'binary');\n                    var base64 = encode(data, 0, data.byteLength);\n                    return {\n                        type: b.type,\n                        data: base64\n                    };\n                }\n                else {\n                    blobsToAwait.push(b); // This will also make TSON.mustFinalize() return true.\n                    var result = {\n                        type: b.type,\n                        data: { start: blobsToAwaitPos, end: blobsToAwaitPos + b.size }\n                    };\n                    console.log(\"b.size: \" + b.size);\n                    blobsToAwaitPos += b.size;\n                    return result;\n                }\n            },\n            finalize: function (b, ba) {\n                b.data = encode(ba, 0, ba.byteLength);\n            },\n            revive: function (_a) {\n                var type = _a.type, data = _a.data;\n                return new Blob([decode(data)], { type: type });\n            }\n        }\n    }\n]);\nTSON.mustFinalize = function () { return blobsToAwait.length > 0; };\nTSON.finalize = function (items) { return __awaiter(void 0, void 0, void 0, function () {\n    var allChunks, _i, items_1, item, types, arrayType, keyPath, typeName, typeSpec, b;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0: return [4 /*yield*/, readBlobAsync(new Blob(blobsToAwait), 'binary')];\n            case 1:\n                allChunks = _a.sent();\n                if (items) {\n                    for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\n                        item = items_1[_i];\n                        // Manually go through all \"blob\" types in the result\n                        // and lookup the data slice they point at.\n                        if (item.$types) {\n                            types = item.$types;\n                            arrayType = types.$;\n                            if (arrayType)\n                                types = types.$;\n                            for (keyPath in types) {\n                                typeName = types[keyPath];\n                                typeSpec = TSON.types[typeName];\n                                if (typeSpec && typeSpec.finalize) {\n                                    b = Dexie.getByKeyPath(item, arrayType ? \"$.\" + keyPath : keyPath);\n                                    typeSpec.finalize(b, allChunks.slice(b.start, b.end));\n                                }\n                            }\n                        }\n                    }\n                }\n                // Free up memory\n                blobsToAwait = [];\n                return [2 /*return*/];\n        }\n    });\n}); };\n\nvar DEFAULT_ROWS_PER_CHUNK = 2000;\nfunction exportDB(db, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        function exportAll() {\n            return __awaiter(this, void 0, void 0, function () {\n                var tablesRowCounts, emptyExportJson, posEndDataArray, firstJsonSlice, filter, _loop_1, _i, tables_1, tableName;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4 /*yield*/, Promise.all(db.tables.map(function (table) { return table.count(); }))];\n                        case 1:\n                            tablesRowCounts = _a.sent();\n                            tablesRowCounts.forEach(function (rowCount, i) { return tables[i].rowCount = rowCount; });\n                            progress.totalRows = tablesRowCounts.reduce(function (p, c) { return p + c; });\n                            emptyExportJson = JSON.stringify(emptyExport, undefined, prettyJson ? 2 : undefined);\n                            posEndDataArray = emptyExportJson.lastIndexOf(']');\n                            firstJsonSlice = emptyExportJson.substring(0, posEndDataArray);\n                            slices.push(firstJsonSlice);\n                            filter = options.filter;\n                            _loop_1 = function (tableName) {\n                                var table, primKey, inbound, LIMIT, emptyTableExport, emptyTableExportJson, posEndRowsArray, lastKey, lastNumRows, mayHaveMoreRows, _loop_2, state_1;\n                                return __generator(this, function (_b) {\n                                    switch (_b.label) {\n                                        case 0:\n                                            table = db.table(tableName);\n                                            primKey = table.schema.primKey;\n                                            inbound = !!primKey.keyPath;\n                                            LIMIT = options.numRowsPerChunk || DEFAULT_ROWS_PER_CHUNK;\n                                            emptyTableExport = inbound ? {\n                                                tableName: table.name,\n                                                inbound: true,\n                                                rows: []\n                                            } : {\n                                                tableName: table.name,\n                                                inbound: false,\n                                                rows: []\n                                            };\n                                            emptyTableExportJson = JSON.stringify(emptyTableExport, undefined, prettyJson ? 2 : undefined);\n                                            if (prettyJson) {\n                                                // Increase indentation according to this:\n                                                // {\n                                                //   ...\n                                                //   data: [\n                                                //     ...\n                                                //     data: [\n                                                // 123456<---- here\n                                                //     ] \n                                                //   ]\n                                                // }\n                                                emptyTableExportJson = emptyTableExportJson.split('\\n').join('\\n    ');\n                                            }\n                                            posEndRowsArray = emptyTableExportJson.lastIndexOf(']');\n                                            slices.push(emptyTableExportJson.substring(0, posEndRowsArray));\n                                            lastKey = null;\n                                            lastNumRows = 0;\n                                            mayHaveMoreRows = true;\n                                            _loop_2 = function () {\n                                                var chunkedCollection, values, filteredValues, tsonValues, json, keys, keyvals, tsonTuples, json;\n                                                return __generator(this, function (_c) {\n                                                    switch (_c.label) {\n                                                        case 0:\n                                                            if (progressCallback) {\n                                                                // Keep ongoing transaction private\n                                                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                                                            }\n                                                            chunkedCollection = lastKey == null ?\n                                                                table.limit(LIMIT) :\n                                                                table.where(':id').above(lastKey).limit(LIMIT);\n                                                            return [4 /*yield*/, chunkedCollection.toArray()];\n                                                        case 1:\n                                                            values = _c.sent();\n                                                            if (values.length === 0)\n                                                                return [2 /*return*/, \"break\"];\n                                                            if (lastKey != null && lastNumRows > 0) {\n                                                                // Not initial chunk. Must add a comma:\n                                                                slices.push(\",\");\n                                                                if (prettyJson) {\n                                                                    slices.push(\"\\n      \");\n                                                                }\n                                                            }\n                                                            mayHaveMoreRows = values.length === LIMIT;\n                                                            if (!inbound) return [3 /*break*/, 4];\n                                                            filteredValues = filter ?\n                                                                values.filter(function (value) { return filter(tableName, value); }) :\n                                                                values;\n                                                            tsonValues = filteredValues.map(function (value) { return TSON.encapsulate(value); });\n                                                            if (!TSON.mustFinalize()) return [3 /*break*/, 3];\n                                                            return [4 /*yield*/, Dexie.waitFor(TSON.finalize(tsonValues))];\n                                                        case 2:\n                                                            _c.sent();\n                                                            _c.label = 3;\n                                                        case 3:\n                                                            json = JSON.stringify(tsonValues, undefined, prettyJson ? 2 : undefined);\n                                                            if (prettyJson)\n                                                                json = json.split('\\n').join('\\n      ');\n                                                            // By generating a blob here, we give web platform the opportunity to store the contents\n                                                            // on disk and release RAM.\n                                                            slices.push(new Blob([json.substring(1, json.length - 1)]));\n                                                            lastNumRows = filteredValues.length;\n                                                            lastKey = values.length > 0 ?\n                                                                Dexie.getByKeyPath(values[values.length - 1], primKey.keyPath) :\n                                                                null;\n                                                            return [3 /*break*/, 8];\n                                                        case 4: return [4 /*yield*/, chunkedCollection.primaryKeys()];\n                                                        case 5:\n                                                            keys = _c.sent();\n                                                            keyvals = keys.map(function (key, i) { return [key, values[i]]; });\n                                                            if (filter)\n                                                                keyvals = keyvals.filter(function (_a) {\n                                                                    var key = _a[0], value = _a[1];\n                                                                    return filter(tableName, value, key);\n                                                                });\n                                                            tsonTuples = keyvals.map(function (tuple) { return TSON.encapsulate(tuple); });\n                                                            if (!TSON.mustFinalize()) return [3 /*break*/, 7];\n                                                            return [4 /*yield*/, Dexie.waitFor(TSON.finalize(tsonTuples))];\n                                                        case 6:\n                                                            _c.sent();\n                                                            _c.label = 7;\n                                                        case 7:\n                                                            json = JSON.stringify(tsonTuples, undefined, prettyJson ? 2 : undefined);\n                                                            if (prettyJson)\n                                                                json = json.split('\\n').join('\\n      ');\n                                                            // By generating a blob here, we give web platform the opportunity to store the contents\n                                                            // on disk and release RAM.\n                                                            slices.push(new Blob([json.substring(1, json.length - 1)]));\n                                                            lastNumRows = keyvals.length;\n                                                            lastKey = keys.length > 0 ?\n                                                                keys[keys.length - 1] :\n                                                                null;\n                                                            _c.label = 8;\n                                                        case 8:\n                                                            progress.completedRows += values.length;\n                                                            return [2 /*return*/];\n                                                    }\n                                                });\n                                            };\n                                            _b.label = 1;\n                                        case 1:\n                                            if (!mayHaveMoreRows) return [3 /*break*/, 3];\n                                            return [5 /*yield**/, _loop_2()];\n                                        case 2:\n                                            state_1 = _b.sent();\n                                            if (state_1 === \"break\")\n                                                return [3 /*break*/, 3];\n                                            return [3 /*break*/, 1];\n                                        case 3:\n                                            slices.push(emptyTableExportJson.substr(posEndRowsArray)); // \"]}\"\n                                            progress.completedTables += 1;\n                                            if (progress.completedTables < progress.totalTables) {\n                                                slices.push(\",\");\n                                            }\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            };\n                            _i = 0, tables_1 = tables;\n                            _a.label = 2;\n                        case 2:\n                            if (!(_i < tables_1.length)) return [3 /*break*/, 5];\n                            tableName = tables_1[_i].name;\n                            return [5 /*yield**/, _loop_1(tableName)];\n                        case 3:\n                            _a.sent();\n                            _a.label = 4;\n                        case 4:\n                            _i++;\n                            return [3 /*break*/, 2];\n                        case 5:\n                            slices.push(emptyExportJson.substr(posEndDataArray));\n                            progress.done = true;\n                            if (progressCallback) {\n                                // Keep ongoing transaction private\n                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                            }\n                            return [2 /*return*/];\n                    }\n                });\n            });\n        }\n        var slices, tables, prettyJson, emptyExport, progressCallback, progress;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {};\n                    slices = [];\n                    tables = db.tables.map(function (table) { return ({\n                        name: table.name,\n                        schema: getSchemaString(table),\n                        rowCount: 0\n                    }); });\n                    prettyJson = options.prettyJson;\n                    emptyExport = {\n                        formatName: \"dexie\",\n                        formatVersion: 1,\n                        data: {\n                            databaseName: db.name,\n                            databaseVersion: db.verno,\n                            tables: tables,\n                            data: []\n                        }\n                    };\n                    progressCallback = options.progressCallback;\n                    progress = {\n                        done: false,\n                        completedRows: 0,\n                        completedTables: 0,\n                        totalRows: NaN,\n                        totalTables: db.tables.length\n                    };\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, , 6, 7]);\n                    if (!options.noTransaction) return [3 /*break*/, 3];\n                    return [4 /*yield*/, exportAll()];\n                case 2:\n                    _a.sent();\n                    return [3 /*break*/, 5];\n                case 3: return [4 /*yield*/, db.transaction('r', db.tables, exportAll)];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [3 /*break*/, 7];\n                case 6:\n                    TSON.finalize(); // Free up mem if error has occurred\n                    return [7 /*endfinally*/];\n                case 7:\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    return [2 /*return*/, new Blob(slices, { type: \"text/json\" })];\n            }\n        });\n    });\n}\n\nvar VERSION = 1;\n\nvar fakeStream = {Stream: function(){}};\n\nvar clarinet_1 = createCommonjsModule(function (module, exports) {\n(function (clarinet) {\n\n  // non node-js needs to set clarinet debug on root\n  var env =(typeof process === 'object' && process.env)\n    ? process.env\n    : self;\n\n  clarinet.parser            = function (opt) { return new CParser(opt);};\n  clarinet.CParser           = CParser;\n  clarinet.CStream           = CStream;\n  clarinet.createStream      = createStream;\n  clarinet.MAX_BUFFER_LENGTH = 10 * 1024 * 1024;\n  clarinet.DEBUG             = (env.CDEBUG==='debug');\n  clarinet.INFO              = (env.CDEBUG==='debug' || env.CDEBUG==='info');\n  clarinet.EVENTS            =\n    [ \"value\"\n    , \"string\"\n    , \"key\"\n    , \"openobject\"\n    , \"closeobject\"\n    , \"openarray\"\n    , \"closearray\"\n    , \"error\"\n    , \"end\"\n    , \"ready\"\n    ];\n\n  var buffers     = {\n        textNode: undefined,\n        numberNode: \"\"\n    }\n    , streamWraps = clarinet.EVENTS.filter(function (ev) {\n          return ev !== \"error\" && ev !== \"end\";\n        })\n    , S           = 0\n    , Stream\n    ;\n\n  clarinet.STATE =\n    { BEGIN                             : S++\n    , VALUE                             : S++ // general stuff\n    , OPEN_OBJECT                       : S++ // {\n    , CLOSE_OBJECT                      : S++ // }\n    , OPEN_ARRAY                        : S++ // [\n    , CLOSE_ARRAY                       : S++ // ]\n    , TEXT_ESCAPE                       : S++ // \\ stuff\n    , STRING                            : S++ // \"\"\n    , BACKSLASH                         : S++\n    , END                               : S++ // No more stack\n    , OPEN_KEY                          : S++ // , \"a\"\n    , CLOSE_KEY                         : S++ // :\n    , TRUE                              : S++ // r\n    , TRUE2                             : S++ // u\n    , TRUE3                             : S++ // e\n    , FALSE                             : S++ // a\n    , FALSE2                            : S++ // l\n    , FALSE3                            : S++ // s\n    , FALSE4                            : S++ // e\n    , NULL                              : S++ // u\n    , NULL2                             : S++ // l\n    , NULL3                             : S++ // l\n    , NUMBER_DECIMAL_POINT              : S++ // .\n    , NUMBER_DIGIT                      : S++ // [0-9]\n    };\n\n  for (var s_ in clarinet.STATE) clarinet.STATE[clarinet.STATE[s_]] = s_;\n\n  // switcharoo\n  S = clarinet.STATE;\n\n  const Char = {\n    tab                 : 0x09,     // \\t\n    lineFeed            : 0x0A,     // \\n\n    carriageReturn      : 0x0D,     // \\r\n    space               : 0x20,     // \" \"\n\n    doubleQuote         : 0x22,     // \"\n    plus                : 0x2B,     // +\n    comma               : 0x2C,     // ,\n    minus               : 0x2D,     // -\n    period              : 0x2E,     // .\n\n    _0                  : 0x30,     // 0\n    _9                  : 0x39,     // 9\n\n    colon               : 0x3A,     // :\n\n    E                   : 0x45,     // E\n\n    openBracket         : 0x5B,     // [\n    backslash           : 0x5C,     // \\\n    closeBracket        : 0x5D,     // ]\n\n    a                   : 0x61,     // a\n    b                   : 0x62,     // b\n    e                   : 0x65,     // e \n    f                   : 0x66,     // f\n    l                   : 0x6C,     // l\n    n                   : 0x6E,     // n\n    r                   : 0x72,     // r\n    s                   : 0x73,     // s\n    t                   : 0x74,     // t\n    u                   : 0x75,     // u\n\n    openBrace           : 0x7B,     // {\n    closeBrace          : 0x7D,     // }\n  };\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function f () { this[\"__proto__\"] = o; }\n      f.prototype = o;\n      return new f;\n    };\n  }\n\n  if (!Object.getPrototypeOf) {\n    Object.getPrototypeOf = function (o) {\n      return o[\"__proto__\"];\n    };\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = [];\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i);\n      return a;\n    };\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(clarinet.MAX_BUFFER_LENGTH, 10)\n      , maxActual = 0\n      ;\n    for (var buffer in buffers) {\n      var len = parser[buffer] === undefined ? 0 : parser[buffer].length;\n      if (len > maxAllowed) {\n        switch (buffer) {\n          case \"text\":\n            closeText(parser);\n          break;\n\n          default:\n            error(parser, \"Max buffer length exceeded: \"+ buffer);\n        }\n      }\n      maxActual = Math.max(maxActual, len);\n    }\n    parser.bufferCheckPosition = (clarinet.MAX_BUFFER_LENGTH - maxActual)\n                               + parser.position;\n  }\n\n  function clearBuffers (parser) {\n    for (var buffer in buffers) {\n      parser[buffer] = buffers[buffer];\n    }\n  }\n\n  var stringTokenPattern = /[\\\\\"\\n]/g;\n\n  function CParser (opt) {\n    if (!(this instanceof CParser)) return new CParser (opt);\n\n    var parser = this;\n    clearBuffers(parser);\n    parser.bufferCheckPosition = clarinet.MAX_BUFFER_LENGTH;\n    parser.q        = parser.c = parser.p = \"\";\n    parser.opt      = opt || {};\n    parser.closed   = parser.closedRoot = parser.sawRoot = false;\n    parser.tag      = parser.error = null;\n    parser.state    = S.BEGIN;\n    parser.stack    = new Array();\n    // mostly just for error reporting\n    parser.position = parser.column = 0;\n    parser.line     = 1;\n    parser.slashed  = false;\n    parser.unicodeI = 0;\n    parser.unicodeS = null;\n    parser.depth    = 0;\n    emit(parser, \"onready\");\n  }\n\n  CParser.prototype =\n    { end    : function () { end(this); }\n    , write  : write\n    , resume : function () { this.error = null; return this; }\n    , close  : function () { return this.write(null); }\n    };\n\n  try        { Stream = fakeStream.Stream; }\n  catch (ex) { Stream = function () {}; }\n\n  function createStream (opt) { return new CStream(opt); }\n\n  function CStream (opt) {\n    if (!(this instanceof CStream)) return new CStream(opt);\n\n    this._parser = new CParser(opt);\n    this.writable = true;\n    this.readable = true;\n\n    //var Buffer = this.Buffer || function Buffer () {}; // if we don't have Buffers, fake it so we can do `var instanceof Buffer` and not throw an error\n    this.bytes_remaining = 0; // number of bytes remaining in multi byte utf8 char to read after split boundary\n    this.bytes_in_sequence = 0; // bytes in multi byte utf8 char to read\n    this.temp_buffs = { \"2\": new Buffer(2), \"3\": new Buffer(3), \"4\": new Buffer(4) }; // for rebuilding chars split before boundary is reached\n    this.string = '';\n\n    var me = this;\n    Stream.apply(me);\n\n    this._parser.onend = function () { me.emit(\"end\"); };\n    this._parser.onerror = function (er) {\n      me.emit(\"error\", er);\n      me._parser.error = null;\n    };\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, \"on\" + ev,\n        { get          : function () { return me._parser[\"on\" + ev]; }\n        , set          : function (h) {\n            if (!h) {\n              me.removeAllListeners(ev);\n              me._parser[\"on\"+ev] = h;\n              return h;\n            }\n            me.on(ev, h);\n          }\n        , enumerable   : true\n        , configurable : false\n        });\n    });\n  }\n\n  CStream.prototype = Object.create(Stream.prototype,\n    { constructor: { value: CStream } });\n\n  CStream.prototype.write = function (data) {\n    data = new Buffer(data);\n    for (var i = 0; i < data.length; i++) {\n      var n = data[i];\n\n      // check for carry over of a multi byte char split between data chunks\n      // & fill temp buffer it with start of this data chunk up to the boundary limit set in the last iteration\n      if (this.bytes_remaining > 0) {\n        for (var j = 0; j < this.bytes_remaining; j++) {\n          this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence - this.bytes_remaining + j] = data[j];\n        }\n        this.string = this.temp_buffs[this.bytes_in_sequence].toString();\n        this.bytes_in_sequence = this.bytes_remaining = 0;\n\n        // move iterator forward by number of byte read during sequencing\n        i = i + j - 1;\n\n        // pass data to parser and move forward to parse rest of data\n        this._parser.write(this.string);\n        this.emit(\"data\", this.string);\n        continue;\n      }\n\n      // if no remainder bytes carried over, parse multi byte (>=128) chars one at a time\n      if (this.bytes_remaining === 0 && n >= 128) {\n        if ((n >= 194) && (n <= 223)) this.bytes_in_sequence = 2;\n        if ((n >= 224) && (n <= 239)) this.bytes_in_sequence = 3;\n        if ((n >= 240) && (n <= 244)) this.bytes_in_sequence = 4;\n        if ((this.bytes_in_sequence + i) > data.length) { // if bytes needed to complete char fall outside data length, we have a boundary split\n\n          for (var k = 0; k <= (data.length - 1 - i); k++) {\n            this.temp_buffs[this.bytes_in_sequence][k] = data[i + k]; // fill temp data of correct size with bytes available in this chunk\n          }\n          this.bytes_remaining = (i + this.bytes_in_sequence) - data.length;\n\n          // immediately return as we need another chunk to sequence the character\n          return true;\n        } else {\n          this.string = data.slice(i, (i + this.bytes_in_sequence)).toString();\n          i = i + this.bytes_in_sequence - 1;\n\n          this._parser.write(this.string);\n          this.emit(\"data\", this.string);\n          continue;\n        }\n      }\n\n      // is there a range of characters that are immediately parsable?\n      for (var p = i; p < data.length; p++) {\n        if (data[p] >= 128) break;\n      }\n      this.string = data.slice(i, p).toString();\n      this._parser.write(this.string);\n      this.emit(\"data\", this.string);\n      i = p - 1;\n\n      // handle any remaining characters using multibyte logic\n      continue;\n    }\n  };\n\n  CStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) this._parser.write(chunk.toString());\n    this._parser.end();\n    return true;\n  };\n\n  CStream.prototype.on = function (ev, handler) {\n    var me = this;\n    if (!me._parser[\"on\"+ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser[\"on\"+ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]]\n                 : Array.apply(null, arguments);\n        args.splice(0, 0, ev);\n        me.emit.apply(me, args);\n      };\n    }\n    return Stream.prototype.on.call(me, ev, handler);\n  };\n\n  CStream.prototype.destroy = function () {\n    clearBuffers(this._parser);\n    this.emit(\"close\");\n  };\n\n  function emit(parser, event, data) {\n    if(clarinet.INFO) console.log('-- emit', event, data);\n    if (parser[event]) parser[event](data);\n  }\n\n  function emitNode(parser, event, data) {\n    closeValue(parser);\n    emit(parser, event, data);\n  }\n\n  function closeValue(parser, event) {\n    parser.textNode = textopts(parser.opt, parser.textNode);\n    if (parser.textNode !== undefined) {\n      emit(parser, (event ? event : \"onvalue\"), parser.textNode);\n    }\n    parser.textNode = undefined;\n  }\n\n  function closeNumber(parser) {\n    if (parser.numberNode)\n      emit(parser, \"onvalue\", parseFloat(parser.numberNode));\n    parser.numberNode = \"\";\n  }\n\n  function textopts (opt, text) {\n    if (text === undefined) {\n      return text;\n    }\n    if (opt.trim) text = text.trim();\n    if (opt.normalize) text = text.replace(/\\s+/g, \" \");\n    return text;\n  }\n\n  function error (parser, er) {\n    closeValue(parser);\n    er += \"\\nLine: \"+parser.line+\n          \"\\nColumn: \"+parser.column+\n          \"\\nChar: \"+parser.c;\n    er = new Error(er);\n    parser.error = er;\n    emit(parser, \"onerror\", er);\n    return parser;\n  }\n\n  function end(parser) {\n    if (parser.state !== S.VALUE || parser.depth !== 0)\n      error(parser, \"Unexpected end\");\n\n    closeValue(parser);\n    parser.c      = \"\";\n    parser.closed = true;\n    emit(parser, \"onend\");\n    CParser.call(parser, parser.opt);\n    return parser;\n  }\n\n  function isWhitespace(c) {\n    return c === Char.carriageReturn || c === Char.lineFeed || c === Char.space || c === Char.tab;\n  }\n\n  function write (chunk) {\n    var parser = this;\n    if (this.error) throw this.error;\n    if (parser.closed) return error(parser,\n      \"Cannot write after close. Assign an onready handler.\");\n    if (chunk === null) return end(parser);\n    var i = 0, c = chunk.charCodeAt(0), p = parser.p;\n    if (clarinet.DEBUG) console.log('write -> [' + chunk + ']');\n    while (c) {\n      p = c;\n      parser.c = c = chunk.charCodeAt(i++);\n      // if chunk doesnt have next, like streaming char by char\n      // this way we need to check if previous is really previous\n      // if not we need to reset to what the parser says is the previous\n      // from buffer\n      if(p !== c ) parser.p = p;\n      else p = parser.p;\n\n      if(!c) break;\n\n      if (clarinet.DEBUG) console.log(i,c,clarinet.STATE[parser.state]);\n      parser.position ++;\n      if (c === Char.lineFeed) {\n        parser.line ++;\n        parser.column = 0;\n      } else parser.column ++;\n      switch (parser.state) {\n\n        case S.BEGIN:\n          if (c === Char.openBrace) parser.state = S.OPEN_OBJECT;\n          else if (c === Char.openBracket) parser.state = S.OPEN_ARRAY;\n          else if (!isWhitespace(c))\n            error(parser, \"Non-whitespace before {[.\");\n        continue;\n\n        case S.OPEN_KEY:\n        case S.OPEN_OBJECT:\n          if (isWhitespace(c)) continue;\n          if(parser.state === S.OPEN_KEY) parser.stack.push(S.CLOSE_KEY);\n          else {\n            if(c === Char.closeBrace) {\n              emit(parser, 'onopenobject');\n              this.depth++;\n              emit(parser, 'oncloseobject');\n              this.depth--;\n              parser.state = parser.stack.pop() || S.VALUE;\n              continue;\n            } else  parser.stack.push(S.CLOSE_OBJECT);\n          }\n          if(c === Char.doubleQuote) parser.state = S.STRING;\n          else error(parser, \"Malformed object key should start with \\\"\");\n        continue;\n\n        case S.CLOSE_KEY:\n        case S.CLOSE_OBJECT:\n          if (isWhitespace(c)) continue;\n          (parser.state === S.CLOSE_KEY) ? 'key' : 'object';\n          if(c === Char.colon) {\n            if(parser.state === S.CLOSE_OBJECT) {\n              parser.stack.push(S.CLOSE_OBJECT);\n              closeValue(parser, 'onopenobject');\n               this.depth++;\n            } else closeValue(parser, 'onkey');\n            parser.state  = S.VALUE;\n          } else if (c === Char.closeBrace) {\n            emitNode(parser, 'oncloseobject');\n            this.depth--;\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else if(c === Char.comma) {\n            if(parser.state === S.CLOSE_OBJECT)\n              parser.stack.push(S.CLOSE_OBJECT);\n            closeValue(parser);\n            parser.state  = S.OPEN_KEY;\n          } else error(parser, 'Bad object');\n        continue;\n\n        case S.OPEN_ARRAY: // after an array there always a value\n        case S.VALUE:\n          if (isWhitespace(c)) continue;\n          if(parser.state===S.OPEN_ARRAY) {\n            emit(parser, 'onopenarray');\n            this.depth++;\n            parser.state = S.VALUE;\n            if(c === Char.closeBracket) {\n              emit(parser, 'onclosearray');\n              this.depth--;\n              parser.state = parser.stack.pop() || S.VALUE;\n              continue;\n            } else {\n              parser.stack.push(S.CLOSE_ARRAY);\n            }\n          }\n               if(c === Char.doubleQuote) parser.state = S.STRING;\n          else if(c === Char.openBrace) parser.state = S.OPEN_OBJECT;\n          else if(c === Char.openBracket) parser.state = S.OPEN_ARRAY;\n          else if(c === Char.t) parser.state = S.TRUE;\n          else if(c === Char.f) parser.state = S.FALSE;\n          else if(c === Char.n) parser.state = S.NULL;\n          else if(c === Char.minus) { // keep and continue\n            parser.numberNode += \"-\";\n          } else if(Char._0 <= c && c <= Char._9) {\n            parser.numberNode += String.fromCharCode(c);\n            parser.state = S.NUMBER_DIGIT;\n          } else               error(parser, \"Bad value\");\n        continue;\n\n        case S.CLOSE_ARRAY:\n          if(c === Char.comma) {\n            parser.stack.push(S.CLOSE_ARRAY);\n            closeValue(parser, 'onvalue');\n            parser.state  = S.VALUE;\n          } else if (c === Char.closeBracket) {\n            emitNode(parser, 'onclosearray');\n            this.depth--;\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else if (isWhitespace(c))\n              continue;\n          else error(parser, 'Bad array');\n        continue;\n\n        case S.STRING:\n          if (parser.textNode === undefined) {\n            parser.textNode = \"\";\n          }\n\n          // thanks thejh, this is an about 50% performance improvement.\n          var starti              = i-1\n            , slashed = parser.slashed\n            , unicodeI = parser.unicodeI\n            ;\n          STRING_BIGLOOP: while (true) {\n            if (clarinet.DEBUG)\n              console.log(i,c,clarinet.STATE[parser.state]\n                         ,slashed);\n            // zero means \"no unicode active\". 1-4 mean \"parse some more\". end after 4.\n            while (unicodeI > 0) {\n              parser.unicodeS += String.fromCharCode(c);\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              if (unicodeI === 4) {\n                // TODO this might be slow? well, probably not used too often anyway\n                parser.textNode += String.fromCharCode(parseInt(parser.unicodeS, 16));\n                unicodeI = 0;\n                starti = i-1;\n              } else {\n                unicodeI++;\n              }\n              // we can just break here: no stuff we skipped that still has to be sliced out or so\n              if (!c) break STRING_BIGLOOP;\n            }\n            if (c === Char.doubleQuote && !slashed) {\n              parser.state = parser.stack.pop() || S.VALUE;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n            if (c === Char.backslash && !slashed) {\n              slashed = true;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              if (!c) break;\n            }\n            if (slashed) {\n              slashed = false;\n                   if (c === Char.n) { parser.textNode += '\\n'; }\n              else if (c === Char.r) { parser.textNode += '\\r'; }\n              else if (c === Char.t) { parser.textNode += '\\t'; }\n              else if (c === Char.f) { parser.textNode += '\\f'; }\n              else if (c === Char.b) { parser.textNode += '\\b'; }\n              else if (c === Char.u) {\n                // \\uxxxx. meh!\n                unicodeI = 1;\n                parser.unicodeS = '';\n              } else {\n                parser.textNode += String.fromCharCode(c);\n              }\n              c = chunk.charCodeAt(i++);\n              parser.position++;\n              starti = i-1;\n              if (!c) break;\n              else continue;\n            }\n\n            stringTokenPattern.lastIndex = i;\n            var reResult = stringTokenPattern.exec(chunk);\n            if (reResult === null) {\n              i = chunk.length+1;\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n            i = reResult.index+1;\n            c = chunk.charCodeAt(reResult.index);\n            if (!c) {\n              parser.textNode += chunk.substring(starti, i-1);\n              parser.position += i - 1 - starti;\n              break;\n            }\n          }\n          parser.slashed = slashed;\n          parser.unicodeI = unicodeI;\n        continue;\n\n        case S.TRUE:\n          if (c === Char.r) parser.state = S.TRUE2;\n          else error(parser, 'Invalid true started with t'+ c);\n        continue;\n\n        case S.TRUE2:\n          if (c === Char.u) parser.state = S.TRUE3;\n          else error(parser, 'Invalid true started with tr'+ c);\n        continue;\n\n        case S.TRUE3:\n          if(c === Char.e) {\n            emit(parser, \"onvalue\", true);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid true started with tru'+ c);\n        continue;\n\n        case S.FALSE:\n          if (c === Char.a) parser.state = S.FALSE2;\n          else error(parser, 'Invalid false started with f'+ c);\n        continue;\n\n        case S.FALSE2:\n          if (c === Char.l) parser.state = S.FALSE3;\n          else error(parser, 'Invalid false started with fa'+ c);\n        continue;\n\n        case S.FALSE3:\n          if (c === Char.s) parser.state = S.FALSE4;\n          else error(parser, 'Invalid false started with fal'+ c);\n        continue;\n\n        case S.FALSE4:\n          if (c === Char.e) {\n            emit(parser, \"onvalue\", false);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid false started with fals'+ c);\n        continue;\n\n        case S.NULL:\n          if (c === Char.u) parser.state = S.NULL2;\n          else error(parser, 'Invalid null started with n'+ c);\n        continue;\n\n        case S.NULL2:\n          if (c === Char.l) parser.state = S.NULL3;\n          else error(parser, 'Invalid null started with nu'+ c);\n        continue;\n\n        case S.NULL3:\n          if(c === Char.l) {\n            emit(parser, \"onvalue\", null);\n            parser.state = parser.stack.pop() || S.VALUE;\n          } else error(parser, 'Invalid null started with nul'+ c);\n        continue;\n\n        case S.NUMBER_DECIMAL_POINT:\n          if(c === Char.period) {\n            parser.numberNode += \".\";\n            parser.state       = S.NUMBER_DIGIT;\n          } else error(parser, 'Leading zero not followed by .');\n        continue;\n\n        case S.NUMBER_DIGIT:\n          if(Char._0 <= c && c <= Char._9) parser.numberNode += String.fromCharCode(c);\n          else if (c === Char.period) {\n            if(parser.numberNode.indexOf('.')!==-1)\n              error(parser, 'Invalid number has two dots');\n            parser.numberNode += \".\";\n          } else if (c === Char.e || c === Char.E) {\n            if(parser.numberNode.indexOf('e')!==-1 ||\n               parser.numberNode.indexOf('E')!==-1 )\n               error(parser, 'Invalid number has two exponential');\n            parser.numberNode += \"e\";\n          } else if (c === Char.plus || c === Char.minus) {\n            if(!(p === Char.e || p === Char.E))\n              error(parser, 'Invalid symbol in number');\n            parser.numberNode += String.fromCharCode(c);\n          } else {\n            closeNumber(parser);\n            i--; // go back one\n            parser.state = parser.stack.pop() || S.VALUE;\n          }\n        continue;\n\n        default:\n          error(parser, \"Unknown state: \" + parser.state);\n      }\n    }\n    if (parser.position >= parser.bufferCheckPosition)\n      checkBufferLength(parser);\n    return parser;\n  }\n\n})(exports);\n});\n\nfunction JsonStream(blob) {\n    var pos = 0;\n    var parser = JsonParser(true);\n    var rv = {\n        pullAsync: function (numBytes) {\n            return __awaiter(this, void 0, void 0, function () {\n                var slize, jsonPart, result;\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0:\n                            slize = blob.slice(pos, pos + numBytes);\n                            pos += numBytes;\n                            return [4 /*yield*/, readBlobAsync(slize, 'text')];\n                        case 1:\n                            jsonPart = _a.sent();\n                            result = parser.write(jsonPart);\n                            rv.result = result || {};\n                            return [2 /*return*/, result];\n                    }\n                });\n            });\n        },\n        pullSync: function (numBytes) {\n            var slize = blob.slice(pos, pos + numBytes);\n            pos += numBytes;\n            var jsonPart = readBlobSync(slize, 'text');\n            var result = parser.write(jsonPart);\n            rv.result = result || {};\n            return result;\n        },\n        done: function () {\n            return parser.done();\n        },\n        eof: function () {\n            return pos >= blob.size;\n        },\n        result: {}\n    };\n    return rv;\n}\nfunction JsonParser(allowPartial) {\n    var parser = clarinet_1.parser();\n    var level = 0;\n    var result;\n    var stack = [];\n    var obj;\n    var key;\n    var done = false;\n    var array = false;\n    parser.onopenobject = function (newKey) {\n        var newObj = {};\n        newObj.incomplete = true;\n        if (!result)\n            result = newObj;\n        if (obj) {\n            stack.push([key, obj, array]);\n            if (allowPartial) {\n                if (array) {\n                    obj.push(newObj);\n                }\n                else {\n                    obj[key] = newObj;\n                }\n            }\n        }\n        obj = newObj;\n        key = newKey;\n        array = false;\n        ++level;\n    };\n    parser.onkey = function (newKey) { return key = newKey; };\n    parser.onvalue = function (value) { return array ? obj.push(value) : obj[key] = value; };\n    parser.oncloseobject = function () {\n        var _a;\n        delete obj.incomplete;\n        key = null;\n        if (--level === 0) {\n            done = true;\n        }\n        else {\n            var completedObj = obj;\n            _a = stack.pop(), key = _a[0], obj = _a[1], array = _a[2];\n            if (!allowPartial) {\n                if (array) {\n                    obj.push(completedObj);\n                }\n                else {\n                    obj[key] = completedObj;\n                }\n            }\n        }\n    };\n    parser.onopenarray = function () {\n        var newObj = [];\n        newObj.incomplete = true;\n        if (!result)\n            result = newObj;\n        if (obj) {\n            stack.push([key, obj, array]);\n            if (allowPartial) {\n                if (array) {\n                    obj.push(newObj);\n                }\n                else {\n                    obj[key] = newObj;\n                }\n            }\n        }\n        obj = newObj;\n        array = true;\n        key = null;\n        ++level;\n    };\n    parser.onclosearray = function () {\n        var _a;\n        delete obj.incomplete;\n        key = null;\n        if (--level === 0) {\n            done = true;\n        }\n        else {\n            var completedObj = obj;\n            _a = stack.pop(), key = _a[0], obj = _a[1], array = _a[2];\n            if (!allowPartial) {\n                if (array) {\n                    obj.push(completedObj);\n                }\n                else {\n                    obj[key] = completedObj;\n                }\n            }\n        }\n    };\n    return {\n        write: function (jsonPart) {\n            parser.write(jsonPart);\n            return result;\n        },\n        done: function () {\n            return done;\n        }\n    };\n}\n\nvar DEFAULT_KILOBYTES_PER_CHUNK = 1024;\nfunction importDB(exportedData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var CHUNK_SIZE, stream, dbExport, db;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    options = options || {}; // All booleans defaults to false.\n                    CHUNK_SIZE = options.chunkSizeBytes || (DEFAULT_KILOBYTES_PER_CHUNK * 1024);\n                    return [4 /*yield*/, loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE)];\n                case 1:\n                    stream = _a.sent();\n                    dbExport = stream.result.data;\n                    db = new Dexie(dbExport.databaseName);\n                    db.version(dbExport.databaseVersion).stores(extractDbSchema(dbExport));\n                    return [4 /*yield*/, importInto(db, stream, options)];\n                case 2:\n                    _a.sent();\n                    return [2 /*return*/, db];\n            }\n        });\n    });\n}\nfunction peakImportFile(exportedData) {\n    return __awaiter(this, void 0, void 0, function () {\n        var stream;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    stream = JsonStream(exportedData);\n                    _a.label = 1;\n                case 1:\n                    if (!!stream.eof()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stream.pullAsync(5 * 1024)];\n                case 2:\n                    _a.sent(); // 5 k is normally enough for the headers. If not, it will just do another go.\n                    if (stream.result.data && stream.result.data.data) {\n                        // @ts-ignore - TS won't allow us to delete a required property - but we are going to cast it.\n                        delete stream.result.data.data; // Don't return half-baked data array.\n                        return [3 /*break*/, 3];\n                    }\n                    return [3 /*break*/, 1];\n                case 3: return [2 /*return*/, stream.result];\n            }\n        });\n    });\n}\nfunction importInto(db, exportedData, options) {\n    return __awaiter(this, void 0, void 0, function () {\n        function importAll() {\n            return __awaiter(this, void 0, void 0, function () {\n                var _loop_1, _i, _a, tableExport, state_1;\n                return __generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            _loop_1 = function (tableExport) {\n                                var tableName, table, tableSchemaStr, sourceRows, rows, i, obj, filter, filteredRows, _c, keys, values;\n                                return __generator(this, function (_d) {\n                                    switch (_d.label) {\n                                        case 0:\n                                            if (!tableExport.rows)\n                                                return [2 /*return*/, \"break\"]; // Need to pull more!\n                                            if (!tableExport.rows.incomplete && tableExport.rows.length === 0)\n                                                return [2 /*return*/, \"continue\"];\n                                            if (progressCallback) {\n                                                // Keep ongoing transaction private\n                                                Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                                            }\n                                            tableName = tableExport.tableName;\n                                            table = db.table(tableName);\n                                            tableSchemaStr = dbExport.tables.filter(function (t) { return t.name === tableName; })[0].schema;\n                                            if (!table) {\n                                                if (!options.acceptMissingTables)\n                                                    throw new Error(\"Exported table \" + tableExport.tableName + \" is missing in installed database\");\n                                                else\n                                                    return [2 /*return*/, \"continue\"];\n                                            }\n                                            if (!options.acceptChangedPrimaryKey &&\n                                                tableSchemaStr.split(',')[0] != table.schema.primKey.src) {\n                                                throw new Error(\"Primary key differs for table \" + tableExport.tableName + \". \");\n                                            }\n                                            sourceRows = tableExport.rows;\n                                            rows = [];\n                                            for (i = 0; i < sourceRows.length; i++) {\n                                                obj = sourceRows[i];\n                                                if (!obj.incomplete) {\n                                                    rows.push(TSON.revive(obj));\n                                                }\n                                                else {\n                                                    break;\n                                                }\n                                            }\n                                            filter = options.filter;\n                                            filteredRows = filter ?\n                                                tableExport.inbound ?\n                                                    rows.filter(function (value) { return filter(tableName, value); }) :\n                                                    rows.filter(function (_a) {\n                                                        var key = _a[0], value = _a[1];\n                                                        return filter(tableName, value, key);\n                                                    }) :\n                                                rows;\n                                            _c = tableExport.inbound ?\n                                                [undefined, filteredRows] :\n                                                [filteredRows.map(function (row) { return row[0]; }), rows.map(function (row) { return row[1]; })], keys = _c[0], values = _c[1];\n                                            if (!options.overwriteValues) return [3 /*break*/, 2];\n                                            return [4 /*yield*/, table.bulkPut(values, keys)];\n                                        case 1:\n                                            _d.sent();\n                                            return [3 /*break*/, 4];\n                                        case 2: return [4 /*yield*/, table.bulkAdd(values, keys)];\n                                        case 3:\n                                            _d.sent();\n                                            _d.label = 4;\n                                        case 4:\n                                            progress.completedRows += rows.length;\n                                            if (!rows.incomplete) {\n                                                progress.completedTables += 1;\n                                            }\n                                            sourceRows.splice(0, rows.length); // Free up RAM, keep existing array instance.\n                                            return [2 /*return*/];\n                                    }\n                                });\n                            };\n                            _i = 0, _a = dbExport.data;\n                            _b.label = 1;\n                        case 1:\n                            if (!(_i < _a.length)) return [3 /*break*/, 4];\n                            tableExport = _a[_i];\n                            return [5 /*yield**/, _loop_1(tableExport)];\n                        case 2:\n                            state_1 = _b.sent();\n                            if (state_1 === \"break\")\n                                return [3 /*break*/, 4];\n                            _b.label = 3;\n                        case 3:\n                            _i++;\n                            return [3 /*break*/, 1];\n                        case 4:\n                            // Avoid unnescessary loops in \"for (const tableExport of dbExport.data)\" \n                            while (dbExport.data.length > 0 && dbExport.data[0].rows && !dbExport.data[0].rows.incomplete) {\n                                // We've already imported all rows from the first table. Delete its occurrence\n                                dbExport.data.splice(0, 1);\n                            }\n                            if (!(!jsonStream.done() && !jsonStream.eof())) return [3 /*break*/, 8];\n                            if (!readBlobsSynchronously) return [3 /*break*/, 5];\n                            // If we can pull from blob synchronically, we don't have to\n                            // keep transaction alive using Dexie.waitFor().\n                            // This will only be possible in workers.\n                            jsonStream.pullSync(CHUNK_SIZE);\n                            return [3 /*break*/, 7];\n                        case 5: return [4 /*yield*/, Dexie.waitFor(jsonStream.pullAsync(CHUNK_SIZE))];\n                        case 6:\n                            _b.sent();\n                            _b.label = 7;\n                        case 7: return [3 /*break*/, 9];\n                        case 8: return [3 /*break*/, 10];\n                        case 9:\n                            return [3 /*break*/, 0];\n                        case 10: return [2 /*return*/];\n                    }\n                });\n            });\n        }\n        var CHUNK_SIZE, jsonStream, dbExportFile, readBlobsSynchronously, dbExport, progressCallback, progress, _i, _a, table;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0:\n                    options = options || {}; // All booleans defaults to false.\n                    CHUNK_SIZE = options.chunkSizeBytes || (DEFAULT_KILOBYTES_PER_CHUNK * 1024);\n                    return [4 /*yield*/, loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE)];\n                case 1:\n                    jsonStream = _b.sent();\n                    dbExportFile = jsonStream.result;\n                    readBlobsSynchronously = 'FileReaderSync' in self;\n                    dbExport = dbExportFile.data;\n                    if (!options.acceptNameDiff && db.name !== dbExport.databaseName)\n                        throw new Error(\"Name differs. Current database name is \" + db.name + \" but export is \" + dbExport.databaseName);\n                    if (!options.acceptVersionDiff && db.verno !== dbExport.databaseVersion) {\n                        // Possible feature: Call upgraders in some isolated way if this happens... ?\n                        throw new Error(\"Database version differs. Current database is in version \" + db.verno + \" but export is \" + dbExport.databaseVersion);\n                    }\n                    progressCallback = options.progressCallback;\n                    progress = {\n                        done: false,\n                        completedRows: 0,\n                        completedTables: 0,\n                        totalRows: dbExport.tables.reduce(function (p, c) { return p + c.rowCount; }, 0),\n                        totalTables: dbExport.tables.length\n                    };\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    if (!options.clearTablesBeforeImport) return [3 /*break*/, 5];\n                    _i = 0, _a = db.tables;\n                    _b.label = 2;\n                case 2:\n                    if (!(_i < _a.length)) return [3 /*break*/, 5];\n                    table = _a[_i];\n                    return [4 /*yield*/, table.clear()];\n                case 3:\n                    _b.sent();\n                    _b.label = 4;\n                case 4:\n                    _i++;\n                    return [3 /*break*/, 2];\n                case 5:\n                    if (!options.noTransaction) return [3 /*break*/, 7];\n                    return [4 /*yield*/, importAll()];\n                case 6:\n                    _b.sent();\n                    return [3 /*break*/, 9];\n                case 7: return [4 /*yield*/, db.transaction('rw', db.tables, importAll)];\n                case 8:\n                    _b.sent();\n                    _b.label = 9;\n                case 9:\n                    progress.done = true;\n                    if (progressCallback) {\n                        // Keep ongoing transaction private\n                        Dexie.ignoreTransaction(function () { return progressCallback(progress); });\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction loadUntilWeGotEnoughData(exportedData, CHUNK_SIZE) {\n    return __awaiter(this, void 0, void 0, function () {\n        var stream, dbExportFile;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    stream = ('slice' in exportedData ?\n                        JsonStream(exportedData) :\n                        exportedData);\n                    _a.label = 1;\n                case 1:\n                    if (!!stream.eof()) return [3 /*break*/, 3];\n                    return [4 /*yield*/, stream.pullAsync(CHUNK_SIZE)];\n                case 2:\n                    _a.sent();\n                    if (stream.result.data && stream.result.data.data)\n                        return [3 /*break*/, 3];\n                    return [3 /*break*/, 1];\n                case 3:\n                    dbExportFile = stream.result;\n                    if (!dbExportFile || dbExportFile.formatName != \"dexie\")\n                        throw new Error(\"Given file is not a dexie export\");\n                    if (dbExportFile.formatVersion > VERSION) {\n                        throw new Error(\"Format version \" + dbExportFile.formatVersion + \" not supported\");\n                    }\n                    if (!dbExportFile.data) {\n                        throw new Error(\"No data in export file\");\n                    }\n                    if (!dbExportFile.data.databaseName) {\n                        throw new Error(\"Missing databaseName in export file\");\n                    }\n                    if (!dbExportFile.data.databaseVersion) {\n                        throw new Error(\"Missing databaseVersion in export file\");\n                    }\n                    if (!dbExportFile.data.tables) {\n                        throw new Error(\"Missing tables in export file\");\n                    }\n                    return [2 /*return*/, stream];\n            }\n        });\n    });\n}\n\n//\n// Extend Dexie interface (runtime wise)\n//\nDexie.prototype.export = function (options) {\n    return exportDB(this, options);\n};\nDexie.prototype.import = function (blob, options) {\n    return importInto(this, blob, options);\n};\nDexie.import = function (blob, options) { return importDB(blob, options); };\nvar dexieExportImport = (function () {\n    throw new Error(\"This addon extends Dexie.prototype globally and does not have be included in Dexie constructor's addons options.\");\n});\n\nexport default dexieExportImport;\nexport { exportDB, importDB, importInto, peakImportFile };\n//# sourceMappingURL=dexie-export-import.mjs.map\n","'use strict';\nimport Dexie from \"dexie\";\nimport \"dexie-export-import\";\n\nasync function exportDatabase() {\n  const db = await new Dexie('/idbfs').open();\n  const blob = await db.export();\n  const elem = window.document.createElement('a');\n  elem.href = window.URL.createObjectURL(blob);\n  elem.download = \"world.json\";\n  document.body.appendChild(elem);\n  elem.click();\n  document.body.removeChild(elem);\n}\n\nasync function importDatabase(file) {\n\n  await Dexie.import(new Blob([file], { type: 'application/json' }),{overwriteValues:true});\n  console.log(\"Database Imported\");\n  alert(\"Import successful.\")\n  location.reload();\n}\n\nfunction importdata() {\n  const input = window.document.createElement('input');\n  input.type = \"file\";\n  input.id = \"importfile\";\n  document.body.appendChild(input);\n  importfile.addEventListener(\"change\", readFile, false);\n  input.click();\n  document.body.removeChild(input);\n}\n\nfunction readFile(e) {\n  var files = e.target.files, reader = new FileReader();\n  reader.onload = _imp;\n  reader.readAsText(files[0]);\n}\n\nfunction _imp() {\n  importDatabase(this.result);\n}\n\n\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.type === 'EXPORT') {\n    console.log(`Exporting`);\n    exportDatabase();\n  }\n  if (request.type === 'IMPORT') {\n    console.log(`Importing`);\n    importdata();\n  }\n  sendResponse({});\n  return true;\n});\n\n"],"names":["_global","globalThis","self","window","global","keys","Object","isArray","Array","extend","obj","extension","forEach","key","Promise","getProto","getPrototypeOf","_hasOwn","hasOwnProperty","hasOwn","prop","call","props","proto","Reflect","ownKeys","setProp","defineProperty","functionOrGetSet","options","get","set","configurable","value","writable","derive","Child","from","Parent","prototype","create","bind","getOwnPropertyDescriptor","getPropertyDescriptor","_slice","slice","args","start","end","override","origFunc","overridedFactory","assert","b","Error","asap$1","fn","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","result","item","i","nameAndValue","getByKeyPath","keyPath","rv","l","length","val","push","period","indexOf","innerObj","substr","undefined","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","splice","shallowClone","m","concat","flatten","a","apply","intrinsicTypeNames","split","map","num","t","filter","intrinsicTypes","x","circularRefs","deepClone","any","WeakMap","innerDeepClone","constructor","toString","toStringTag","o","iteratorSymbol","Symbol","iterator","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","arguments","this","next","done","isAsyncFunction","debug","location","test","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","e","prettyStack","exception","numIgnoredFrames","name","message","frame","join","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","getMultiErrorMessage","failures","v","s","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","_stack","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","exceptionMap","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","onerror","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","then","thiz","INTERNAL","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","globalP","resolve","crypto","subtle","nativeP","digest","Uint8Array","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","document","createElement","observe","attributes","setAttribute","asap","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","zone","promise","shouldExecuteTick","beginMicroTickScope","_then","propagateAllListeners","endMicroTickScope","ex","reason","_promise","origProp","tryCatch","some","p","addPossiblyUnhandledError","listeners","len","finalizePhysicalTick","listener","cb","callListener","ret","markErrorAsHandled","getStack","stacks","limit","errorName","failure","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","PromiseReject","wrap","errorCatcher","outerScope","switchToZone","catch","type","handler","err","finally","onFinally","timeout","ms","Infinity","handle","Timeout","clearTimeout","snapShot","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","finalizer","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","status","AggregateError","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","pop","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise","targetEnv","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","event","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","console","warn","tempTransaction","db","mode","storeNames","idbdb","openComplete","letThrough","_vip","trans","_createTransaction","_dbSchema","_completion","dbOpenError","isBeingOpened","_options","autoOpen","open","dbReadyPromise","DEXIE_VERSION","maxString","String","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","kp","JSON","stringify","idxByName","idb","_deps","indexedDB","cmp","idx","filterFunction","prevIndex","prevFilterFn","index","multi","toCollection","and","count","thenShortcut","offset","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","content","add","auto","objToAdd","mutate","numFailures","lastResult","update","keyOrObject","modify","InvalidArgument","_a","put","delete","clear","range","bulkGet","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","bulkPut","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","makeClassConstructor","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","union","cursor","advance","stop","fail","_iterate","iterate","valueMapper","cursorPromise","wrappedFn","c","continue","advancer","ta","tb","NaN","al","bl","compareUint8Arrays","getUint8Array","compareArrays","ArrayBuffer","isView","tsTag","buffer","byteOffset","byteLength","_read","_ctx","error","table","_write","_addAlgorithm","clone","raw","Math","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","isMatch","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","criteria","deleteCallback","changeSpec","coreRange","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","whereClause","rangeEqual","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","toUpperCase","toLowerCase","upperFactory","lowerFactory","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","n","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","max","_max","sortDirection","rangeSorter","newRange","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","checkKey","keyWithinCurrentRange","startsWithAnyOf","eventRejectHandler","preventDefault","target","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","transaction","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","tableSchema","transactionBoundTable","createIndexSpec","src","nameFromKeyPath","createTableSchema","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","generateMiddlewareStacks","_novip","tmpTrans","middlewares","IDBKeyRange","dbcore","stackImpl","down","createMiddlewareStack","makeIDBKeyRange","upperBound","lowerBound","bound","hasGetAll","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","extractSchema","isAddOrPut","req","reqs","errorHandler","args1","args2","keyCount","callbackCount","successHandler","_pos","request","nonInfinitLimit","source","idbKeyRange","getAll","getAllKeys","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","createDbCoreTable","tableMap","MIN_KEY","MAX_KEY","createDBCore","createMiddlewareStacks","_middlewares","tbl","setApiOnPlace","objs","tableNames","dbschema","propDesc","enumerable","removeTablesApi","lowerVersionFirst","_cfg","version","getSchemaDiff","oldSchema","newSchema","diff","del","change","oldDef","newDef","def","recreate","oldIndexes","newIndexes","idxName","oldIdx","newIdx","createTable","createObjectStore","addIndex","createIndex","buildGlobalSchema","globalSchema","storeName","j","idbindex","adjustToExistingIndexNames","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","Version","_parseStoresSpec","stores","outSchema","indexNum","trim","replace","storesSource","versions","_versions","storesSpec","_allTables","_storeNames","upgrade","upgradeFunction","contentUpgrade","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","vip","idbReady","intervalId","userAgentData","tryIdb","setInterval","clearInterval","dexieOpen","state","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","round","verno","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","oldVersion","pow","idbUpgradeTrans","rejectTransaction","populate","queue","anyContentUpgraderHasRun","tuple","Upgrade","deleteIndex","upgradeSchema","contentUpgradeIsAsync","returnValue","promiseFollowed","decrementor","deleteObjectStore","deleteRemovedTables","runQueue","contains","updateTablesAndIndexes","runUpgraders","readGlobalSchema","ch","verifyInstalledSchema","onversionchange","vcFired","onclose","_onDatabaseCreated","onReadyBeingFired","ready","fireRemainders","remainders","_close","awaitIterator","callNext","onSuccess","step","onError","throw","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","PrematureCommit","pad","virtualIndexMiddleware","level","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","translateRequest","virtualCursor","createVirtualCursor","getObjectDiff","prfx","ap","bp","apTypeName","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteNextChunk","deleteRange","getEffectiveKeys","effectiveKeys","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges","requestedValue","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","to","d","addRange","left","right","r","rebalance","rightWasCutOff","mergeRanges","newSet","_addRangeSet","getRangeSetIterator","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","rangeSet","addKey","addKeys","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","addKeyOrKeys","oldKey","newKey","trackAffectedIndexes","getRange","readSubscribers","method","subscr","queriedIndex","queriedRanges","keysPromise","resultingKeys","pKeys","wantValues","pkey","deps","dependencies","cancelOpen","bSticky","keyRangeGenerator","keyRange","whereCtx","readingHook","createTableConstructor","complete","wasActive","createTransactionConstructor","versionNumber","createVersionConstructor","orCollection","_IDBKeyRange","createWhereClauseConstructor","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","_onDatabaseDeleted","backendDB","isOpen","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","Dexie","propagateLocally","updateParts","wasMe","propagatingLocally","databaseName","exists","getDatabaseNames","infos","info","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","liveQuery","querier","observer","closed","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","rangeSet1","rangeSet2","i1","nextResult1","i2","nextResult2","rangesOverlap","doQuery","exec","execute","delByKeyPath","semVer","maxKey","addEventListener","updatedParts","initCustomEvent","BroadcastChannel","bc","changedParts","postMessage","onmessage","data","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","parse","newValue","swContainer","serviceWorker","__awaiter","thisArg","_arguments","P","generator","fulfilled","rejected","__generator","body","f","y","g","label","sent","trys","ops","verb","op","getSchemaString","readBlobAsync","blob","reader","FileReader","onload","readAsArrayBuffer","readAsText","readBlobSync","FileReaderSync","domError","commonjsGlobal","createCommonjsModule","module","exports","typeson","return","u","isThenable","Typeson","isObject","hasConstructorOf","isPlainObject","types","assign","stringification","stringifySync","throwOnBadSyncType","sync","stringifyAsync","h","parseSync","parseAsync","specialTypeNames","returnTypeNames","encapsulate","rootTypeName","iterateNone","O","cyclic","encapsulateObserver","_encapsulate","finish","getJSONType","Set","$types","$","checkPromises","TypesonPromise","_adaptBuiltinStateObjectProperties","keypath","stateObj","promisesData","resolvingTypesonPromise","awaitingTypesonPromise","string","boolean","number","replaced","iterateIn","iterateUnsetNumeric","cyclicKeypath","S","w","escapeKeyPathComponent","A","endIterateIn","endIterateOwn","C","N","B","endIterateUnsetNumeric","replaceAsync","replacing","typeDetected","encapsulateSync","encapsulateAsync","revive","_revive","Undefined","reviveAsync","reviveSync","register","R","JSON_TYPES","includes","testPlainObjects","fallback","unescapeKeyPathComponent","isUserObject","structuredCloning","userObject","sparseArrays","sparseUndefined","undef","StringObject","BooleanObject","Boolean","NumberObject","Number","nan","infinity","negativeInfinity","date","getTime","Date","regexp","flags","ignoreCase","multiline","sticky","unicode","RegExp","entries","Map","charCodeAt","substring","arraybuffer","buffers","encoded","dataview","DataView","IntlCollator","Intl","Collator","resolvedOptions","locale","IntlDateTimeFormat","DateTimeFormat","IntlNumberFormat","NumberFormat","string2arraybuffer","Uint16Array","file","XMLHttpRequest","URL","createObjectURL","TextEncoder","overrideMimeType","send","stringContents","responseText","lastModified","File","isClosed","imagedata","width","height","ImageData","Uint8ClampedArray","imagebitmap","dataset","getContext","drawImage","toDataURL","createImageBitmap","filelist","FileList","_files","Blob","chars","lookup","encode","bytes","base64","_i","decode","encoded1","encoded2","encoded3","encoded4","bufferLength","_i2","exportObj","typeName","arrType","TypedArray","b64Obj","arrayBuffer","b64","TSON","readBlobsSynchronously","blobsToAwait","blobsToAwaitPos","blob2","size","log","ba","mustFinalize","items","allChunks","items_1","arrayType","typeSpec","fakeStream","clarinet_1","clarinet","process","parser","opt","CParser","CStream","createStream","MAX_BUFFER_LENGTH","DEBUG","CDEBUG","INFO","EVENTS","Stream","textNode","numberNode","streamWraps","s_","STATE","BEGIN","VALUE","OPEN_OBJECT","CLOSE_OBJECT","OPEN_ARRAY","CLOSE_ARRAY","TEXT_ESCAPE","STRING","BACKSLASH","END","OPEN_KEY","CLOSE_KEY","TRUE","TRUE2","TRUE3","FALSE","FALSE2","FALSE3","FALSE4","NULL","NULL2","NULL3","NUMBER_DECIMAL_POINT","NUMBER_DIGIT","Char","clearBuffers","stringTokenPattern","bufferCheckPosition","q","closedRoot","sawRoot","tag","position","column","line","slashed","unicodeI","unicodeS","depth","emit","write","chunk","isWhitespace","closeValue","emitNode","starti","STRING_BIGLOOP","reResult","closeNumber","maxAllowed","maxActual","closeText","checkBufferLength","resume","_parser","readable","bytes_remaining","bytes_in_sequence","temp_buffs","Buffer","me","onend","er","removeAllListeners","text","normalize","parseFloat","k","destroy","importInto","exportedData","importAll","_loop_1","tableExport","tableSchemaStr","sourceRows","rows","filteredRows","_c","_d","incomplete","progressCallback","progress","dbExport","acceptMissingTables","acceptChangedPrimaryKey","inbound","row","overwriteValues","completedRows","completedTables","jsonStream","eof","pullSync","CHUNK_SIZE","pullAsync","dbExportFile","chunkSizeBytes","loadUntilWeGotEnoughData","acceptNameDiff","acceptVersionDiff","databaseVersion","totalRows","rowCount","totalTables","clearTablesBeforeImport","noTransaction","stream","allowPartial","onopenobject","newObj","onkey","onvalue","oncloseobject","onopenarray","onclosearray","jsonPart","JsonParser","numBytes","slize","formatName","formatVersion","readFile","files","_imp","alert","reload","importDatabase","exportAll","tablesRowCounts","emptyExportJson","posEndDataArray","firstJsonSlice","tables_1","emptyExport","prettyJson","lastIndexOf","slices","LIMIT","emptyTableExport","emptyTableExportJson","posEndRowsArray","lastNumRows","mayHaveMoreRows","_loop_2","numRowsPerChunk","chunkedCollection","filteredValues","tsonValues","keyvals","tsonTuples","json","exportDB","exportedDb","extractDbSchema","importDB","chrome","runtime","onMessage","addListener","sender","sendResponse","export","elem","download","appendChild","click","removeChild","exportDatabase","input","importfile","importdata"],"sourceRoot":""}